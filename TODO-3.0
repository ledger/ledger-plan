LEDGER  -*- mode: org; fill-column: 78 -*-

#+STARTUP: content fninline hidestars
#+SEQ_TODO: STARTED TODO(@) WAITING(@) DELEGATED(@) DEFERRED(@) | DONE(@) CANCELED(@) WONTFIX(@) WORKSFORME(@) INVALID(@) DUPLICATE(@) CLOSED TESTED NOTE
#+TAGS: blocker(B) critical(C)
#+DRAWERS: PROPERTIES LOGBOOK OUTPUT SCRIPT SOURCE DATA
#+LINK: bug http://bugs.ledger-cli.org/show_bug.cgi?id=
#+CATEGORY: Ledger

* Bugs
** DONE [#A] !include statememt no longer accepts simple filenames
   - State "DONE"       from "TODO"       [2009-11-10 Tue 00:55]
   It needs the full path to the file.
   :PROPERTIES:
   :ID:       272532BD-9BC5-46AA-B94C-BBAD05F35893
   :Message:  [[message://20091101095935.GB3138@jue.netz][Re: All known bugs and features for 3.0 implemented]]
   :CREATED:  [2009-11-01 Sun 05:50]
   :END:
** DONE [#A] "print" command filters out the "balance assertions"
   - State "DONE"       from "TODO"       [2010-05-22 Sat 13:09]
   :PROPERTIES:
   :ID:       640D3205-E62F-41F2-9967-04C7BBAD884D
   :Message:  [[message://161185f2-1873-4892-87d0-904c96a4a76a@n15g2000yqf.googlegroups.com]["print" command filters out the "balance assertions"]]
   :CREATED:  [2010-04-30 Fri 18:21]
   :END:
** DONE [#A] 'ledger emacs -s -b 2009/07 food' tries to use an uninitialized variable
   - State "DONE"       from "TODO"       [2010-05-22 Sat 13:17]
   :PROPERTIES:
   :ID:       7B54CF80-45A4-4D50-A8D3-63272D60FA1B
   :CREATED:  [2010-04-12 Mon 22:03]
   :END:
** DONE [#A] 1,00.00 should result in an amount parsing error
   - State "DONE"       from "TODO"       [2009-11-10 Tue 00:12]
   :PROPERTIES:
   :ID:       1A546C4D-42BF-44B4-A477-BF71FB42AE52
   :CREATED:  [2009-11-08 Sun 18:23]
   :END:
** DONE [#A] [[bug:163][#163]] Exponential slowdown when using --exchange                             :ATTACH:
   - State "DONE"       from "TODO"       [2010-06-04 Fri 06:09] \\
     After several days of intensive examination, I think now there is little
     help for what you're seeing.  The slowness comes from (a) the size of
     your data file and how many commodities you're using, and (b) the
     correctness and new behavior of --exchange (and, to a lesser extent, -V).

     To illustrate what I mean, I've added a new command "pricemap".  It
     outputs a DOT file showing the pricing relationships between all
     commodities in your data file at a given date.  To give an example of how
     complex the situation can be, consider this data file:

      http://ftp.newartisans.com/pub/exchange.dat

     At 2009/01/03, the price relationships are as shown here:

      http://ftp.newartisans.com/pub/090103.png

     But by 2009/01/10, they have changed significantly:

      http://ftp.newartisans.com/pub/090110.png

     When you use --exchange $, Ledger tries to find the most recent
     conversion to $ that it can.  To do this, it considers not only whether a
     commodity A could be priced in dollars, but whether it could also be
     priced in terms of B, which could then be priced in dollars.  And so on.
     It must walk the graph of all possible connections to $, truncating the
     search only if the most recent valuation down that leg is older than the
     most recent found so far.  Sometimes, it can take several hops before the
     most recent conversion price is found.

     Note to mention that all of this can happen several times for a single
     posting: while computing the amount, the running total, to see if a
     revaluation has occurred, to see if a rounding error has occurred, etc.

     I have managed to speed things up a fair bit, however, so please try your
     tests again with the latest 'next' branch.  Here are the improvements,
     using an "acprep opt" build on a 2.26GHz Core i7 (all output going to
     /dev/null):

      Before optimization work (current 'master' branch):

        reg, no flags       6.86s
        reg, -V            39.23s
        reg, -X            85.92s

      After optimization work (current 'next' branch):

        reg, no flags       5.00s
        reg, -V            13.39s
        reg, -X            12.91s
   - Note taken on [2010-03-04 Thu 13:57] \\
     The following command should reproduce the problem of performance with
     multiple currencies:
     #+begin_src sh
     ledger --european -f thierry.ledger.anon -V reg 2eb75f84 1eede0cb >/dev/null
     #+end_src
   :PROPERTIES:
   :ID:       C609E728-0962-4745-955E-988B1E3F9918
   :Message:  [[message://9097b239-86e0-4a5c-8acb-15f3e886f7a2@e1g2000yqh.googlegroups.com][ledger v3 slower than ledger v2]]
   :Attachments: gmon.gprof thierry.ledger.anon.gpg
   :CREATED:  [2010-03-04 Thu 13:55]
   :END:
** DONE [#A] [[bug:188][#188]] Not calculating commodity conversions due to rounding                :critical:
   - State "DONE"       from "TODO"       [2010-06-06 Sun 06:21] \\
     Fixed by 39f9854e.
   - Note taken on [2010-06-06 Sun 04:49] \\
     The "reg -B" report is wrong for this data file as well.
   I also found something else regarding calculations on commodity prices,
    given this input file:
   #+begin_src sh
    D $1,000.00

    ; payroll taxes
    = /^Payroll/
    Liabilities:Taxes:CFICA  0.062
    Liabilities:Taxes:CMED  0.0145
    $account:EFICA  -0.062
    $account:EMED  -0.0145

    ; Hourly rates for each employee, as commodity prices.
    P 2010/01/01 EONE $15.00

    ; Payroll transactions
    2010/05/18  Payroll from May 2nd to May 15th for Employee1
     Assets:Checking  20 EONE
     Payroll:Employee1
   #+end_src

    Ledger doesn't calculate the EMED value if you use a small whole number
    for the commodity that does the conversion from hours to rate/hour:
    :OUTPUT:
    $ ledger3 -V -f payroll.led2 bal
                $300.00  Assets:Checking
                $-18.60  Liabilities:Taxes:CFICA
               $-277.05  Payroll:Employee1
                 $18.60    EFICA
    --------------------
                      0
    :END:

    But if you change the line that says:
   #+begin_src sh
      Assets:Checking  20 EONE
   #+end_src
    to
   #+begin_src sh
      Assets:Checking  20.0 EONE
   #+end_src

    You get:
    :OUTPUT:
    $ ledger3 -V -f payroll.led2 bal
                $300.00  Assets:Checking
                $-22.95  Liabilities:Taxes
                $-18.60    CFICA
                 $-4.35    CMED
               $-277.05  Payroll:Employee1
                 $18.60    EFICA
                  $4.35    EMED
    --------------------
                      0
    :END:

    From what I can tell, internally Ledger is calculating the numbers of
    commodities, then converting to values with -V only when the value is
    greater than half of the commodity value.
   :PROPERTIES:
   :ID:       53BCED29-F3B9-4E02-9A35-6C739ABB9662
   :Submitter: Zack Williams <zdwzdw@gmail.com>
   :Message:  [[message://AANLkTimJeCGP3gPJTtnqNjsKMuThUJ_NPBAGkdyuxeH6@mail.gmail.com][Re: Doing US payroll taxes with ledger]]
   :CREATED:  [2010-05-23 Sun 19:00]
   :END:
** DONE [#A] [[bug:189][#189]] Optimize value truncation
   - State "DONE"       from "TODO"       [2010-06-04 Fri 06:13]
   - State "TODO"       from "STARTED"    [2010-06-02 Wed 17:11]
   Currently it prints the amount, then reparses it.  For large balances
   with lots of commodities, this can get extremely expensive, as
   annotated commodities are likely involved as well!
   :PROPERTIES:
   :ID:       B6C8EACD-9392-4380-BB57-93EDF0EE5C34
   :CREATED:  [2010-05-23 Sun 17:05]
   :END:
** DONE [#A] [[bug:192][#192]] Problem with the new fixed rate feature                                :ATTACH:
   - State "DONE"       from "TODO"       [2010-06-07 Mon 08:24]
   - Note taken on [2009-12-11 Fri 02:12] \\
     Javier [[message://92a1cace0912100848v3b6e81bfp332590a8057d73fe@mail.gmail.com][writes]]: I found that the problem is not related to the new "fixed"
     directive at all.

     After looking through the fixed-directive code I couldn't find any
     problems with it. I also noticed that the annotation details change
     between parsing time (when they are fine) and the amount::value() call.

     Then I changed all my fixed directives in the ledger file to {=$####}
     entries for all the foreign currencies (no "fixed" directive in the whole
     file) and the problem persisted!: some {=} entries used the wrong price
     from another {=} entry.

     I think the problem is somewhere between parsing and applying the
     algorithms (at least for -V reg) where the original post details seem to
     have changed. At least for ANNOTATION_PRICE_FIXATED entries. (I used
     printf's in parsing and in amount_t::value() to see the price change).

     This is the command i'm using: ./ledger -f multicurrency-no-fixed.ledger
     -V reg payable:jlopez

     I ran this with the master branch on ubuntu 64 bits.
   :PROPERTIES:
   :ID:       DC6AA45B-F714-4209-B0CC-E6CAFB75E50E
   :Message:  [[message://53ed3320-3d2d-46d8-8dd3-98b953e926fb@e7g2000vbi.googlegroups.com][Re: Multicurrency and reg problem]]
   :Attachments: multicurrency-no-fixed.ledger.zip multicurrency-fixed.ledger.zip
   :Submitter: jleija <jleija@gmail.com>
   :CREATED:  [2009-12-01 Tue 02:39]
   :END:
** DONE [#A] [[bug:226][#226]] print --anon fails completely
   - State "DONE"       from "TODO"       [2010-06-05 Sat 02:46] \\
     Fixed by 63c7ba03.
   It doesn't print out any postings.
   :PROPERTIES:
   :ID:       C1C1E731-D991-40ED-BE43-8ED55585386C
   :CREATED:  [2010-06-04 Fri 02:09]
   :END:
** DONE [#A] [[bug:228][#228]] Make sequences comparable
   - State "DONE"       from "TODO"       [2010-06-05 Sat 03:27] \\
     Fixed by 16f79976.
   This will eliminate all of the special casing I've done to make --sort
   date,amount work.
   :PROPERTIES:
   :ID:       ED9388D7-E523-40EB-841B-9AE9BAA70329
   :CREATED:  [2010-06-04 Fri 02:18]
   :END:
** DONE [#A] [[bug:345][#345]] speed-test.dat with -V is failing verification
   - State "DONE"       from "STARTED"    [2010-06-19 Sat 07:39]
   :LOGBOOK:
   CLOCK: [2010-06-19 Sat 06:09]--[2010-06-19 Sat 07:39] =>  1:30
   :END:
   #+begin_src sh
   ledger -f test/input/speed-test.dat -v --decimal-comma -o /dev/null reg 2eb75f84 1eede0cb -V --verify
   #+end_src
   :OUTPUT:
   While evaluating value expression:
     market(total_expr, value_date, exchange)
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   The value expression tree was:
     0x107fe6db0       O_CALL (2)
     0x108015300        IDENT: market (1)
     0x108017660         FUNCTION (1)
     0x107fe93b0        O_SEQ (1)
     0x107ff00a0         O_CONS (1)
     0x10800a900          IDENT: total_expr (1)
     0x10800ed00           FUNCTION (1)
     0x107ff3bd0          O_CONS (1)
     0x1080023a0           IDENT: value_date (1)
     0x108006500            FUNCTION (1)
     0x107ff7e10           IDENT: exchange (1)
     0x107ffbf70            FUNCTION (1)
   While handling posting from "test/input/speed-test.dat", line 7482:
   >     (da39a3ee:2eb75f84:6183529e:cd17c28b)        -1 AFS @ 0
   Error: Assertion failed in "/Volumes/RAID/Projects/ledger/src/commodity.cc", line 230: boost::optional<ledger::price_point_t> ledger::commodity_t::varied_history_t::find_price(const ledger::commodity_t&, const boost::optional<ledger::commodity_t&>&, const boost::optional<boost::posix_time::ptime>&, const boost::optional<boost::posix_time::ptime>&, int) const: source.referent() != commodity->referent()
   109667ms    24b  21.3K  [INFO]  Ledger ended (Boost/libstdc++ may still hold memory)
   :END:
   :PROPERTIES:
   :ID:       5B20DC9F-277F-495F-806A-4A147E833C49
   :CREATED:  [2010-06-17 Thu 08:17]
   :END:
** DONE [#A] [[bug:353][#353]] No longer handles multiple postings to one account in one transacation
   - State "DONE"       from "TODO"       [2010-06-21 Mon 17:57]
   :PROPERTIES:
   :ID:       15230B79-E091-4A55-9F9E-A49602ECAC1A
   :CREATED:  [2010-06-20 Sun 14:51]
   :END:
** DONE [#A] [[bug:425][#425]] date>=[2010/02/10] causes a parsing error                            :critical:
   - State "DONE"       from "TODO"       [2011-02-04 Fri 22:59]
   :PROPERTIES:
   :ID:       C927CFFE-D27D-4652-9AC8-1C4005FF2B40
   :CREATED:  [2010-11-18 Thu 14:46]
   :END:
** DONE [#A] [[bug:498][#498]] File inclusion is broken
   - State "DONE"       from "TODO"       [2011-03-25 Fri 16:40]
   :PROPERTIES:
   :ID:       777AA2C1-04FF-4912-9FBD-9FE0C12AF98F
   :CREATED:  [2011-03-06 Sun 05:57]
   :END:
** DONE [#A] Any filter that uses create_account must also do so after clear
   SCHEDULED: <2011-02-10 Thu>
   - State "DONE"       from "TODO"       [2011-02-10 Thu 22:27]
   :PROPERTIES:
   :ID:       1BCA64D0-B02B-442D-8C9B-D008E01B825F
   :CREATED:  [2011-02-10 Thu 03:16]
   :END:
** DONE [#A] Automated xact multipliers have no effect on null postings
   - State "DONE"       from "TODO"       [2009-11-09 Mon 22:02]
   :PROPERTIES:
   :ID:       3A14C840-0407-465E-A5AC-09338BB6B707
   :Message:  [[message://165AA794-0741-46E8-B4B5-44EB3DB9D337@surryhill.net][Re: ledger make fullcheck]]
   :CREATED:  [2009-11-09 Mon 02:47]
   :END:
** DONE [#A] Ledger crashes when attempting to use !account
   - State "DONE"       from "STARTED"    [2010-05-22 Sat 13:23]
   :LOGBOOK:
   CLOCK: [2010-05-22 Sat 13:20]--[2010-05-22 Sat 13:23] =>  0:03
   :END:
   :PROPERTIES:
   :ID:       89233B6D-CB21-4162-98E3-BE38B9336070
   :Message:  [[message://20100219085239.GA51178@kei.local][Re: FR: Include w/ prefixes]]
   :CREATED:  [2010-02-22 Mon 02:53]
   :END:
** DONE [#A] Ledger no longer builds
   - State "DONE"       from "TODO"       [2010-01-18 Mon 02:19]
   - Note taken on [2010-01-16 Sat 21:46] \\
     This happens apparently only on my system, and only for debug builds.
   :PROPERTIES:
   :ID:       507609E4-343F-487D-8A01-FDDE54D86E0F
   :CREATED:  [2009-12-13 Sun 01:12]
   :END:
** DONE [#A] ledger reg --account=payee -s, causes a segmentation fault
   - State "DONE"       from "TODO"       [2010-05-22 Sat 13:07]
   :PROPERTIES:
   :ID:       D53C98E5-506D-4CE5-91A3-7666FD33B65B
   :CREATED:  [2010-05-03 Mon 07:20]
   :END:
** DONE [#A] Ledger's include directive is failing in a very simple case                 :ATTACH:
   - State "DONE"       from "TODO"       [2009-12-07 Mon 20:42]
   :PROPERTIES:
   :ID:       4D63641F-3C9E-4C62-A45F-C9B1649BD712
   :Attachments: include.dat data.dat
   :CREATED:  [2009-12-07 Mon 18:52]
   :END:
** DONE [#A] No error message if the parser cannot find an included file
   - State "DONE"       from "TODO"       [2009-11-10 Tue 00:13]
   :PROPERTIES:
   :ID:       6188B0EC-A38F-41AE-9B65-8E155641AB99
   :Message:  [[message://20091101095935.GB3138@jue.netz][Re: All known bugs and features for 3.0 implemented]]
   :CREATED:  [2009-11-01 Sun 05:50]
   :END:
** DONE [#A] Problem with automated transactions and the balance command
   - State "DONE"       from "TODO"       [2009-11-11 Wed 00:27]
   :SCRIPT:
   % ledger --version | head -1
   Ledger next-0-ga345f9e, the command-line accounting tool
   % cat <<EOF | ledger --european -f - bal
   = Income:Clients:
     (Liabilities:Taxes:VAT)  ((1,00 / 1,19) * 0,19)

   2009/07/27 * Invoice
     Assets:Bank:Checking                                           €    1.190,00
     Income:Clients:ACME_Inc
   EOF
             € 1.190,00  Assets:Bank:Checking
            € -1.190,00  Income:Clients:ACME_Inc
   --------------------
                      0
   :END:
   :SCRIPT:
   % cat <<EOF | ledger --european -f - reg
   = Income:Clients:
     (Liabilities:Taxes:VAT)  ((1,00 / 1,19) * 0,19)

   2009/07/27 * Invoice
     Assets:Bank:Checking                                           €    1.190,00
     Income:Clients:ACME_Inc
   EOF
   2009/07/27 Invoice               Assets:Bank:Checking    € 1.190,00   € 1.190,00
                                    In:Clients:ACME_Inc    € -1.190,00            0
                                    (L:Taxes:VAT)            € -190,00    € -190,00
   :END:
   :PROPERTIES:
   :ID:       FDFBA165-7328-4C4F-BC1C-EDF9C629E2B3
   :CREATED:  [2009-11-10 Tue 15:13]
   :END:
** DONE [#A] The bal report does not honor -r
   - State "DONE"       from "STARTED"    [2009-11-07 Sat 08:34]
   If I run "bal simon -r" against this file:
   :SOURCE:
   10/26 trader joe's
       simon                         $-50
       alice                         $-50
       expenses:food:groceries
   :END:
   I see:
   :OUTPUT:
                   $-50  alice
                   $100  expenses:food:groceries
                   $-50  simon
   --------------------
                      0
   :END:

   The register version of this report works just fine.
   :PROPERTIES:
   :ID:       178501DC-6777-4A27-A9D3-587A92FF62D0
   :CREATED:  [2009-11-03 Tue 15:57]
   :END:
** DONE [#A] Using ! erroneously in a data file causes a segfault
   - State "DONE"       from "TODO"       [2009-11-10 Tue 01:06]
   :DATA:
   ! Assets:Cash

   2008/01/01 January
       Expenses:Books          $10.00
       Assets:Cash

   !end

   2008/01/01 January
       Expenses:One:Books          $10.00
       Expenses:One:Two:Books          $10.00
       Expenses:One:Two:Three:Books          $10.00
       Assets:Cash
   :END:
   Running the reg command this data file produces:
   :OUTPUT:
   vulcan ~/src/ledger $ ledger -f /tmp/bug.dat reg
   /opt/local/include/gcc44/c++/debug/list:242:error: attempt to access an
       element in an empty container.

   Objects involved in the operation:
   sequence "this" @ 0x0x7fff5fbfac00 {
     type = NSt7__debug4listIPN6ledger9account_tESaIS3_EEE;
   }
   zsh: abort      ledger -f /tmp/bug.dat reg
   :END:
   :PROPERTIES:
   :ID:       D9C8EB08-C201-4FB0-9941-F4417BCF26BC
   :CREATED:  [2009-11-09 Mon 19:15]
   :END:
** DONE "ledger parse 'foo(1, 2, 3)'" now crashes
   - State "DONE"       [2009-02-28 Sat 06:10]
   :PROPERTIES:
   :ID:       0307B1C1-A2AC-43E2-AE2E-E3BE2617C5AD
   :CREATED:  [2009-02-27 Fri 21:32]
   :END:
** DONE "ledger parse 'foo(1, 2, 3, 4, (5, 6))'" doesn't parse right
   - State "DONE"       [2009-03-03 Tue 16:02]
   - State "STARTED"    [2009-03-03 Tue 15:28]
   :PROPERTIES:
   :ID:       EAF588B2-BDD6-4B3E-A8BB-4D5047476140
   :CREATED:  [2009-02-28 Sat 05:39]
   :END:
** DONE "print" command removes content of "parenthesis computations"
   - State "DONE"       from "TODO"       [2010-05-08 Sat 02:06]
   :PROPERTIES:
   :ID:       32860AAC-BA64-4070-AE4B-3435B181BC28
   :Message:  [[message://4fa6a1d9-6596-427e-87c5-7f503b24d24a@s2g2000yqa.googlegroups.com]["print" command removes content of "parenthesis computations"]]
   :CREATED:  [2010-05-02 Sun 02:41]
   :END:
** DONE "reg -p this" gives an assertion whenever used at the REPL
   - State "DONE"       [2009-02-15 Sun 23:18]
   :PROPERTIES:
   :ID:       FBD10B54-DC5E-420D-B558-450002C00F40
   :CREATED:  [2009-02-08 Sun 20:38]
   :END:
** DONE "reg food" is broken now, looks like a boost::variant issue
   - State "DONE"       [2009-02-12 Thu 03:11]
   :PROPERTIES:
   :ID:       8FFE1ACF-87B8-4EFD-AAEC-EFC1766A29ED
   :CREATED:  [2009-02-12 Thu 02:02]
   :END:
** DONE './ledger -f doc/sample.dat -E bal liab' shows the Assets account
   - State "DONE"       [2009-02-17 Tue 04:51]
   :PROPERTIES:
   :ID:       10D19C11-3698-4A95-AD8D-5CC3551F4567
   :CREATED:  [2009-02-16 Mon 23:52]
   :END:
** DONE 'ledger -f doc/sample.dat -n reg' shows $0.00 on first post
   - State "DONE"       [2009-02-16 Mon 03:51]
   :PROPERTIES:
   :ID:       F524E251-C79C-4103-8DDC-A651B62A890C
   :CREATED:  [2009-02-15 Sun 21:55]
   :END:
** DONE 'ledger -f doc/sample.dat reg -s -n liab' elides too much
   - State "DONE"       [2009-02-17 Tue 05:29]
   It collapses the account down to "<Total>", even though there was only one
   account!
   :PROPERTIES:
   :ID:       82763D86-E75E-4731-86A0-FB318E9B5F9B
   :CREATED:  [2009-02-16 Mon 21:55]
   :END:
** DONE 'q' in ledger-report should bury the report buffer
   - State "DONE"       [2009-02-21 Sat 19:40]
   :PROPERTIES:
   :ID:       084BCE44-1D07-4353-8719-4C46C7F45273
   :CREATED:  [2009-02-21 Sat 18:09]
   :END:
** DONE --begin and --end not working correctly
   - State "DONE"       [2009-02-17 Tue 22:49]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   136
   :ID:       C0F9D986-4A39-49D3-9799-E6CFCF76E49A
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE --prices-db not performing tilde expansion in .ledgerrc
   - State "DONE"       [2009-02-18 Wed 20:54]
   It seems that the --priced-db option in .ledgerrc does not perform tilde
   expansion on the filename specified, and so does not update the prices
   database file.

   For example, if my .ledgerrc file reads
   :DATA:
   --file ~/docs/ledger/ledger.dat
   --price-db ~/docs/ledger/prices.dat
   :END:
   and I issue the command
   :SCRIPT:
   ledger -QV bal .
   :END:
   then I notice that my prices.dat file is not updated.

   However, if I specify an absolute path in .ledgerrc:
   :DATA:
   --file ~/docs/ledger/ledger.dat
   --price-db /Users/mcarter/docs/ledger/prices.dat
   :END:
   and issue the command, then prices.dat is properly updated.
   :PROPERTIES:
   :Submitter: Mark Carter <alt.mcarter@googlemail.com>
   :Version:  2.6.1
   :URL:      message://a4942fb2-a459-4ba7-b6b9-0331baa42878@o40g2000prn.googlegroups.com
   :ID:       70E63F8E-8561-41F9-A1F1-48AB75A435AA
   :CREATED:  [2008-12-08 Mon 23:59]
   :END:
** DONE --set-reported-account should just be --account
   - State "DONE"       from "TODO"       [2009-11-06 Fri 02:18]
   :PROPERTIES:
   :ID:       F35973AD-80AB-4B7A-9111-4A9480C73DFB
   :CREATED:  [2009-11-04 Wed 16:06]
   :END:
** DONE --sort d not working with -p
   - State "DONE"       from "TODO"       [2010-05-23 Sun 01:11]
   :PROPERTIES:
   :ID:       3AAB00ED-9904-4380-8988-16506B0AFE08
   :Message:  [[message://20100322090611.GV1914@jirafa.cyrius.com][--sort d not working with -p]]
   :CREATED:  [2010-03-26 Fri 22:23]
   :END:
** DONE --verify --verbose is showing object memory still in use
   - State "DONE"       [2009-02-08 Sun 16:04]
   :PROPERTIES:
   :ID:       B3051A24-F835-4B2A-A601-501BC0FD69B8
   :CREATED:  [2009-01-31 Sat 06:18]
   :END:
** DONE -M is doubling the running totals
   - State "DONE"       [2009-02-15 Sun 15:40]
   :PROPERTIES:
   :ID:       3378AF83-AC53-49DF-9FB3-8254E4D6FC5B
   :CREATED:  [2009-02-15 Sun 05:07]
   :END:
** DONE -p 2004/01 should strictly be an alias for -b 2004/01/01 -e 2004/01/31
   - State "DONE"       [2009-02-18 Wed 01:00]
   :PROPERTIES:
   :ID:       7AC5356B-04BF-4D05-BD39-0826D616D840
   :CREATED:  [2009-02-17 Tue 22:48]
   :END:
** DONE 2.x value expression syntax must be restored
   - State "DONE"       [2008-08-04 Mon]
   The only way this is going to really be possible is with a battery of unit tests.
   :PROPERTIES:
   :ID:       AEB2D4B6-6968-44A6-A3F5-63A42CEDF254
   :CREATED:  [2008-07-27 Sun]
   :END:
** DONE [[bug:157][#157]] Make sure this is legal: = expr 'account =~ /foo/'
   - State "DONE"       from "STARTED"    [2010-06-01 Tue 17:31]
   :LOGBOOK:
   CLOCK: [2010-06-01 Tue 17:16]--[2010-06-01 Tue 17:31] =>  0:15
   :END:
   :PROPERTIES:
   :ID:       9DF85DF2-4BF5-4931-A30C-2592A10BB5C0
   :CREATED:  [2010-05-24 Mon 23:00]
   :END:
** DONE [[bug:158][#158]] "ledger template exxons 10 from checking" applies 10 to "from"
   - State "DONE"       from "STARTED"    [2010-06-10 Thu 11:33]
   :LOGBOOK:
   CLOCK: [2010-06-10 Thu 10:03]--[2010-06-10 Thu 11:33] =>  1:30
   :END:
   It should apply to the "to" account.
   :PROPERTIES:
   :ID:       A9DFC672-9FAD-431F-8EDA-CFB54D1285AF
   :CREATED:  [2010-03-10 Wed 01:32]
   :END:
** DONE [[bug:161][#161]] ledger budget fails with "Something odd has happened"
   - State "DONE"       from "TODO"       [2010-06-10 Thu 08:07]
   :PROPERTIES:
   :ID:       F145D482-2F15-48D0-A0CC-6593AC1896DD
   :CREATED:  [2010-05-22 Sat 19:15]
   :END:
** DONE [[bug:165][#165]] --exchange seems to be ignored when combined with -M                        :ATTACH:
   - State "DONE"       from "TODO"       [2010-06-09 Wed 05:09]
   #+begin_src sh
   ledger  --exchange € reg ^dépenses|grep "\\$" |wc -l
   #+end_src
   :OUTPUT:
   0
   :END:

   #+begin_src sh
   ledger  --exchange € -M reg ^dépenses|grep "\\$" |wc -l
   #+end_src
   :OUTPUT:
   14
   :END:
   :PROPERTIES:
   :ID:       03377560-850B-4258-B9A3-CE9BE7DAA70C
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :Attachments: ledger.txt.gpg
   :CREATED:  [2010-01-18 Mon 03:42]
   :END:
** DONE [[bug:167][#167]] Another rounding issue                                                      :ATTACH:
   - State "DONE"       from "STARTED"    [2010-06-02 Wed 06:25] \\
     Fixed by cbc0a125.
   :LOGBOOK:
   CLOCK: [2010-06-02 Wed 01:52]--[2010-06-02 Wed 06:24] =>  4:32
   :END:
   When playing with ledger v3, I met those rounding issues.  Here is an
   extract with all transactions having rounding issues I provide them for
   unit test (if useful).
   :PROPERTIES:
   :ID:       1D275740-D1A6-42B7-BDE4-F2F85E30CE8E
   :Message:  [[message://541a7592-f815-4625-bd42-e1efa3b49b30@j5g2000yqm.googlegroups.com][Re: Another rounding issue]]
   :Attachments: data.dat
   :Submitter: thierry <thierry.daucourt@free.fr>
   :CREATED:  [2010-01-09 Sat 21:09]
   :END:
** DONE [[bug:196][#196]] Bug when not using commodities in a posting's cost
   - State "DONE"       from "TODO"       [2010-06-10 Thu 12:54]
   - Note taken on [2010-06-09 Wed 05:15] \\
     A priced commodity does NOT imply a cost, but the following syntax should
     be accepted:
     #+begin_src ledger
       Assets    1 apple @ =0.10
     #+end_src
   For example:
   #+begin_src ledger
   2009/11/01 Sample
       Assets                1 apple {=0.10}
       Equity
   #+end_src
   :PROPERTIES:
   :ID:       F29DE89C-73CD-4344-B6F7-BB7584AA6FFD
   :CREATED:  [2009-11-24 Tue 01:11]
   :END:
** DONE [[bug:197][#197]] Bug with -J and multiple commodities                                        :ATTACH:
   - State "DONE"       from "TODO"       [2010-06-09 Wed 02:51] \\
     Fixed by fc09b69f.
   - Note taken on [2010-06-02 Wed 16:53] \\
     Fixing this should also fix 198.
   #+begin_src sh
   ledger  --exchange € -M -J reg ^dépenses
   #+end_src
   :OUTPUT:
   While evaluating value expression:
   quantity(scrub(display_total))
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   Error: Cannot convert a balance with multiple commodities to an amount
   2009-11-01 168.71
   2009-11-01 256.81
   2009-11-01 275.56
   2009-11-01 326.46
   :END:
   I know this is intended behaviour, -J is not supposed to work with multiple
   commodities.  But --exchange should be able to make it work IMHO -- and it
   does it quite well without the -M flag.

   I think this might be related to some bugs reported recently in the
   mailing-list (it mentionned -J and multiple commodities too).
   :PROPERTIES:
   :ID:       68EAF363-D0FE-4127-866E-A5AEBACB65D6
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :Attachments: ledger.txt.gpg
   :CREATED:  [2010-01-18 Mon 03:44]
   :END:
** DONE [[bug:198][#198]] Errors with using the -J option
   - State "DONE"       from "TODO"       [2010-06-09 Wed 03:12] \\
     This is now fixed, but you'll have to run:
     #+begin_src sh
     ledger -X F -J reg Assets
     #+end_src
     in order to ensure that everything is rendered in the same commodity.

     Fixed by fc09b69f.
   With ledger v3, I have the following error when using -J option (while ok
    with ledger v2).  I inlined comment below starting with '#' character.

   #+begin_src sh
    D 1000,00 €

    1994/1/1 Company
     Assets:Checking  10000 F
     Income:Salary

    1998/1/1 Transfer
     Assets:US account  200 $
     Assets:Checking  -1000 F

    P 1998/12/31 $ 6 F

    1999/1/1 Books
     Expenses:Books  200 $
     Assets:US account

    P 2002/1/1 F 0,15244901723741037903399155737342539221320909754755 €

    2002/1/1 Company
     Assets:Checking  2000 €
     Income:Salary
   #+end_src

    :OUTPUT:
    $ ledger3 -f test3.ledger -J reg Assets
    While evaluating value expression:
     quantity(scrub(display_total))
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    Error: Cannot convert a balance with multiple commodities to an amount
    1994-01-01 10000
    $ ledger3 -f test3.ledger -V -J reg Assets
    While evaluating value expression:
     quantity(scrub(display_total))
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    Error: Cannot convert a balance with multiple commodities to an amount
    1994-01-01 10000
    1998-01-01 11000
    1998-01-01 10000
    1999-01-01 10200
    1999-01-01 9000
    :END:

    Above, I get error with ledger v3.  Below, output from ledger 2.6.2:
    :OUTPUT:
    $ ledger -f test3.ledger -J reg Assets
    1994/01/01 10000
    1998/01/01 10200
    1998/01/01 9200
    1999/01/01 9000
    2002/01/01 11000
    $ ledger -f test3.ledger -V -J reg Assets
    1994/01/01 10000
    1998/01/01 11000
    1998/01/01 10000
    1999/01/01 9000
    2002/01/01 3372.04
    :END:

    I do not know it this is the expected result for "ledger -J reg
    Assets", but acutally amount are added whatever the currency : 9000 F
    + 2000 € becomes 11000.
   :PROPERTIES:
   :ID:       7C44010B-BB26-4E5C-8800-EB2C11891C9D
   :Message:  [[message://916c6e83-4da6-4b7a-a035-d146908beabc@a15g2000yqm.googlegroups.com][-J option]]
   :Submitter: thierry <thierry.daucourt@free.fr>
   :CREATED:  [2010-01-09 Sat 21:05]
   :END:
** DONE [[bug:199][#199]] Issue with reporting asset history and -j/-J
   - State "DONE"       from "TODO"       [2010-05-30 Sun 22:00] \\
     Fixed by commits 5a2644c1b7220dc96e4de9cfb82f6d829cf34321 and
     654c842348c570a086f31cb79b7b3b4810463707.
   - Note taken on [2010-05-30 Sun 17:02] \\
     Fixing this will actually require a change in the way that -V/-X work.  I
     think it's a reasonable change, however, so I will start working on it.
   - Note taken on [2010-05-28 Fri 00:56] \\
     Thierry: I extracted the relevant transactions and commodity history in one
     ledger file (already provided in first post, here it is again) What I expect
     is that gnuplot do a plot of all historic value of the commodity.

     #+begin_src sh
     1994/01/01 Achat Rialto
            Actif:Fixe:Rialto       2 Rialto
            Actif:BNP              -120000 €
            Actif:BNP               120000 €
            Revenu:Salaire         -120000 €

     P 1995/01/01 Rialto 70000 €
     P 1996/01/01 Rialto 90000 €
     P 1997/01/01 Rialto 90000 €
     P 1998/01/01 Rialto 105000 €
     P 1999/01/01 Rialto 110000 €
     P 2000/01/01 Rialto 120000 €
     P 2001/01/01 Rialto 130000 €
     P 2002/01/01 Rialto 140000 €
     P 2003/01/01 Rialto 150000 €
     P 2004/01/01 Rialto 160000 €
     P 2005/01/01 Rialto 170000 €
     P 2006/01/01 Rialto 180000 €
     P 2007/01/01 Rialto 190000 €
     P 2008/01/01 Rialto 200000 €
     P 2009/01/01 Rialto 210000 €
     P 2010/01/01 Rialto 211000 €
     #+end_src
   - Note taken on [2010-05-28 Fri 00:56] \\
     Thierry: I did try with ldeger v2 and ledger v3, but I am unable to get one
     value by month.  Any help appreciated.

     :OUTPUT:
     $ ledger -f test2.ledger -j -M -V reg ^Actif
     1994/01/01 120000
     2010/01/02 302000
     $ ledger3 -f test2.ledger -j -M -V reg ^Actif
     1994-01-01 120000
     2010-01-02 302000
     :END:
   - Note taken on [2010-05-28 Fri 00:56] \\
     I believe you may need -j, not -J (which is for balance reports).
   I am trying to use the command report (for plotting with gnuplot) with
    the below ledger file.  What I expect is one value for each month.
    I do not understand why the "-M" option do not output one value per
    month.  How can I reach my goal?

    :OUTPUT:
    $ ledger -f test2.ledger -J -M -V reg ^Actif
    1994/01/01 120000
    2010/01/01 422000
    :END:
   #+begin_src sh
    1994/01/01 Achat Rialto
        Actif:Fixe:Rialto       2 Rialto
           Actif:BNP              -120000 €
        Actif:BNP               120000 €
        Revenu:Salaire         -120000 €

    P 1995/01/01 Rialto 70000 €
    P 1996/01/01 Rialto 90000 €
    P 1997/01/01 Rialto 90000 €
    P 1998/01/01 Rialto 105000 €
    P 1999/01/01 Rialto 110000 €
    P 2000/01/01 Rialto 120000 €
    P 2001/01/01 Rialto 130000 €
    P 2002/01/01 Rialto 140000 €
    P 2003/01/01 Rialto 150000 €
    P 2004/01/01 Rialto 160000 €
    P 2005/01/01 Rialto 170000 €
    P 2006/01/01 Rialto 180000 €
    P 2007/01/01 Rialto 190000 €
    P 2008/01/01 Rialto 200000 €
    P 2009/01/01 Rialto 210000 €
    P 2010/01/01 Rialto 211000 €
   #+end_src
   :PROPERTIES:
   :ID:       9EB10714-36E9-4AA0-A8FB-E9CECA92F5A3
   :Message:  [[message://dff1fb891001011724i8f750a7wf3df7f2aa69d7cd6@mail.gmail.com][Re: reporting assets history]]
   :Submitter: Thierry Daucourt <thierry.daucourt@free.fr>
   :CREATED:  [2010-01-09 Sat 21:08]
   :END:
** DONE [[bug:200][#200]] Commodities containing digits and ledger bal
   - State "DONE"       from "TODO"       [2010-06-09 Wed 06:45] \\
     Fixed by 8637dd6c.
   - Note taken on [2010-06-03 Thu 06:02] \\
     You could simply drop the quotes if the commodity doesn't contain any
     spaces.
   - Note taken on [2010-06-02 Wed 18:12] \\
     What if you have a Commodity named "FOO 100", which is perfectly legal.
     And then the register or balance report prints out "200 FOO 100".  What
     then?
   - Note taken on [2010-06-02 Wed 18:12] \\
     Martin: Why do we need an extra option for this?  Is there a reason this
     cannot be done by default?

     In any case, I'm not sure it makes sense to add an option just for this
     minor thing.  If it cannot be done by default without an option, I guess
     you could just close this bug as WONTFIX.
   - Note taken on [2010-06-02 Wed 16:54] \\
     I will add an option called --no-quotes.
   When you have a commodity that contains digits, you have to put it on
    quotation marks, as in;
   #+begin_src sh
    2010-04-02 Test
      Assets:Broker                 10 "DE0002635307" @ 10
      Assets:Bank
   #+end_src

    ledger bal will also put this commodity in quotation marks.  Is this
    necessary?  IMHO it would be nicer if "ledger bal" would strip the
    quotation mark.
   :PROPERTIES:
   :ID:       F82CF11F-BFD9-4512-A562-202B04B68051
   :Message:  [[message://20100402164513.GA10540@jirafa.cyrius.com][Commodities containing digits and ledger bal]]
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :CREATED:  [2010-04-04 Sun 15:18]
   :END:
** DONE [[bug:210][#210]] Problems with tags that contain spaces
   - State "DONE"       from "STARTED"    [2010-06-01 Tue 18:33] \\
     Fixed by 5cdd36f3.
   :LOGBOOK:
   CLOCK: [2010-06-01 Tue 18:14]--[2010-06-01 Tue 18:33] =>  0:19
   :END:
   I have a problem with tags that contain spaces, i.e. something like
   #+begin_src ledger
   ; foo: this description
   #+end_src
   I try to search for transacation with this tag:
   #+begin_src sh
   ledger -f a.dat reg tag "foo=this t"
   #+end_src
   which works fine with file a.dat.  But with b.dat, *all* transacations
   match, even though the only difference between a.dat and b.dat is an
   account name (there's no difference in terms of tags).

   #+begin_src ledger
   2010-04-02 Test1
      A        10.00 USD
      B

   2010-04-03 Test2
      ; foo: this description
      A        20.00 USD
      B
   #+end_src

   #+begin_src ledger
   2010-04-02 Test1
      A        10.00 USD
      Assets:Test

   2010-04-03 Test2
      ; foo: this description
      A        20.00 USD
      B
   #+end_src
   :PROPERTIES:
   :ID:       D4C2DD6F-8967-4FFC-BBBC-A941F9C53475
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :Message:  [[message://20100529155642.GA9067@jirafa.cyrius.com][Problems with tags that contain spaces]]
   :CREATED:  [2010-05-30 Sun 03:33]
   :END:
** DONE [[bug:211][#211]] The --european option not really European
   - State "DONE"       from "TODO"       [2010-06-01 Tue 18:06] \\
     Fixed by 038c2435.
   :PROPERTIES:
   :ID:       1736ACA5-5DE6-4826-AEB4-DB5B2A2217AC
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :Message:  [[message://20100531102647.GA23953@jirafa.cyrius.com][--european option not really European]]
   :CREATED:  [2010-05-31 Mon 14:32]
   :END:
** DONE [[bug:224][#224]] A large number of GenerateTests are failing                                 :ATTACH:
   - State "DONE"       from "TODO"       [2010-06-10 Thu 14:26]
   When running GenerateTests from 1 to 10001, 954 of the tests fail --
   although many of them for the same apparent reason.  These different types
   stand out:
   :OUTPUT:
   Print for seed 119 failed:
   While parsing file "/dev/stdin", line 478:
   Error: A posting's cost must be of a different commodity than its amount
   :END:
   :OUTPUT:
   Print for seed 403 failed:
   While parsing file "/dev/stdin", line 214:
   While balancing transaction from standard input:
   Unbalanced remainder is:
                  tGlk1
   Amount to balance against:
   tGlk6263354594.500000185668
   Error: Transaction does not balance
   :END:
   :OUTPUT:
   Generation for seed 1781 failed:
   While parsing file "/dev/stdin", line 2:
   While parsing posting:
     (h25302bHHk12f58TgrH:a2 o 69xNMo0)  612331KF @ Fjg1e+06
                                                    ^^^^^^^^
   Error: Unexpected char 'e' (Note: inline math requires parentheses)
   :END:
   :OUTPUT:
   Generation for seed 1809 failed:
   While parsing file "/dev/stdin", line 5:
   While balancing transaction from standard input:
   Unbalanced remainder is:
        -429003805324 I
   Amount to balance against:
                      0
   Error: Transaction does not balance
   :END:
   :OUTPUT:
   Generation for seed 1942 failed:
   While parsing file "/dev/stdin", line 10:
   While parsing posting:
     (mc48XU1x:96dQzRe)  -1e+06 SLKn
                         ^^^^^^^^^^^
   Error: Unexpected char '+' (Note: inline math requires parentheses)
   :END:
   :PROPERTIES:
   :ID:       D5762158-1B83-408F-954B-81A81A3F412E
   :Attachments: generate.out.7z
   :CREATED:  [2010-06-02 Wed 17:23]
   :END:
** DONE [[bug:227][#227]] Make --anon anonymize commodities as well
   - State "DONE"       from "TODO"       [2010-06-09 Wed 07:48] \\
     Fixed by c28fad38.
   :PROPERTIES:
   :ID:       1C90D8AF-830E-43C2-A5B7-D382F68EBDE3
   :CREATED:  [2010-06-04 Fri 02:10]
   :END:
** DONE [[bug:327][#327]] Insert --input-date-format strings at the beginning of format list
   SCHEDULED: <2010-06-12 Sat>
   - State "DONE"       from "STARTED"    [2010-06-13 Sun 03:58]
   This is instead of accepting only that format, so that users can specify
   multiple alternates.
   :PROPERTIES:
   :ID:       A90F9C15-AB38-43FA-AA1B-8A1923A831C5
   :Submitter: ed <ed.temp.01@gmail.com>
   :Message:  [[message://1d1ff6f1-3445-4d4b-9ef0-dfd510405e47@u26g2000yqu.googlegroups.com][Re: Init file doesn't support file --input-date-format]]
   :CREATED:  [2010-06-11 Fri 17:23]
   :END:
** DONE [[bug:330][#330]] libledger_math.so: undefined reference to `vtable for ledger::expr_t'
   SCHEDULED: <2010-06-12 Sat>
   - State "DONE"       from "STARTED"    [2010-06-13 Sun 03:58]
   This error occurs on the CentOS 'make distcheck' build.
   :PROPERTIES:
   :ID:       BDDAF0E5-F875-4347-A04F-3AAC211CE0FF
   :CREATED:  [2010-06-12 Sat 15:59]
   :END:
** DONE [[bug:335][#335]] Restore value expression functions min and max
   SCHEDULED: <2010-06-13 Sun>
   - State "DONE"       from "TODO"       [2010-06-14 Mon 00:01]
   :PROPERTIES:
   :ID:       CE2468C0-EF95-4351-95FE-2B497FF2E2A2
   :CREATED:  [2010-06-13 Sun 18:53]
   :END:
** DONE [[bug:336][#336]] ledger period 'this month' is only showing the current day
   SCHEDULED: <2010-06-13 Sun>
   - State "DONE"       from "TODO"       [2010-06-13 Sun 23:09]
   :PROPERTIES:
   :ID:       AA29DD59-C29E-4A56-A725-65A83AC8D1C5
   :CREATED:  [2010-06-13 Sun 22:51]
   :END:
** DONE [[bug:342][#342]] Budgeting should include transactions for interstitial months
   - State "DONE"       from "TODO"       [2010-06-19 Sat 16:17]
   Given this data:
   #+begin_src ledger
   ;Monthly Budget
   ~ Monthly since 2010/01/01
       Expenses:Bills:Rent                 $873.00
       Income:Salary                       -$3491.60
       Assets:Bank:OSU Fed:Checking

   ~ Biweekly from 2010/02/23
       Expenses:Bills:Housecleaning        $85.00
       Assets:Bank:OSU Fed:Checking

   2010/06/02 IP Fabrics payroll
       Assets:Bank:OSU Fed:Checking               $3491.60
       Income:Salary

   2010/06/04 housecleaning check
       Expenses:Bills:Housecleaning    $255.00
       Assets:Bank:OSU Fed:Checking

   2010/06/10 Rent
       Expenses:Bills:Rent                      $873.00
       Assets:Bank:OSU Fed:Checking
   #+end_src

   Now run the command:
   #+begin_src sh
   ledger -E -p "this month" --budget --columns=80 --now=2010/06/16 reg ^exp
   #+end_src

   It will show two budget transactions:
   :OUTPUT:
   10-Jun-01 Budget transaction    Expenses:Bills:Rent        $-873.00     $-873.00
   10-Jun-04 housecleaning check   Exp:Bill:Housecleaning      $255.00     $-618.00
   10-Jun-06 Budget transaction    Exp:Bill:Housecleaning      $-85.00     $-703.00
   10-Jun-10 Rent                  Expenses:Bills:Rent         $873.00      $170.00
   :END:

   But if the rent transaction (last one in the file) is removed, it no
   longer generates any housecleaning budget transactions for that month:
   :OUTPUT:
   10-Jun-01 Budget transaction    Expenses:Bills:Rent        $-873.00     $-873.00
   10-Jun-04 housecleaning check   Exp:Bill:Housecleaning      $255.00     $-618.00
   :END:

   It should be generating the budget entries at the end, even though
   there is no final transaction to "kick" the budget filter.
   :PROPERTIES:
   :ID:       8AFF04B8-DAC0-4768-AD1D-ABA1F3C3E4F8
   :CREATED:  [2010-06-16 Wed 17:40]
   :END:
** DONE [[bug:350][#350]] --gain shows wrong resuls
   - Note taken on [2010-06-20 Sun 17:48] \\
     Another possibility is that name-merging unless fixated and non-fixated
     versions both exist, in which case name merging is only done for the
     non-fixated, and all of the fixated will have their prices reported as if
     --lot-prices had been specified just for them.
   - State "DONE"       from "TODO"       [2010-06-20 Sun 17:20]
   I've fixed the problem as you presented it, but there is more going on
   here.  Most importantly, commodities with fixated prices are logically
   distinct from those without.  Here's what happens:

   On 2008-01-01, you buy 5 shares of GBP at a unit-price of 1.4 EUR.
   Internally, this commodity is named GBP {1.4 EUR}.  If ever the share price
   of GBP changes, the offset from 1.4 EUR will represent a gain or loss.

   On 2009-01-01, you "sold" 5 shares of GBP {=1.4 EUR} for 7.50 EUR, making
   0.50 EUR in the process.  Ledger does not ask whether you owned these
   shares before selling them, as double-entry accounting does not require
   this foreknowledge.  My bug fix today was to make sure that a sale of a
   fixated commodity does not record a market price for other commodities of
   the same basename.

   If, later, the value of GBP should change, there will still be a gain
   reflected, as you have not yet sold the 5 shares of GBP {1.4 EUR}.  Again,
   GBP {=1.4 EUR} != GBP {1.4 EUR}.  You may have converted 5 shares of GBP
   {=1.4 EUR}, but in Ledger's eyes, internally, you still own 5 shares of GBP
   {1.4 EUR}.  If GBP should ever get revalued, this will show up as a
   gain/loss in the --gain report.

   What makes all of this confusing is that by default, Ledger 'collapses'
   commodities which are related by name as if they were the same commodity.
   This is a convenience, since until now no one has ever thought to mix
   fixated and non-fixated versions of the same commodity.  Thus, Ledger
   *reports* GBP {1.4 EUR} and GBP {=1.4 EUR} as if they were both GBP, but
   for calculating the --gain report, it will reckon them as separate.

   This all becomes much clearer if you use "reg --lot-prices", to stop Ledger
   from merging like-named commodities.

   I'm not sure there is an answer here, other than forcing fixated commodities
   to always display with their fixated price -- though I'm not sure most people
   would want that.  The only other answer is to not mix them, or to think very
   hard in the case where you do and still want meaning from --gain.
   :PROPERTIES:
   :ID:       C0212EAC-CCE6-41F6-BCFD-543A257B4B74
   :CREATED:  [2010-06-20 Sun 14:51]
   :END:
** DONE [[bug:352][#352]] Account abbreviation puts too much emphasis on top-level account
   - State "DONE"       from "TODO"       [2010-06-21 Mon 18:05]
   :PROPERTIES:
   :ID:       87C4A85D-237E-410F-B824-FE4C42F62011
   :CREATED:  [2010-06-20 Sun 14:51]
   :END:
** DONE [[bug:354][#354]] Forecasting bug with terminating periodic entries
   - State "DONE"       from "TODO"       [2010-06-20 Sun 17:08]
   #+begin_src ledger
   ~ Monthly since 2010/01/01
       Expenses:Bills:Rent                 $873.00
       Expenses:Household                  $200.00
       Income:Salary                       -$2491.60
       Assets:Bank:Checking

   ~ biweekly from 2010/02/23
       Expenses:Bills:Housecleaning        $85.00
       Assets:Bank:Checking

   2010/06/22 c897683b
       ad738623:d317da42:0e30a690              A2079.00
       208b135f:c84cc2a7:a336b63a               A199.00
       45435ee9:2d8ee712:ee7e46b1:0f0e7e54:f5dbec59
   #+end_src
   #+begin_src sh
   ledger reg bank --forecast "d<=[next year]" -d "d>=[this month] & d<=[next year]" --sort d --now=2010/06/20
   #+end_src
   :OUTPUT:
   Assertion failed: (this->is_initialized()), function get, file /opt/local/include/boost/optional/optional.hpp, line 578.
   Abort trap
   :END:
   :PROPERTIES:
   :ID:       620F0674-B74F-452C-8F36-66F8425CA4BD
   :CREATED:  [2010-06-20 Sun 17:04]
   :END:
** DONE [[bug:355][#355]] Problem with forecasting not showing biweekly transactions
   - State "DONE"       from "TODO"       [2010-06-21 Mon 17:16]
   :PROPERTIES:
   :ID:       D2829FC4-D319-4FB9-8A24-B8FFCF5F4E61
   :CREATED:  [2010-06-20 Sun 20:17]
   :END:
** DONE [[bug:359][#359]] Balance command now shows empty accounts
   - State "DONE"       from "TODO"       [2010-06-21 Mon 18:30]
   :PROPERTIES:
   :ID:       56BBE69B-604C-4379-A39D-8B412A8921CC
   :CREATED:  [2010-06-21 Mon 18:18]
   :END:
** DONE [[bug:360][#360]] 'today' isn't today
   - State "DONE"       from "TODO"       [2010-06-22 Tue 17:15]
   :PROPERTIES:
   :ID:       2FEAF015-B5C2-4CFC-96E8-46E70CA2B990
   :CREATED:  [2010-06-22 Tue 17:15]
   :END:
** DONE [[bug:386][#386]] print command should never strip quotation marks from commodity
   - State "DONE"       from "STARTED"    [2010-07-29 Thu 04:12]
   :LOGBOOK:
   CLOCK: [2010-07-29 Thu 03:19]--[2010-07-29 Thu 04:12] =>  0:53
   :END:
   :PROPERTIES:
   :ID:       A28CF697-0E5B-49E9-AA38-606BDA234D46
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :Message:  [[message://bug-386-1@http.newartisans.com/bugzilla/][{Bug 386} New: strips quotation marks from commodity when it's required]]
   :CREATED:  [2010-07-25 Sun 16:25]
   :END:
** DONE Abstract a function to verify a transaction double-entry status
   - State "DONE"       from "TODO"       [2009-11-11 Wed 20:43]
   :PROPERTIES:
   :ID:       F9185DA2-634C-4B74-8F3B-EAAA21E6BB26
   :CREATED:  [2009-11-11 Wed 05:15]
   :END:
** DONE acprep upload is deleting the file after it uploads it
   - State "DONE"       from "TODO"       [2009-03-31 Tue 16:24]
   :PROPERTIES:
   :ID:       E4EFE47F-2014-4AEF-A515-CBB3B5186C38
   :ARCHIVE_TIME: 2009-04-12 Sun 20:34
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-03-31 Tue 06:27]
   :END:
** DONE Add a "show" report query term
   - State "DONE"       [2009-03-02 Mon 22:44]
   So that a person can say: ledger bal exp show expenses\$
   :PROPERTIES:
   :ID:       42637863-3BFE-43BB-8246-0F14C365B11D
   :CREATED:  [2009-03-02 Mon 16:52]
   :END:
** DONE Add a 'locus' member to call_scope_t, for error reporting
   SCHEDULED: <2010-06-13 Sun>
   - State "DONE"       from "TODO"       [2010-06-13 Sun 18:41]
   :PROPERTIES:
   :ID:       C7F08DC9-934E-46CD-8B22-33E8A3C69E5B
   :CREATED:  [2010-06-13 Sun 06:04]
   :END:
** DONE Add error handling to value expression parser/evaluator
   - State "DONE"       [2009-01-23 Fri 01:58]
   :PROPERTIES:
   :ID:       FAF5D00C-7D45-40F3-8410-786273EA2F6E
   :ARCHIVE_TIME: 2009-02-01 Sun 15:50
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2009-01-21 Wed 15:41]
   :END:
** DONE Add full support for expression and metadata to the query expr
   - State "DONE"       [2009-02-01 Sun 22:11]
   - State "STARTED"    [2009-02-01 Sun 18:40]
   For example:
   :SCRIPT:
   ledger reg food @jumby %where=Grenada %work '= a > 100' &note_text
   :END:
   :PROPERTIES:
   :ID:       3F363529-B7C8-4624-BE10-8FDB5401A162
   :CREATED:  [2009-02-01 Sun 15:40]
   :END:
** DONE After applying automated transactions, verify the xact's balance
   - State "DONE"       from "TODO"       [2009-11-11 Wed 20:43]
   :PROPERTIES:
   :ID:       3F07C9B0-B14E-4C59-A919-0D50A1DE85E2
   :CREATED:  [2009-11-11 Wed 05:15]
   :END:
** DONE Allow --exchange to take a comma-separated list of commodities
   - State "DONE"       [2009-02-22 Sun 16:12]
   :PROPERTIES:
   :ID:       924DA74D-7D4F-4412-AE2A-251DC139D86A
   :CREATED:  [2009-02-22 Sun 04:33]
   :END:
** DONE Allow for sorting by multiple criteria, like -S date,payee
   - State "DONE"       [2009-02-15 Sun 23:17]
   :PROPERTIES:
   :ID:       AFAFB804-E156-4D94-B897-3AB4A9E611CB
   :CREATED:  [2009-02-12 Thu 04:54]
   :END:
** DONE Amount reduction is not working
   - State "DONE"       [2009-02-21 Sat 01:39]
   :PROPERTIES:
   :ID:       363C38F0-FDE6-461C-8114-9B172F4B8115
   :CREATED:  [2009-02-20 Fri 13:17]
   :END:
** DONE An error message is printing incorrectly from Ledger
   - State "DONE"       [2009-02-19 Thu 13:09]
   :OUTPUT:
   While calculating posting from "doc/sample.dat", line 11:
   >     Assets:Bank:Checking        $1,000.00
   :END:
   This should say something about displaying posting.
   :PROPERTIES:
   :ID:       F769BA6B-EE23-4E1F-A318-C3E51848104D
   :CREATED:  [2009-02-19 Thu 01:12]
   :END:
** DONE Another balance reporting bug, where the ordering is wrong                       :ATTACH:
   - State "DONE"       from "TODO"       [2010-01-21 Thu 04:55]
   :PROPERTIES:
   :ID:       8026905D-42B6-40EE-AEBF-24ED0CC5DC53
   :Attachments: bug2.dat
   :CREATED:  [2009-11-24 Tue 03:08]
   :END:
** DONE Assertion failure using print --raw                                              :ATTACH:
   - State "DONE"       from "TODO"       [2010-03-17 Wed 00:51]
   #+begin_src sh
   ledger --exchange € print --raw
   #+end_src
   :OUTPUT:
   /usr/include/boost/optional/optional.hpp:587: typename boost::optional_detail::optional_base<T>::pointer_const_type boost::optional<T>::operator->() const [with T = ledger::position_t]:
   Assertion `this->is_initialized()' failed.
   core dumped
   :END:
   :PROPERTIES:
   :ID:       F1D4CC8F-8C3A-4075-9D38-75BDF1E0E9C5
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :Attachments: ledger.txt.gpg
   :CREATED:  [2010-01-18 Mon 02:59]
   :END:
** DONE At the moment it seems that .ledgerrc is required
   - State "DONE"       [2009-02-08 Sun 16:04]
   :PROPERTIES:
   :ID:       F13F5E8A-B40D-4ABA-9E2C-25DF45F4F6CF
   :CREATED:  [2008-08-31 Sun]
   :END:
** DONE Attempting to make a negative cost posting fails
   - State "DONE"       [2009-02-19 Thu 15:13]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   68
   :ID:       0C13AABF-F0CC-40ED-BC20-D322AF1DD784
   :END:
** DONE Balance command gets the sorting wrong
   - State "DONE"       [2009-02-19 Thu 22:28]
   The command is:
   :SCRIPT:
   ledger -S -t -s bal wedding
   :END:
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   29
   :ID:       D913FCEE-88FF-41D1-98AB-2561382C7933
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE Balance report was missing the parent account
   - State "DONE"       [2009-03-16 Mon 04:06]
   :PROPERTIES:
   :ID:       461980A1-86DE-4C76-9CB1-1480B5606624
   :CREATED:  [2009-03-15 Sun 22:32]
   :END:
** DONE Balance report wasn't reporting a final total
   - State "DONE"       [2009-03-16 Mon 04:06]
   :PROPERTIES:
   :ID:       E9F130C5-33AA-4841-B238-1148506B3DDF
   :CREATED:  [2009-03-15 Sun 22:32]
   :END:
** DONE Break up interval_t and move range_t into value_t
   - State "DONE"       [2009-03-16 Mon 04:56]
   - State "STARTED"    [2009-03-10 Tue 23:14]
   :PROPERTIES:
   :ID:       FFD34FF1-66E2-4209-93A7-A6C09073B02A
   :CREATED:  [2009-03-10 Tue 19:40]
   :END:
** DONE Bug with --real and virtual transactions
   - State "DONE"       from "TODO"       [2010-05-22 Sat 21:07]
   - Note taken on [2010-03-04 Thu 13:58] \\
     [[message://633d7019-cf97-4855-88b4-6a3b8e592c26@t41g2000yqt.googlegroups.com][Re: virtual transactions]]: I found a way to be able to display virtual
     transactions.  By removing the '^' before "Revenu".
   :PROPERTIES:
   :ID:       F2832452-4521-49A3-B854-F4E12CC4D82E
   :Message:  [[message://ffcf3974-a9d7-4ebf-a0da-7fc61fc00d3f@q16g2000yqq.googlegroups.com][virtual transactions]]
   :CREATED:  [2010-03-04 Thu 13:57]
   :END:
** DONE Cannot stop the file parser by pressing Control-C
   - State "DONE"       [2009-02-16 Mon 04:16]
   :PROPERTIES:
   :ID:       51159E59-18E6-46D8-BBF6-60EFA98BFC6E
   :CREATED:  [2009-02-10 Tue 22:29]
   :END:
** DONE Catch Control-C within the Ledger REPL
   - State "DONE"       [2009-02-04 Wed 21:01]
   :PROPERTIES:
   :ID:       E755A238-65AE-485F-84C0-2D9DA8AFA8A1
   :CREATED:  [2009-02-04 Wed 19:58]
   :END:
** DONE Change op.calc debug class to expr.calc
   - State "DONE"       [2009-02-15 Sun 15:40]
   :PROPERTIES:
   :ID:       E62413C7-8ADD-4221-B397-83AF6086E515
   :CREATED:  [2009-02-15 Sun 05:05]
   :END:
** DONE Change streaming to std::cerr to use WARN
   - State "DONE"       [2009-02-26 Thu 04:53]
   :PROPERTIES:
   :ID:       142B89D4-7741-4951-A636-707273C1FE3D
   :CREATED:  [2009-02-25 Wed 01:32]
   :END:
** DONE Change strip() function to more general scrub()
   - State "DONE"       [2009-02-21 Sat 19:17]
   :PROPERTIES:
   :ID:       F10BB0FD-86C6-4B61-A2BA-473820F27BD6
   :CREATED:  [2009-02-21 Sat 12:30]
   :END:
** DONE Change the prices report again
   - State "DONE"       [2009-02-13 Fri 21:08]
   PAYEE   = commodity of history price
   ACCOUNT = commodity
   Report shows only DATE ACCOUNT, where PAYEE exists for searching purposes.
   :PROPERTIES:
   :ID:       D083AAA7-B90B-4A3A-86EB-0C502DABB16C
   :CREATED:  [2009-02-12 Thu 05:13]
   :END:
** DONE Check out skanthak's fix to ledger --reconcile
   - State "DONE"       [2008-11-23 Sun 23:43]
   http://github.com/skanthak/ledger/tree/fix-reconcile
   :PROPERTIES:
   :Submitter: Sebastian Kanthak <skanthak@gmail.com>
   :Version:  2.6.1
   :ID:       FFFE432A-FE8F-4584-B4AB-E111F31174DC
   :CREATED:  [2008-11-20 Thu 19:14]
   :END:
** DONE Clean up the code in main.cc again, move stripwhite to utils.cc
   - State "DONE"       [2009-02-05 Thu 21:55]
   :PROPERTIES:
   :ID:       D98F86D8-1789-4757-BC8D-C2E2A7AFA3C4
   :CREATED:  [2009-02-04 Wed 21:48]
   :END:
** DONE Command does not sort correctly
   - State "DONE"       [2009-02-19 Thu 17:28]
   The command is:
   :SCRIPT:
   ledger -f utils/cases/1032.dat -S t bal
   :END:
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   24
   :ID:       72DA9574-0B30-4140-96EC-D721F73B7888
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE Command fails to read any xacts (timelog support)
   - State "DONE"       [2009-02-19 Thu 17:28]
   :SCRIPT:
   ./ledger -f 2.6.2/tests/cases/1032.dat bal
   :END:
   :PROPERTIES:
   :ID:       48C39B0D-0B6A-4512-B60E-A5A1852B481D
   :CREATED:  [2009-02-16 Mon 14:48]
   :END:
** DONE Command fails to report monthly averages
   - State "DONE"       [2009-02-16 Mon 16:57]
   - State "TODO"       [2008-07-17 Thu 20:43] \\
     The output from this command is not what people would think it is, because it
     divides by total postings, not months.  This is an issue to be addressed
     again in 2.7.
   The command is:
   :SCRIPT:
   ledger -p "this year" -MAs bal ^Expenses
   :END:
   This does not appear to report monthly averages; since it's now april,
   averages should be a third of the unaveraged total.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   22
   :ID:       5EDCE9E9-8610-4D31-950E-3659D1CD9218
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE Command gets reporting periods entirely wrong
   - State "DONE"       [2009-02-16 Mon 03:09]
   :SCRIPT:
   reg -f tools/drewr.dat --effective -n -p 2004/01 \( ^exp ^liab ^assets:sav \) and not %nobudget and not mastercard
   reg -f tools/drewr.dat -p 2004/01 food
   :END:
   :PROPERTIES:
   :ID:       D77C48E5-7584-4CA7-9BBC-B2AAFF120C87
   :CREATED:  [2009-02-15 Sun 23:31]
   :END:
** DONE Command ignores -b option entirely
   - State "DONE"       [2009-02-16 Mon 01:09]
   Part of the reason is --effective
   :SCRIPT:
   ./ledger reg -f tools/drewr.dat --effective -n -b 2004/01 \( ^exp ^liab ^assets:sav \) and not %nobudget and not mastercard
   :END:
   :PROPERTIES:
   :ID:       6EB9DDEA-2526-40D6-A18D-CAC614DF5E45
   :CREATED:  [2009-02-15 Sun 23:31]
   :END:
** DONE Command shows nothing: ledger -f doc/sample.dat -r reg @book
   - State "DONE"       [2009-02-15 Sun 23:18]
   :PROPERTIES:
   :ID:       03D5A6A1-94FF-4D36-883D-E04024F19DA5
   :CREATED:  [2009-02-08 Sun 05:17]
   :END:
** DONE Compilation error on master (7ca8149e)
   - State "DONE"       from "TODO"       [2010-05-23 Sun 00:32]
   :PROPERTIES:
   :ID:       0F17CB7F-A000-4F99-8471-739948AD575F
   :Message:  [[message://500992d31003251651q7a127ba5p434c64b7454152de@mail.gmail.com][Compilation error on master (7ca8149e)]]
   :CREATED:  [2010-03-26 Fri 22:17]
   :END:
** DONE Compile errors with gcc 4.3                                                      :ATTACH:
   - State "DONE"       [2008-05-23 Fri 03:59] \\
     Thanks for that update; the earlier one failed to build on openbsd-x86-normal.
   - State "TODO"       [2008-05-22 Thu 20:50] \\
     Nathan Jones <nathanj@insightbb.com> writes:
     > I had debug on, so I didn't notice a few spots that needed <stdlib>
     > included.
   - State "TODO"       [2008-05-22 Thu 20:49] \\
     Nathan Jones <nathanj@insightbb.com> writes:
     > Another fix.
   - State "TODO"       [2008-05-20 Tue 19:14] \\
     Patch has been applied.
   gcc 4.3 moved some header files around, leading to compile errors. Attached
   is the patch for git.
   :PROPERTIES:
   :Submitter: Nathan Jones <nathanj@insightbb.com>
   :Version:  2.6
   :Ticket:   197
   :ID:       E9AD679E-6A13-456E-820C-51C682957B55
   :Attachments: 0001-Fix-compile-errors-with-gcc-4.3.patch 0002-Fix-compile-errors-with-gcc-4.3.patch
   :CREATED:  [2008-05-20 Tue]
   :END:
** DONE Complete the "stats" command
   - State "DONE"       [2009-02-16 Mon 05:17]
   An example from ledgerstat:
   :OUTPUT:
   ledgerstat reports some useful ledger statistics using beancount:

   $ ledgerstat
   Ledger status report as of 2008-05-26
   -------------------------------------
   File: /Users/simon/current.ledger
   Nb accounts: 104
   Nb postings: 357
   Nb commodities: 2
   Nb postings: 830
   Nb unique payees: 1
   Postings: 357 over 145 days (2.5 per day)
   Postings for the past 30 days: 78 (2.6 per day)
   The last reconciliation seems to have been: 21 days ago (on 2008-05-05)
   The last non-future posting was: 1 day ago
   :END:
   :PROPERTIES:
   :ID:       93DFA8A2-B54B-4BB5-809D-3857C8ECD472
   :CREATED:  [2009-02-10 Tue 04:34]
   :END:
** DONE Complete the outputting of error context throughout Ledger
   - State "DONE"       [2009-02-02 Mon 00:32]
   - [ ] While parsing a file
   - [ ] In an included file
   - [ ] While parsing a value expression
   - [ ] While evaluating a value expression
   - [ ] While balancing an xact
   - [ ] While invoking a command
   :PROPERTIES:
   :ID:       9572CF73-D8E9-47B0-A00F-658C3A22EE9F
   :CREATED:  [2009-02-01 Sun 15:16]
   :END:
** DONE Confusing error message with ledger v3 with invalid input
   - State "DONE"       from "TODO"       [2010-05-22 Sat 18:45]
   :PROPERTIES:
   :ID:       15A80F68-F233-49D9-AF0C-9908BB6903BA
   :Message:  [[message://20100325214507.GA22847@jirafa.cyrius.com][Confusing error message with ledger v3 with invalid input]]
   :CREATED:  [2010-03-26 Fri 22:18]
   :END:
** DONE Cost amounts have the wrong sign with register -B                                :ATTACH:
   - State "DONE"       from "STARTED"    [2009-12-07 Mon 21:23]
   :PROPERTIES:
   :ID:       9603900E-D553-4ECD-A355-50B1CAABE3A8
   :Attachments: currency.dat
   :CREATED:  [2009-12-07 Mon 18:59]
   :END:
** DONE Create a fmt_ handler category, for reading %P as %(payee)
   - State "DONE"       [2009-02-15 Sun 18:34]
   :PROPERTIES:
   :ID:       525D3608-5CA8-40B5-A0A6-D1A0BF37C06A
   :CREATED:  [2009-02-15 Sun 05:06]
   :END:
** DONE Create an interactive_t object to do argument parsing
   - State "DONE"       [2009-02-21 Sat 18:57]
   :PROPERTIES:
   :ID:       B42F7688-FC26-4A0A-9C36-AB9D30FBD864
   :CREATED:  [2009-02-21 Sat 16:14]
   :END:
** DONE Create set_expr method for HANDLER(limit_), removing append_predicate
   - State "DONE"       [2009-02-15 Sun 18:21]
   :PROPERTIES:
   :ID:       E0346AE8-DA9F-4C11-B297-5D8937C5B05F
   :CREATED:  [2009-02-15 Sun 05:06]
   :END:
** DONE Determine if pre-reading the textual ledger speeds up parsing
   - State "DONE"       [2009-03-06 Fri 04:12] \\
     This is not where the slowness is, according to the profiler.
   :PROPERTIES:
   :ID:       5F272418-F871-4881-AE03-E12C1057E682
   :CREATED:  [2009-03-03 Tue 00:09]
   :END:
** DONE Ditch POST_AUTO for ITEM_GENERATED
   - State "DONE"       [2009-02-24 Tue 01:01]
   :PROPERTIES:
   :ID:       D579B743-D87C-4168-8E83-7A49A77917F6
   :CREATED:  [2009-02-23 Mon 21:35]
   :END:
** DONE Divide by zero error using -A reg                                                :ATTACH:
   - State "DONE"       from "TODO"       [2010-01-21 Thu 04:57]
   #+begin_src sh
   ledger --exchange € -A reg
   #+end_src
   :OUTPUT:
   While evaluating value expression:
    (total_expr / count)
    ^^^^^^^^^^^^^^^^^^^^
   While evaluating value expression:
    justify(scrub(display_total), total_width, (((((4 + date_width) + payee_width) + account_width) + amount_width) + total_width), true, color)
   Error: Divide by zero
   :END:
   "ledger -A bal" works fine though.
   :PROPERTIES:
   :ID:       75A28597-4B64-4A2E-AF98-CB12AE92A8FE
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :Attachments: ledger.txt.gpg
   :CREATED:  [2010-01-18 Mon 02:58]
   :END:
** DONE Do not use names with double underscores in C++ code
   - State "DONE"       from "TODO"       [2010-05-23 Sun 00:37]
   For example, HANDLER(foo_) -> foo__handler
   :PROPERTIES:
   :ID:       6A4AFDC2-DE87-48A5-A17D-B04120EE1F62
   :CREATED:  [2010-04-25 Sun 15:45]
   :END:
** DONE Document the new command-line query syntax for Ledger
   - State "DONE"       [2009-02-02 Mon 00:32]
   :PROPERTIES:
   :ID:       BC8E6D64-2C61-464A-9B58-7BE039F7C97B
   :CREATED:  [2009-02-01 Sun 22:12]
   :END:
** DONE Does the print command work with xact notes?
   - State "DONE"       from "TODO"       [2009-11-11 Wed 21:39]
   :PROPERTIES:
   :ID:       59A8EF7E-7FA9-4C88-B429-DC4E0B3C9273
   :CREATED:  [2009-11-02 Mon 15:50]
   :END:
** DONE Don't use -s for bal the way it's used now
   - State "DONE"       [2009-02-08 Sun 16:04]
   :PROPERTIES:
   :ID:       C27BABD9-CEAF-41E9-84D9-F1B97C785F50
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE drewr is seeing doubled postings with his data file
   - State "DONE"       [2009-02-08 Sun 20:26]
   - State "STARTED"    [2009-02-08 Sun 18:28]
   :PROPERTIES:
   :ID:       09C9F3F1-FEE9-45E7-9DD4-6AA1D232918B
   :CREATED:  [2009-02-07 Sat 18:20]
   :END:
** DONE drewr says --effective doesn't work either
   - State "DONE"       [2009-02-09 Mon 17:33]
   - State "STARTED"    [2009-02-09 Mon 16:47]
   :PROPERTIES:
   :ID:       E0E258D8-E5FD-44D5-9BC9-01A6131E66ED
   :CREATED:  [2009-02-09 Mon 15:19]
   :END:
** DONE Enable gettext, but only for exceptions and public strings
   - State "DONE"       [2009-02-21 Sat 20:08]
   :PROPERTIES:
   :ID:       C6772BE2-04DF-4027-AF96-16B677E08603
   :CREATED:  [2009-02-21 Sat 12:28]
   :END:
** DONE Enable the parsing of XML on standard input
   - State "DONE"       [2009-01-29 Thu 15:32]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   164
   :ID:       E97BCC81-4E9E-49AA-A905-051C9524B769
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Equity command doesn't handle multiple account commodities
   - State "DONE"       from "TODO"       [2009-11-14 Sat 02:32]
   As seen in:
   :SCRIPT:
   ledger -f doc/sample.dat equity
   :END:
   :PROPERTIES:
   :ID:       49EE4C3B-6FA9-4564-9434-6B3EB359DA6B
   :CREATED:  [2009-11-11 Wed 23:23]
   :END:
** DONE Error when running my 'bal' script
   - State "DONE"       [2009-02-26 Thu 05:07]
   When using my bal script, if there is an error in the large valexpr I use,
   it doesn't show the full context, only the valueof statement.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   25
   :ID:       88468528-A332-47E7-AA34-5E4F8126E3E7
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE Find an efficient way to make account_amount, etc., always available
   - State "DONE"       [2009-03-03 Tue 17:13]
   For example, in the register report we don't do any account tabulation.
   :PROPERTIES:
   :ID:       75E8A4EB-4596-47E0-B358-9C078C07C21F
   :CREATED:  [2009-03-03 Tue 16:29]
   :END:
** DONE Fix --anon so it preserves account hierarchy structure
   - State "DONE"       from "TODO"       [2009-06-27 Sat 14:11]
   :PROPERTIES:
   :ID:       76C15815-4D3C-46AC-996C-C6C26396283F
   :CREATED:  [2009-06-26 Fri 23:02]
   :END:
** DONE Fix the Ledger v2.6.1 branch
   - State "DONE"       [2008-05-08 Thu]
   - Every commit must relate to an issue, and name that issue in the commit message.
   - The comment for every fixed issue must reference the commit that fixed it.
   - There must be a ChangeLog set for every change, which also names the issue.
   - Every jww comment must name a Trac issue.
   :PROPERTIES:
   :ID:       1F5B58EB-F5ED-4467-8362-1E5094C19F80
   :CREATED:  [2008-04-21 Mon]
   :END:
** DONE Fix the rendering of O_CONS and O_CALL
   - State "DONE"       [2009-02-23 Mon 14:21]
   :PROPERTIES:
   :ID:       BE1CB9AB-6FE9-45EC-BD61-63D1F3AE612D
   :CREATED:  [2009-02-23 Mon 05:07]
   :END:
** DONE Fold gather_statistics into calc_posts
   - State "DONE"       [2009-03-04 Wed 04:41]
   :PROPERTIES:
   :ID:       D64F0CA1-4810-4FD0-BAF5-E6614C69DB42
   :CREATED:  [2009-03-03 Tue 17:14]
   :END:
** DONE foo(1, 2, 3) is printing as foo(1, (2, 3))
   - State "DONE"       [2009-02-27 Fri 13:15]
   :PROPERTIES:
   :ID:       C0709A2B-2D63-405A-B7EC-B5FD97E62A72
   :CREATED:  [2009-02-26 Thu 23:16]
   :END:
** DONE For the "ledger parse" command line, concat the args
   - State "DONE"       [2009-02-09 Mon 17:33]
   :PROPERTIES:
   :ID:       7070FBC8-35F1-41C7-95DD-FAFF9D0BC7DB
   :CREATED:  [2009-02-09 Mon 15:15]
   :END:
** DONE For the parse command, create a dummy post/account to test against
   - State "DONE"       [2009-02-09 Mon 17:33]
   - State "STARTED"    [2009-02-09 Mon 17:08]
   :PROPERTIES:
   :ID:       038CB629-A628-4B12-9356-5CA2097B45D2
   :CREATED:  [2009-02-09 Mon 15:45]
   :END:
** DONE For unrounded numbers, trim zeroes but not less than display precision
   - State "DONE"       [2009-02-27 Fri 13:14]
   :PROPERTIES:
   :ID:       0BAD4288-C129-425D-8700-D4B2DD129007
   :CREATED:  [2009-02-27 Fri 04:30]
   :END:
** DONE Get PCH support working again for the Ledger build
   - State "DONE"       [2009-02-08 Sun 20:26]
   - State "STARTED"    [2009-02-08 Sun 18:12]
   :PROPERTIES:
   :ID:       2594BA36-AC89-4A83-BE3E-D0ED75C89658
   :CREATED:  [2009-02-08 Sun 18:12]
   :END:
** DONE Get rid of all uses of "ident"
   - State "DONE"       [2009-02-08 Sun 02:30]
   :PROPERTIES:
   :ID:       EB366809-44CB-45AF-ABF1-3D3E3540773D
   :CREATED:  [2009-02-07 Sat 18:14]
   :END:
** DONE Get the register report to work again
   - State "DONE"       [2008-08-04 Mon]
   :PROPERTIES:
   :ID:       7D031D7C-A50D-479E-8C31-168D5F3E8CAB
   :CREATED:  [2008-07-26 Sat]
   :END:
** DONE Get xactal assignments working again
   - State "DONE"       [2008-09-14 Sun 06:26]
   - State "STARTED"    [2008-09-06 Sat 08:11]
   Another thing that needs to happen is that these assignments are stored
   internally in the xact, in assign_amount and assign_expr, and then
   get double-checked against the running total when a regular register report
   is performed.
   :PROPERTIES:
   :ID:       E6B6E93B-655B-4895-B72F-7B82E1E5D741
   :CREATED:  [2008-08-24 Sun]
   :END:
** DONE gfuchedzhy is seeing a segfault with a simple input file
   - State "DONE"       from "TODO"       [2009-11-05 Thu 04:17]
   :PROPERTIES:
   :ID:       880BC301-3EF1-4701-8599-CA6170BCC9DA
   :Issue:    http://github.com/jwiegley/ledger/issues#issue/8
   :CREATED:  [2009-11-03 Tue 14:09]
   :END:
** DONE Have -T and -t set the expression template
   - State "DONE"       [2009-02-08 Sun 16:05]
   ... so that # may be used to refer to whatever the previous value (set by
   other options) was
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   112
   :ID:       A81F98B1-38AE-4550-8056-C3D7D35691B3
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Have config options for setting fixed account names
   - State "DONE"       from "TODO"       [2009-11-25 Wed 02:34]
   Like: Equity:Unrealized Gains.
   :PROPERTIES:
   :ID:       1669EBA4-C733-4D90-897D-68EF735286DE
   :CREATED:  [2009-11-24 Tue 03:35]
   :END:
** DONE Have ledger automatically fill up the terminal window
   - State "DONE"       [2009-02-19 Thu 15:11]
   :PROPERTIES:
   :ID:       E05F54E7-FEA9-4B89-8A2E-75151FB7BF32
   :CREATED:  [2009-02-19 Thu 14:25]
   :END:
** DONE Have the xact command recognize days of the week
   - State "DONE"       [2009-02-11 Wed 21:26]
   :PROPERTIES:
   :ID:       A3F247BB-699E-40D5-B4D6-75A60192643A
   :CREATED:  [2009-02-11 Wed 19:18]
   :END:
** DONE How do I solve the fact that individual posts ...
   - State "DONE"       [2008-07-13 Sun 21:43]
   ... cannot be marked "cleared"?  This causes troubles when multiple accounts
   are reconciled that involve common posts.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   108
   :ID:       116B0437-6BA9-4211-B5DE-3BBFA69F1D33
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE If --date is used, don't change the item's real date
   - State "DONE"       from "TODO"       [2009-11-12 Thu 18:25]
   :PROPERTIES:
   :ID:       3508313E-3C25-4B36-BEC8-7C04A966A850
   :CREATED:  [2009-11-12 Thu 06:05]
   :END:
** DONE If --strict, warn if an uncleared account has never been seen before
   - State "DONE"       [2009-02-19 Thu 22:28]
   :PROPERTIES:
   :ID:       27E4A5B5-F9B9-46EA-9582-82573507F612
   :CREATED:  [2009-02-19 Thu 15:59]
   :END:
** DONE If a file's UTF8 coding is incorrect, display a meaningful error
   - State "DONE"       from "TODO"       [2009-11-07 Sat 06:09]
   :PROPERTIES:
   :ID:       91D5206E-44BF-433B-9D53-08711ECE7DE9
   :CREATED:  [2009-11-03 Tue 18:55]
   :END:
** DONE If a quote comes back in the wrong commodity, ignore it
   - State "DONE"       from "TODO"       [2009-06-28 Sun 15:19]
   :PROPERTIES:
   :ID:       CD45A03D-0A90-4C60-BA81-81BAEC554544
   :CREATED:  [2009-06-26 Fri 17:50]
   :END:
** DONE If an exception occurs while --verify --verbose is on
   - State "DONE"       [2008-08-10 Sun]
   ...it shows lots and lots of leaked memory
   :PROPERTIES:
   :ID:       AAB6A9CC-4122-45F0-A69B-5DC7C59901F5
   :CREATED:  [2008-07-27 Sun]
   :END:
** DONE If an option was not used, options.foo should return a null value
   - State "DONE"       [2009-02-22 Sun 15:16]
   :PROPERTIES:
   :ID:       BA21ACF9-8213-4794-BF32-57C786E50B67
   :CREATED:  [2009-02-22 Sun 05:11]
   :END:
** DONE If there are multiple balancing xacts, print shows them all
   - State "DONE"       from "TODO"       [2009-06-28 Sun 15:56] \\
     This was fixed by implying --actual whenever "print" is used.
   :DATA:
   2009/01/01 Sample
   Expenses:Alpha       10 A
   Expenses:Beta        10 B
   Expenses:Gamma       10 C
   Income:Unknown
   :END:
   :SCRIPT:
   ./ledger -f /tmp/bug.dat print
   :END:
   :OUTPUT:
   2009/01/01 Sample
    Expenses:Alpha                              10 A
    Expenses:Beta                               10 B
    Expenses:Gamma                              10 C
    Income:Unknown
    Income:Unknown
    Income:Unknown
   :END:
   The output should include only one "Income:Unknown" line.
   :PROPERTIES:
   :ID:       E2E479BC-BC00-4539-A330-895B2C1C8D57
   :CREATED:  [2009-02-27 Fri 04:10]
   :END:
** DONE Improve changed_value_xacts so it reports rounding discrepancies
   - State "DONE"       [2009-02-26 Thu 03:18]
   This will require adding a --revalued-amount options, and verifying that the
   last_balance plus this amount equals the new balance.
   :PROPERTIES:
   :ID:       0854BABC-CB9F-4415-8984-D74F39374535
   :CREATED:  [2009-02-25 Wed 14:05]
   :END:
** DONE Improve symbol lookup [0/5]
   - State "DONE"       from "TODO"       [2009-11-05 Thu 04:17]
   This is to support the following types of handlers registered from Python:
   - [ ] Option
   - [ ] Function (also should handle get_quote)
   - [ ] Transform (chain handler (name determines sequence))
   - [ ] Command
   :PROPERTIES:
   :ID:       F35179B5-E29B-4EA5-B9EA-5AF811615551
   :CREATED:  [2009-11-03 Tue 13:55]
   :END:
** DONE In symbol scope make the map optional
   - State "DONE"       from "TODO"       [2009-11-24 Tue 04:21]
   :PROPERTIES:
   :ID:       1DEA172D-72F1-4AA1-B013-9B04E95E47F0
   :CREATED:  [2009-11-22 Sun 04:25]
   :END:
** DONE In the --options report, right justify the source information
   - State "DONE"       from "TODO"       [2010-05-22 Sat 16:54]
   :PROPERTIES:
   :ID:       DB3A786A-C36E-4A61-8B4A-C6B7924D6045
   :CREATED:  [2010-05-03 Mon 07:24]
   :END:
** DONE Integrate omari's changes into 3.0
   - State "DONE"       [2009-02-08 Sun 16:05]
   :PROPERTIES:
   :ID:       8241124E-4FC6-46CD-9A64-1A79B59F426F
   :CREATED:  [2008-10-21 Tue 14:03]
   :END:
** DONE Integrate support for gettext() into Ledger
   - State "DONE"       [2009-02-03 Tue 01:15]
   :PROPERTIES:
   :ID:       D599561A-5CB2-4647-8A9E-FB1E558C04FD
   :CREATED:  [2009-02-02 Mon 17:01]
   :END:
** DONE interval_posts needs to keep its null_posts on temp-lists
   - State "DONE"       [2009-02-15 Sun 05:21]
   :PROPERTIES:
   :ID:       7B23FA1A-9AD3-48A3-A82E-5B0559A6448B
   :CREATED:  [2009-02-14 Sat 06:12]
   :END:
** DONE Is --file=foo valid?
   - State "DONE"       from "TODO"       [2009-11-25 Wed 02:35] \\
     Yes, it is.
   :PROPERTIES:
   :ID:       4E9D5FFB-24E3-43FC-AD14-1FA74B80E266
   :CREATED:  [2009-11-20 Fri 07:30]
   :END:
** DONE ledger -Z causes a bad memory reference
   - State "DONE"       [2009-02-16 Mon 16:56]
   :PROPERTIES:
   :ID:       8D55C469-CBA2-4F9D-B3E5-F4AFBA0A7A6B
   :CREATED:  [2009-02-07 Sat 05:04]
   :END:
** DONE ledger and bogus dates like 2008/31/12
   - State "DONE"       from "TODO"       [2010-05-22 Sat 18:19]
   :PROPERTIES:
   :ID:       EF57C685-2C18-49A1-9A8C-FB3BE6F99C41
   :Message:  [[message://20100405061115.GA7671@jirafa.cyrius.com][ledger and bogus dates like 2008/31/12]]
   :CREATED:  [2010-04-06 Tue 03:51]
   :END:
** DONE Ledger dies if a periodic transaction is unbalanced
   - State "DONE"       from "TODO"       [2010-01-18 Mon 03:41]
   #+begin_src ledger
   ~ Monthly
      Aufwand:Bargeld    0,30€
      Aktiva:Bank:Girokonto  -0,40€
   #+end_src
   It crashes tries to use the transaction's position, which is uninitialized.
   :PROPERTIES:
   :ID:       DDB54BB8-8C1C-4129-A137-07A38068F3BE
   :Message:  [[message://4B0D8A2D.9020300@gmail.com][Re: "Assertion `this->is_initialized()' failed"]]
   :CREATED:  [2009-12-01 Tue 02:55]
   :END:
** DONE Ledger fails to proof build
   - State "DONE"       from "TODO"       [2010-02-05 Fri 00:02]
   :PROPERTIES:
   :ID:       CED8B3F7-37A0-462B-A2DF-152CA0656BE5
   :CREATED:  [2010-02-02 Tue 15:40]
   :END:
** DONE Ledger is currently failing 'make check'
   - State "DONE"       [2008-11-23 Sun 23:43]
   :PROPERTIES:
   :ID:       15CFAA5C-5A95-43FD-8343-06047CF7440B
   :CREATED:  [2008-10-11 Sat 20:11]
   :END:
** DONE Ledger is not parsing value expressions in report query correctly
   - State "DONE"       from "TODO"       [2009-11-15 Sun 05:16]
   In this command, the '=' gets interpreted as a token.
   :SCRIPT:
   ledger reg @another expr '(amount=$1000)'
   :END:
   :PROPERTIES:
   :ID:       3E0E985B-4AE0-462E-9E61-5C0B1BF1A864
   :CREATED:  [2009-11-14 Sat 02:42]
   :END:
** DONE Ledger should output empty values with -E -j
   - State "DONE"       [2009-02-19 Thu 13:25]
   The -E flag should cause Ledger to report null figures:
   :OUTPUT:
   $ ledger -E -j -p 2006.12 reg Travel

   2006.12.18 32.1
   2006.12.28 21.81
   2006.12.28 63.83
   2006.12.28 14.62
   2006.12.28 13.4
   2006.12.28 15.23
   2006.12.28 23.14
   2006.12.28 23.14
   2006.12.28 23.14
   2006.12.28 -28.32
   :END:
   There were null values in the above report, but they weren't output.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   44
   :ID:       86C0F968-F05B-4881-96B8-1C8CA8BB1315
   :CREATED:  [2008-04-05 Sat]
   :END:
** DONE ledger v3 print puts comments with two semi-colons into next line
   - State "DONE"       from "TODO"       [2010-05-22 Sat 23:50]
   - Note taken on [2010-03-26 Fri 22:17] \\
     [[message://20100325225210.GB21954@jirafa.cyrius.com][Re: ledger v3 print puts comments with two semi-colons into next line]]
   :PROPERTIES:
   :ID:       1DC0BAFA-4BFA-4BC5-B023-EF7921A91B6C
   :Message:  [[message://20100325224706.GA24440@jirafa.cyrius.com][ledger v3 print puts comments with two semi-colons into next line]]
   :CREATED:  [2010-03-26 Fri 22:17]
   :END:
** DONE Ledger's long options should support --foo=value
   - State "DONE"       [2009-02-19 Thu 13:06]
   :PROPERTIES:
   :ID:       9ADBF039-BCA2-4FFE-9567-3857467E82AA
   :CREATED:  [2009-02-16 Mon 20:19]
   :END:
** DONE main.cc still needs cleaning up; move global_scope to global.cc
   - State "DONE"       [2009-02-05 Thu 21:55]
   :PROPERTIES:
   :ID:       AD30D495-EFEB-4FB5-A831-6C452FF53D56
   :CREATED:  [2009-02-05 Thu 03:38]
   :END:
** DONE Make $account in automated postings a string interpolated value
   - State "DONE"       from "STARTED"    [2010-05-22 Sat 14:48]
   :LOGBOOK:
   CLOCK: [2010-05-22 Sat 14:31]--[2010-05-22 Sat 14:48] =>  0:17
   :END:
   :PROPERTIES:
   :ID:       5CB52887-408E-48F0-8798-3C640D0295B3
   :Message:  [[message://AANLkTil3bVsrPbOQAXXEqgtd9Zzd80CKK4o1-CYvLwdI@mail.gmail.com][Re: Doing US payroll taxes with ledger]]
   :CREATED:  [2010-05-19 Wed 04:54]
   :END:
** DONE Make --empty tests for bal, bal -n, weekly, etc.
   - State "DONE"       [2009-02-21 Sat 20:59]
   :PROPERTIES:
   :ID:       EDE71916-D0FC-4EF3-99A5-34FF0B35F58F
   :CREATED:  [2009-02-21 Sat 12:27]
   :END:
** DONE Make it so that nil is considered a valid commodity
   - State "DONE"       [2007-10-22 Mon 03:23]
   This is rather than testing for nil everywhere; just have the generic
   functions relating to commodities able to act on null.
   :PROPERTIES:
   :ARCHIVE_TIME: 2007-10-29 Mon 04:29
   :ARCHIVE_CATEGORY: CL-Ledger
   :ID:       F026F02F-6695-4310-82DA-E8869E56BF3E
   :CREATED:  [2007-10-20 Sat]
   :END:
** DONE Make Ledger not be so whitespace sensitive
   - State "DONE"       [2009-02-15 Sun 23:18]
   :PROPERTIES:
   :ID:       C2B7ED9B-7C4D-4F52-98A2-157671FDF83F
   :CREATED:  [2009-02-08 Sun 22:46]
   :END:
** DONE Make sure "make release-distcheck" still works for Ledger
   - State "DONE"       [2009-02-08 Sun 16:01]
   :PROPERTIES:
   :ID:       F3B3E622-AD73-4B8A-8839-F1CF87D7CC7C
   :CREATED:  [2009-01-23 Fri 19:07]
   :END:
** DONE Make sure -E can report an "empty month" when using -M
   - State "DONE"       [2009-02-15 Sun 23:16]
   :PROPERTIES:
   :ID:       1F47D0AF-0015-4CD6-8AE1-92D0791D61DE
   :CREATED:  [2009-02-13 Fri 20:51]
   :END:
** DONE Make sure posts_report always clears xdata
   - State "DONE"       from "TODO"       [2010-05-31 Mon 15:12]
   :PROPERTIES:
   :ID:       F0CFF3FF-7BAF-40A9-BA37-2ACDC8369B5C
   :CREATED:  [2010-05-31 Mon 01:16]
   :END:
** DONE Make sure that every delete is a checked_delete
   - State "DONE"       [2008-07-27 Sun]
   :PROPERTIES:
   :ID:       5768AB32-D4BB-480E-AD7D-35AF842E2D32
   :CREATED:  [2008-07-25 Fri]
   :END:
** DONE Monthly transactions via -M have the payee bolded
   - State "DONE"       from "TODO"       [2009-11-13 Fri 19:00]
   This is because the temporary transaction is not mark CLEARED.
   :PROPERTIES:
   :ID:       162C0700-B636-4E6C-B2AB-E778E2D20E33
   :CREATED:  [2009-11-12 Thu 05:04]
   :END:
** DONE More issues with price file parsing                                              :ATTACH:
   - State "DONE"       [2009-02-19 Thu 15:02]
   - Note taken on [2008-07-18 Fri 22:44] \\
     Solving this is going to be part of a larger revising of the way commodities
     are translated in general.
   - Note taken on [2008-07-18 Fri 17:37] \\
     Here's the xact:
     :DATA:
   - Note taken on [2008-07-18 Fri 17:37] \\
     This must be used with the xact found in one of the comments.
   - Note taken on [2008-07-18 Fri 02:35] \\
     I need supporting information before I can do anything more here; I need the
     actual xact which, combined with the price file, causes the problem.
   2007/01/01 Wasatch Small Cap: WMCVX
    Assets:Wasatch                           178.170 WMCVX
    Equity:OpeningBalances
     :END:
   See archive/New Artisans LLC // View topic - Problem with prices.db file/index.html.
   :PROPERTIES:
   :Submitter: <ktneely@astroturfgarden.com>
   :Version:  2.6
   :Ticket:   134
   :ID:       3850F5F3-8D73-435C-A734-1C39683430ED
   :Attachments: prices.db
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Move --pager back to report_t
   - State "DONE"       [2009-02-05 Thu 21:54]
   :PROPERTIES:
   :ID:       45FE9185-591D-4965-A91A-99B7F708627B
   :CREATED:  [2009-02-05 Thu 04:35]
   :END:
** DONE Move code at the bottom of report.h back into derive.h
   - State "DONE"       [2009-02-16 Mon 04:13]
   :PROPERTIES:
   :ID:       5031CD23-FD35-4622-B0D6-90E8FFAD33D4
   :CREATED:  [2009-02-12 Thu 01:17]
   :END:
** DONE Move session.cc read_journal code into journal_t
   - State "DONE"       from "TODO"       [2009-11-05 Thu 04:17]
   :PROPERTIES:
   :ID:       1E297D28-3012-4DF8-A456-4CC09086EB88
   :CREATED:  [2009-11-02 Mon 17:11]
   :END:
** DONE Move the new ledger xact completion to M-TAB
   - State "DONE"       [2009-02-15 Sun 18:03]
   :PROPERTIES:
   :ID:       C6AC5776-AB18-4132-87E4-DE2A89E781CF
   :CREATED:  [2009-02-15 Sun 05:23]
   :END:
** DONE Move the samples in contrib/scripts perhaps to contrib/?
   - State "DONE"       [2009-02-24 Tue 04:07]
   :PROPERTIES:
   :ID:       079B7BEC-73F9-4598-A6F6-6D9717B37F34
   :CREATED:  [2009-02-04 Wed 20:56]
   :END:
** DONE Multi-byte characters (like UTF-8) throws off the "emacs" report                 :ATTACH:
   - State "DONE"       [2008-08-25 Mon 23:54] \\
     This has been implemented.
   The emacs report uses byte-positioning to indicate the beginning of posts
   and posts.  This breaks with multi-byte files.

   The solution is either to support multi-byte correctly, or to use line
   numbering instead.  levin has offered a patch for this (attached).
   :PROPERTIES:
   :Submitter: Levin <zslevin@gmail.com>
   :Version:  2.6
   :Ticket:   5
   :ID:       6B7E468B-CB1E-41C3-A6BF-DCB64DA91C15
   :Attachments: line-positioning.patch
   :CREATED:  [2007-10-29 Mon]
   :END:
** DONE Multiple -f options fail silently
   - State "DONE"       [2009-02-08 Sun 16:05]
   Ledger does not seem to be able to accept multiple -f options (further -f's
   get ignored silently). It should simply concatenate all the specified files
   in a single data set.

   :OUTPUT:
   Predicate:
   Display P: a
   2007/12/31 Start of year / Op.. As:In:HSBC-Broker           100 IVV      100 IVV
                                Eq:Op:Cost             -15333.7200 USD      100 IVV
                                                                 -15333.7200 USD
   banane:~$ ledger -f /tmp/b.txt reg
   Predicate:
   Display P: a
   2007/12/31 Start of year / Op.. As:In:HSBC-Broker           100 IAA      100 IAA
                                Eq:Op:Cost             -15333.7200 USD      100 IAA
                                                                 -15333.7200 USD
   banane:~$ ledger -f /tmp/a.txt /tmp/b.txt reg
   Error: Unrecognized command '/tmp/b.txt'
   banane:~$ ledger -f /tmp/a.txt -f /tmp/b.txt reg
   Predicate:
   Display P: a
   2007/12/31 Start of year / Op.. As:In:HSBC-Broker           100 IVV      100 IVV
                                Eq:Op:Cost             -15333.7200 USD      100 IVV
                                                                 -15333.7200 USD
   :END:
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   54
   :ID:       B1E49EA5-18B9-413A-ACD6-9F9795F25722
   :CREATED:  [2008-04-07 Mon]
   :END:
** DONE My use of Boost.Iostreams is broken in Boost 1.44
   - State "DONE"       from "TODO"       [2010-09-05 Sun 17:35]
   :PROPERTIES:
   :ID:       4287EE80-665C-4C73-B439-52D6893D6857
   :CREATED:  [2010-08-19 Thu 17:24]
   :END:
** DONE Need to internationalize error messages
   - State "DONE"       [2009-02-25 Wed 04:15]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   138
   :ID:       6838FEA5-9283-462D-8651-351B0B6A6A0E
   :END:
** DONE Need to rename entry->xact and xact->post
   - State "DONE"       [2009-02-23 Mon 18:49]
   :PROPERTIES:
   :ID:       CCD63092-FB8B-48DA-BA86-2C6710C6034A
   :CREATED:  [2009-02-23 Mon 03:46]
   :END:
** DONE Now that caching is not being used, simplification can be made
   - State "DONE"       [2009-02-03 Tue 18:53]
   - [X] No need for src_idx
   - [X] No need to store the amount/cost expr
   :PROPERTIES:
   :ID:       53742416-2085-450C-8E4E-9D2CD631C691
   :CREATED:  [2009-02-03 Tue 17:33]
   :END:
** DONE Only use ledger::string if VERIFY_ON or HAVE_BOOST_PYTHON
   - State "DONE"       from "TODO"       [2009-11-11 Wed 16:38]
   Otherwise, it results in empty function calls for optimized builds.
   :PROPERTIES:
   :ID:       3CAB257E-B4B5-47C4-BD19-74056E8B5A1C
   :CREATED:  [2009-11-11 Wed 15:09]
   :END:
** DONE Optimize the default display predicate
   - State "DONE"       from "TODO"       [2010-06-07 Mon 05:48]
   - Note taken on [2010-06-06 Sun 06:42] \\
     calc_posts should store the display_amount and display_total in the xdata of
     each posting, plus the xdata should be cleared after each post is formatted
     (but only the second to last, since the last may still be used).
   Rather than having post&display_amount, do nothing via a display
   predicate for the posting case.  For that, use logic within
   rounding_error_posts, since it already needs to compute the display
   amount and there is no reason to calculate the same value twice.  This
   means that either rounding_error_posts is always used (with a boolean
   used to control <Rounding> postings), or a display_amount_filter is
   needed which rounding refers to for access to the value.  This would
   not be used for account reports.
   :PROPERTIES:
   :ID:       0C1B0593-435F-4C8E-A310-D3ED31B652E8
   :CREATED:  [2010-06-06 Sun 06:28]
   :END:
** DONE Parse xact metadata that occurs at the end of the line
   - State "DONE"       [2009-02-04 Wed 04:00]
   :PROPERTIES:
   :ID:       D3AD59D7-DAF4-41E7-92DE-397D7A1F449D
   :CREATED:  [2009-02-03 Tue 16:57]
   :END:
** DONE Parse xact notes that occur at the end of the line
   - State "DONE"       [2009-02-04 Wed 04:00]
   :PROPERTIES:
   :ID:       18728C2C-FE0E-495C-9DAF-6DC7F7EF34D9
   :CREATED:  [2009-02-03 Tue 16:19]
   :END:
** DONE Perhaps the -x option should be -X, to pair with -V
   - State "DONE"       [2009-02-25 Wed 13:49]
   :PROPERTIES:
   :ID:       3BEF3BCD-EE9A-4D29-B5A0-90D6AC868556
   :CREATED:  [2009-02-25 Wed 04:27]
   :END:
** DONE Post about the new Ledger commodities feature
   - State "DONE"       [2009-01-21 Wed 20:16]
   :PROPERTIES:
   :ID:       9DC97062-391A-4C48-99E1-3B6037716469
   :ARCHIVE_TIME: 2009-02-01 Sun 15:50
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2009-01-20 Tue 16:45]
   :END:
** DONE PPC buildbot is failing due to a bad TeX installation
   - State "DONE"       [2009-02-03 Tue 14:20]
   :PROPERTIES:
   :ID:       560E59C8-8748-4679-9A17-C76893BDDDEF
   :CREATED:  [2009-02-01 Sun 03:03]
   :END:
** DONE print doesn't honour --date-format
   - State "DONE"       from "STARTED"    [2010-05-22 Sat 22:03]
   :LOGBOOK:
   CLOCK: [2010-05-22 Sat 21:36]--[2010-05-22 Sat 22:03] =>  0:27
   :END:
   :PROPERTIES:
   :ID:       30C259F9-BC20-453A-A55E-530D11770F3F
   :Message:  [[message://20100322091126.GW1914@jirafa.cyrius.com][print doesn't honour --date-format]]
   :CREATED:  [2010-03-26 Fri 22:22]
   :END:
** DONE Problem reading Russian prices file                                              :ATTACH:
   - State "DONE"       [2009-02-15 Sun 23:21]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   131
   :ID:       22D053B7-616B-4B64-83DF-80A46BA1EC2B
   :Attachments: bug.100
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Problem with basis report
   - State "DONE"       [2009-02-24 Tue 11:38]
   The command is:
   :SCRIPT:
   ledger -f utils/standard.dat -e 2004/4 -B reg 401
   :END:
   Far too many decimal places are being displayed in the register output from
   this command.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   13
   :ID:       41B5FF94-DF20-4530-81A5-20E78EEEDED2
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE Problem with capital gains report
   - State "DONE"       [2009-02-24 Tue 11:37]
   The command is:
   :SCRIPT:
   ledger -f utils/standard.dat -e 2004/4 -G reg 401
   :END:
   The results of this command are not at all what I would expecteven though
   they make sense!

   The difference is that in 2.4.1, all of the relevant revaluation lines were
   printed, such that the total made sense.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   12
   :ID:       51DD2F71-F5D0-4C89-AEBD-9BFCF56C1FDB
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE Problem with case sensitivity and UTF-8
   - State "DONE"       from "STARTED"    [2009-11-07 Sat 08:23]
   активы doesn't match Активы
   :PROPERTIES:
   :ID:       FA84F4EF-0446-4237-98E1-381458645004
   :CREATED:  [2009-11-03 Tue 15:27]
   :END:
** DONE Recursive printing causes costs to extend precision each time
   - State "DONE"       [2009-02-27 Fri 16:22]
   :PROPERTIES:
   :ID:       78F75F38-9069-4812-99E4-0D9FCDE14DFB
   :CREATED:  [2009-02-27 Fri 03:03]
   :END:
** DONE reg -V -f doc/sample.dat is currently completely broken
   - State "DONE"       [2009-02-24 Tue 11:37]
   :PROPERTIES:
   :ID:       D7A942B0-A071-496D-B2CE-E916837D50D6
   :CREATED:  [2009-02-05 Thu 03:36]
   :END:
** DONE Reg reports by payee / tag
   - State "DONE"       from "STARTED"    [2010-05-22 Sat 17:52]
   :LOGBOOK:
   CLOCK: [2010-05-22 Sat 15:21]--[2010-05-22 Sat 15:40] =>  0:19
   :END:
   :PROPERTIES:
   :ID:       A1909563-677E-47E9-80D9-8F51FA40F475
   :Message:  [[message://4763c737-c606-48b1-92b3-e4f6a4e9b9c9@r27g2000yqn.googlegroups.com][Reg reports by payee / tag]]
   :CREATED:  [2010-03-26 Fri 22:16]
   :END:
** DONE release-distcheck fails because we're passing all args to configure
   - State "DONE"       [2009-02-11 Wed 21:26]
   :PROPERTIES:
   :ID:       903AC319-A260-4166-8318-34C5ACC95AE8
   :CREATED:  [2009-02-11 Wed 15:12]
   :END:
** DONE Remove all references to cache_file
   - State "DONE"       [2009-02-04 Wed 21:01]
   :PROPERTIES:
   :ID:       AC1C1163-1EB0-4A8F-B4F5-CD0122442A64
   :CREATED:  [2009-02-04 Wed 18:17]
   :END:
** DONE Remove special parsing of %!, in favor of '%(ansi(foo))'
   - State "DONE"       [2009-02-15 Sun 15:55]
   :PROPERTIES:
   :ID:       9C04DE6C-5539-4B55-B669-57284F34FD63
   :CREATED:  [2009-02-15 Sun 05:06]
   :END:
** DONE Remove total_cost, all I need is amount_expr = cost
   - State "DONE"       [2009-02-15 Sun 15:55]
   :PROPERTIES:
   :ID:       7ACCA78F-81BE-48D7-B7EE-42C1DA67DE62
   :CREATED:  [2009-02-15 Sun 05:06]
   :END:
** DONE Rename basket to bucket
   - State "DONE"       from "TODO"       [2009-11-07 Sat 06:41]
   :PROPERTIES:
   :ID:       4BC2BE6E-7A3D-4207-8F43-6BF07303B9DF
   :CREATED:  [2009-11-02 Mon 15:50]
   :END:
** DONE Restore command-line regexps
   - State "DONE"       [2008-08-04 Mon]
   :PROPERTIES:
   :ID:       0356C673-4300-4CB8-B4A4-869EF0773AF9
   :CREATED:  [2008-08-03 Sun]
   :END:
** DONE Restore deleted directories from src/ledger/lib
   - State "DONE"       [2008-08-13 Wed]
   :PROPERTIES:
   :ID:       E40F6364-3155-49C1-B5B2-A2308C1F401A
   :CREATED:  [2008-08-13 Wed]
   :END:
** DONE Restore reporting filters
   - State "DONE"       [2008-08-04 Mon]
   :PROPERTIES:
   :ID:       05D95071-2F29-4056-9146-708A13EED837
   :CREATED:  [2008-08-03 Sun]
   :END:
** DONE Restore the "xact" command
   - State "DONE"       [2009-02-15 Sun 23:17]
   :PROPERTIES:
   :ID:       3B6F9C53-E7D6-413F-8356-DFD34822DE3B
   :CREATED:  [2009-02-10 Tue 21:17]
   :END:
** DONE Restore the -A reporting option
   - State "DONE"       [2009-02-15 Sun 15:41]
   This will require a new post/account valexpr variable: count.  For
   postings, it counts the number of postings calculated thus far.  For
   accounts, it reports how many postings it relates to.
   :PROPERTIES:
   :ID:       9CEB14C0-63A1-489A-90E0-453D1125DFFF
   :CREATED:  [2009-02-14 Sat 05:39]
   :END:
** DONE Revert recent change which sets cost from price
   - State "DONE"       from "TODO"       [2010-06-08 Tue 06:17]
   :PROPERTIES:
   :ID:       0F59F13B-5946-4A9F-91AE-98EFB466F9E3
   :CREATED:  [2010-06-08 Tue 04:05]
   :END:
** DONE Review the changes I've made to ledger::master since 2.6.0.90
   - State "DONE"       [2008-05-07 Wed]
   The only questionable change is the abortive fix to -e.  This should be
     reverted until a proper fix is found.
     :PATCH:
   --- a/option.cc
   +++ b/option.cc
   @@ -482,17 +482,17 @@ OPT_BEGIN(begin, "b:") {
   OPT_BEGIN(end, "e:") {
   char buf[128];
   interval_t interval(optarg);
   -  if (! interval.end)
   +  if (! interval.begin)
   throw new error(std::string("Could not determine end of period '") +
                    optarg + "'");

   if (! report->predicate.empty())
   report->predicate += "&";
   report->predicate += "d<[";
   -  report->predicate += interval.end.to_string();
   +  report->predicate += interval.begin.to_string();
   report->predicate += "]";

   -  terminus = interval.end;
   +  terminus = interval.begin;
   } OPT_END(end);

   OPT_BEGIN(current, "c") {
     :END:
   :PROPERTIES:
   :ID:       CD409D8E-9926-4130-BB83-1179CF5AE84F
   :CREATED:  [2008-04-24 Thu]
   :END:
** DONE Revise the way that error contexts are passed up
   - State "DONE"       [2008-08-04 Mon]
   Special care needs to be taken that legitimate uses of exceptions are not too expensive.
   :PROPERTIES:
   :ID:       C86755E1-199A-4587-93A8-C18C04FC4996
   :CREATED:  [2008-07-25 Fri]
   :END:
** DONE Revise the way that option/command/etc handlers are defined
   - State "DONE"       [2009-02-05 Thu 21:54]
   - [ ] option
   - [ ] command
   - [ ] directive
   - [ ] function
   - [ ] method
   :PROPERTIES:
   :ID:       4D752AEF-B4C4-47A8-A5D8-CB36F5BFBE50
   :CREATED:  [2009-02-05 Thu 13:49]
   :END:
** DONE Running gettextize may be worse than autoreconf --intl
   - State "DONE"       [2009-02-15 Sun 23:17]
   :PROPERTIES:
   :ID:       81B2C4E9-2360-4055-88C2-076ACF88B97A
   :CREATED:  [2009-02-11 Wed 15:36]
   :END:
** DONE Scoping bug with defined value expression functions
   - State "DONE"       from "TODO"       [2009-11-10 Tue 02:28]
   If I parse the following data:
   :DATA:
    def elec := account_total("Usage:Electricity")

    2009/01/13 * Electricity
     Usage:Electricity          646,40 kWh
     Equity:OpeningBalance

    2009/02/13 * Electricity
     Usage:Electricity          (690,10 kWh - elec)
     Supplier:Vattenfall
   :END:
   I get an error that account_total is unknown, because it's not finding the
   report scope.  If I substitute the definition by hand, it works.
   :PROPERTIES:
   :ID:       53ACFFFA-E9DE-4526-ABBD-B38DAE0FBA6F
   :CREATED:  [2009-11-05 Thu 05:25]
   :END:
** DONE Scoping error with the account directive and included files                      :ATTACH:
   - State "DONE"       from "STARTED"    [2010-05-22 Sat 21:35]
   - Note taken on [2009-12-08 Tue 19:45] \\
     Mentioned in this e-mail: [[message://E53FE149-FD4B-43F1-9A01-4DC9BF138DF3@surryhill.net][Ledger Bugfixes]].
   :LOGBOOK:
   CLOCK: [2010-05-22 Sat 21:14]--[2010-05-22 Sat 21:35] =>  0:21
   :END:
   :PROPERTIES:
   :ID:       F4A477E6-C4F6-43B1-ABCC-4DC325C2869A
   :Attachments: timelog.dat a.dat
   :CREATED:  [2009-12-08 Tue 19:45]
   :END:
** DONE Segfault using -M -A bal                                                         :ATTACH:
   - State "DONE"       from "TODO"       [2010-01-21 Thu 04:59]
   #+begin_src sh
   ledger --exchange € -M -A bal
   #+end_src
   "ledger -M bal" and "ledger -A bal" both work fine.
   :PROPERTIES:
   :ID:       9A4FEA3B-6490-46D0-9839-C283C87FE8B4
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :Attachments: ledger.txt.gpg
   :CREATED:  [2010-01-18 Mon 03:00]
   :END:
** DONE Separate out session option handlers from report.cc
   - State "DONE"       [2009-02-06 Fri 03:32]
   :PROPERTIES:
   :ID:       1B28673D-C55E-48A5-86AB-6052BB583D52
   :CREATED:  [2009-02-04 Wed 15:53]
   :END:
** DONE Set the beginning and ending line/position for xacts
   - State "DONE"       [2009-02-08 Sun 16:06]
   ... that are in other files types: OFX.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   103
   :ID:       50357AC3-2CF8-4BBE-A679-7B3540139C44
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Special care needs to be taken that legitimate uses of exceptions
   ...are not too expensive.
   :PROPERTIES:
   :ID:       525657CE-DA76-4B4B-B88C-595F799A12A7
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE Split binary.cc into journal-specific and generic
   - State "DONE"       [2008-08-04 Mon]
   ...and put the generic one in libamounts
   :PROPERTIES:
   :ID:       12C3D67F-0E7C-46D4-AE7B-7E1E22456997
   :CREATED:  [2008-07-29 Tue]
   :END:
** DONE Test failure on Ubuntu Natty amd64
   SCHEDULED: <2011-03-27 Sun>
   - State "DONE"       from "TODO"       [2011-03-28 Mon 01:58]
   - Note taken on [2011-03-26 Sat 15:38] \\
     I'll need to install Natty in a VM to properly test this user's problem.
   :PROPERTIES:
   :ID:       58660296-50F9-4348-AD36-65F1A94CA886
   :CREATED:  [2011-03-26 Sat 15:24]
   :Message:  [[message://jwiegley/ledger/issues/24@github.com][{GitHub} Test failure on Ubuntu Natty amd64 {jwiegley/ledger GH-24}]]
   :Submitter: mbudde <reply+i-706416-e56a2d7beb055dfd861a9af615594018ca5baf6a@reply.github.com>
   :Date:     Sat, 26 Mar 2011 06:20:12 -0700
   :END:
** DONE textual.cc should report about illegal options
   - State "DONE"       from "TODO"       [2009-11-07 Sat 08:34]
   :PROPERTIES:
   :ID:       7A2732AF-FF0C-4418-AF38-BA65834866F0
   :CREATED:  [2009-11-02 Mon 15:50]
   :END:
** DONE The 'entry' command is showing an effective date
   - State "DONE"       [2009-03-02 Mon 04:41]
   The entry that it prints out should not have an effective date.
   :PROPERTIES:
   :Submitter: John Wiegley <johnw@newartisans.com>
   :Milestone: 3.0
   :Ticket:   3
   :ID:       9457CE97-8EF2-F5B4-B31A-A8D06175EBF3
   :CREATED:  [2009-03-01 Sun 01:09]
   :END:
** DONE The -- sequence isn't stopping option parsing from happening
   - State "DONE"       [2009-02-22 Sun 18:36]
   :PROPERTIES:
   :ID:       9CEDF17E-E7F2-4FBC-8B6E-3E90F33DB70A
   :CREATED:  [2009-02-22 Sun 03:10]
   :END:
** DONE The --prefix-format option messes up columnar alignment
   - State "DONE"       from "TODO"       [2010-05-22 Sat 19:18]
   ledger -f doc/sample.dat --prepend-format='%3(seq) ' --columns=80 reg
   :PROPERTIES:
   :ID:       64F9D913-75E1-4830-A3D9-29B72442E68B
   :CREATED:  [2010-02-04 Thu 18:16]
   :END:
** DONE The -n option isn't working on this given sample data                            :ATTACH:
   - State "DONE"       [2009-02-16 Mon 05:21]
   The following two commands do not generate the correct output:
   :SCRIPT:
   ledger -f %data% -n reg ^exp | wc -l
   ledger -f %data% -n reg | wc -l
   :END:
   The latter command should report more, or the same, number of lines as the
   first, but this is not happening.  It seems that without a regexp, the -n
   report is dropping out several xacts altogether.
   :PROPERTIES:
   :Submitter: Drew Raines <aaraines@gmail.com>
   :Version:  2.6.1
   :ID:       313ACEEC-CFEB-45B9-9EB1-4DCAE40BFBDE
   :Attachments: gistde47de0f5a466f84a2b0-174c35de8c1af0f3c00d552b448042f6206a7d1b.tar.gz
   :CREATED:  [2008-10-26 Sun 19:06]
   :END:
** DONE The -U flag for Ledger isn't working at all
   - State "DONE"       [2009-01-14 Wed 00:36]
   :SCRIPT:
   ./ledger -U --tail 30 -f /Volumes/Files/ledger.dat reg trade:brok
   :END:
   :PROPERTIES:
   :ID:       D66E8BEC-7FA3-4E7D-8E36-61321FA2B6E4
   :ARCHIVE_TIME: 2009-01-20 Tue 20:28
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2009-01-07 Wed 23:14]
   :END:
** DONE The -y option doesn't work
   - State "DONE"       [2009-02-09 Mon 17:33]
   - State "STARTED"    [2009-02-09 Mon 17:01]
   :PROPERTIES:
   :ID:       0C00E4C0-3BA3-4785-8F29-52C8FA702AD4
   :CREATED:  [2009-02-09 Mon 15:19]
   :END:
** DONE The expression "foo.bar.baz" gets precedence wrong too
   - State "DONE"       [2009-02-09 Mon 18:17]
   :PROPERTIES:
   :ID:       6632F5DF-77E9-4B2A-AA87-49C276F1C108
   :CREATED:  [2009-02-09 Mon 15:15]
   :END:
** DONE The file in tools/sample.drewr isn't working with the command it shows
   - State "DONE"       [2009-02-15 Sun 23:18]
   :PROPERTIES:
   :ID:       AC7EAD11-1ECE-4E05-AC68-E2DB745F8A9B
   :CREATED:  [2009-02-10 Tue 21:17]
   :END:
** DONE The following command doesn't work: ledger -S display_date reg
   - State "DONE"       [2009-02-15 Sun 23:18]
   :PROPERTIES:
   :ID:       D360E561-2F8E-43F3-AC51-D023A372C205
   :CREATED:  [2009-02-08 Sun 19:07]
   :END:
** DONE The following, with -B or -V, does not output correctly
   - State "DONE"       [2009-02-24 Tue 11:43]
   If you do a register report using this input:
   :DATA:
   ; reported by pll

   D $1,000.00

   2008/10/05 Shell
    Expenses:Auto:Fuel          GAL 5.580 @ $ 2.699
    Assets:BankAccounts:USAA:Checking      $ -15.06

   2008/10/05 Shell
    Expenses:Auto:Fuel                    GAL 5.580
    Assets:BankAccounts:USAA:Checking      $ -15.06
   :END:
   What you will see in the -V case is that GAL is never converted to $, and in
   the -B case there is too much precision.
   :PROPERTIES:
   :Submitter: pll
   :Version:  2.6.0.90
   :Ticket:   201
   :ID:       F5ABB1B6-B2C1-45B2-A9AE-174736521687
   :CREATED:  [2008-07-13 Sun]
   :END:
** DONE The formatter should itself call justify and scrub
   - State "DONE"       [2009-03-03 Tue 03:18]
   The user can use %{} to avoid any other calls.

   Also, there should be valexpr variables for all the ansi strings, like
   green, red, yellow, etc.  And there should be an alternate syntax for ?:
   use "if" and "else" keywords.  This way, a person can write:

   %12(display_amount)[red if display_amount < 0]
   :PROPERTIES:
   :ID:       5B31A223-DD34-4F97-ABC6-1C18FADC5389
   :CREATED:  [2009-03-02 Mon 05:25]
   :END:
** DONE The operators in valexpr.cc shouldn't just assert
   - State "DONE"       [2009-02-15 Sun 23:21]
   ... but if somebody says "T&", it should give a syntax error.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   100
   :ID:       AA448F9B-4200-4042-A4D6-57F6466D878C
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE The option "-p this" no longer works
   - State "DONE"       from "TODO"       [2010-01-21 Thu 04:34]
   :PROPERTIES:
   :ID:       14F7B5C7-1FAC-4750-B389-E9FAA7BB0B9B
   :CREATED:  [2009-12-29 Tue 16:07]
   :END:
** DONE The parser thinks [[link][desc]] is an invalid transaction date
   - State "DONE"       from "TODO"       [2009-11-15 Sun 05:05]
   :PROPERTIES:
   :ID:       8B15C4DD-31A1-403A-9BBF-DE41E08C2DD8
   :CREATED:  [2009-11-14 Sat 17:08]
   :END:
** DONE The period "Dec 2008" gives all of 2008
   - State "DONE"       from "STARTED"    [2009-03-23 Mon 01:15]
   - State "STARTED"    [2009-03-19 Thu 05:30]
   :PROPERTIES:
   :ID:       4C97E70D-5338-4360-93A6-F4EFD98BF2B1
   :ARCHIVE_TIME: 2009-04-12 Sun 20:34
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-03-06 Fri 00:02]
   :END:
** DONE The print command isn't showing the transaction cost
   - State "DONE"       [2009-02-24 Tue 15:04]
   :PROPERTIES:
   :ID:       69C29ACE-3685-405A-8EB6-D66941FF6A51
   :CREATED:  [2009-02-22 Sun 21:01]
   :END:
** DONE The print format should conform to what I use in my ledger.dat
   - State "DONE"       [2009-02-13 Fri 18:43]
   :PROPERTIES:
   :ID:       42174465-88BE-465D-B15C-4EDD150C1D17
   :CREATED:  [2009-02-12 Thu 19:10]
   :END:
** DONE The sort needs to be able to reverse order of strings and dates
   - State "DONE"       [2009-02-15 Sun 23:17]
   :PROPERTIES:
   :ID:       1745DA15-B4A3-42EE-B8F0-11273A33627C
   :CREATED:  [2009-02-12 Thu 16:15]
   :END:
** DONE The string accumulator is swallowing strings
   - State "DONE"       [2009-02-21 Sat 23:43]
   :PROPERTIES:
   :ID:       C5D32CCE-7FD4-4A39-B8F2-20147A4F6902
   :CREATED:  [2009-02-21 Sat 21:33]
   :END:
** DONE The use of automated expressions increases invocation by 50%
   - State "DONE"       [2009-02-04 Wed 04:00] \\
     This is because value expressions are being calculated for every xact.
   :PROPERTIES:
   :ID:       13567C8B-DB84-4658-8C66-40AB211B7BF0
   :CREATED:  [2009-02-03 Tue 19:02]
   :END:
** DONE There are too many O_CONS levels for parsing '((1, 2), 3)'
   - State "DONE"       [2009-02-23 Mon 05:29]
   :PROPERTIES:
   :ID:       539F3920-0426-40D0-AB6A-091EE1AC9B1B
   :CREATED:  [2009-02-23 Mon 05:07]
   :END:
** DONE There is #if 0'd code in filters.cc stopping sample.sh from working
   - State "DONE"       [2009-02-09 Mon 15:10]
   :PROPERTIES:
   :ID:       2987030C-0911-46BC-95D6-4494319492D6
   :CREATED:  [2009-02-09 Mon 01:01]
   :END:
** DONE Transfer Ledger bugs to Bugzilla
   - State "DONE"       from "DEFERRED"   [2010-05-28 Fri 01:13]
   - State "DEFERRED"   from "TODO"       [2010-05-22 Sat 13:33]
   :PROPERTIES:
   :ID:       2944B698-4588-431B-87FE-DC7EBBB158B8
   :CREATED:  [2010-05-03 Mon 23:01]
   :END:
** DONE Try converting Unicode only in the Ledger elision function
   - State "DONE"       [2009-01-24 Sat 00:14]
   - State "STARTED"    [2009-01-23 Fri 15:42]
   :PROPERTIES:
   :ID:       C73E9D6F-85B0-4686-8D23-CD3EB4E70E39
   :ARCHIVE_TIME: 2009-02-01 Sun 15:50
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2009-01-23 Fri 03:28]
   :END:
** DONE Use %32(" ") instead of %32| in the formatting codes
   - State "DONE"       [2009-02-17 Tue 18:07]
   :PROPERTIES:
   :ID:       382031D0-4E3D-48B5-9112-51C40F2C8528
   :CREATED:  [2009-02-17 Tue 07:22]
   :END:
** DONE Use --head to limit post generation (and speed up GenerateTests!)
   - State "DONE"       [2009-02-27 Fri 13:14]
   :PROPERTIES:
   :ID:       E02F85C9-B369-42AB-8463-0C9ACF601DA3
   :CREATED:  [2009-02-27 Fri 04:30]
   :END:
** DONE Using an invalid option should generate an error
   - State "DONE"       [2009-02-16 Mon 22:59]
   :PROPERTIES:
   :ID:       85C833A1-B710-484C-B892-EEE0E7240959
   :CREATED:  [2009-02-07 Sat 05:04]
   :END:
** DONE Valuation balance reports should balance to zero
   - State "DONE"       from "TODO"       [2009-11-19 Thu 17:43]
   This is done by adding valuation differences to Equity:Unrealized Gains
   :PROPERTIES:
   :ID:       6ED158B5-361C-4B5D-AED5-8EBE8F374C45
   :CREATED:  [2009-11-18 Wed 16:11]
   :END:
** DONE Value expressions should be able to access option values
   - State "DONE"       [2009-02-07 Sat 05:57]
   For example: "options.limit", would return HANDLER(limit_).str().
   :PROPERTIES:
   :ID:       21779153-CBB4-4B5B-B0A8-2E1C8DA08870
   :CREATED:  [2009-02-07 Sat 05:05]
   :END:
** DONE When Nafai uses -E bal, it shows *all* accounts
   - State "DONE"       [2009-02-17 Tue 05:29]
   :PROPERTIES:
   :ID:       56B4B9CF-AAC4-455A-887F-6E2B359CD4DE
   :CREATED:  [2009-02-16 Mon 20:19]
   :END:
** DONE When printing posts and xact, include post/pre comments
   - State "DONE"       [2009-02-01 Sun 22:11]
   - State "STARTED"    [2009-02-01 Sun 20:50]
   :PROPERTIES:
   :ID:       67E8E92B-25D5-4016-94F0-5C7F0EF05D89
   :CREATED:  [2009-02-01 Sun 15:40]
   :END:
** DONE When reporting an imbalance, show the amount to balance against
   - State "DONE"       from "TODO"       [2009-11-05 Thu 17:48]
   :PROPERTIES:
   :ID:       FE1E912D-7DFA-4489-98E9-8112B2B941CB
   :CREATED:  [2009-11-05 Thu 00:19]
   :END:
** DONE with ledger, "a or b and c" should be "(a or b) and c"
   - State "DONE"       [2009-02-09 Mon 18:27]
   :PROPERTIES:
   :ID:       25E8D531-9B09-4993-A8BB-CD8C5B88CCA5
   :CREATED:  [2009-02-09 Mon 15:12]
   :END:
** DONE [#C] [[bug:338][#338]] Issue with spaces in account names
   - State "DONE"       from "TODO"       [2010-06-19 Sat 14:02]
   :PROPERTIES:
   :ID:       BA07AFA9-DEED-4CB5-936A-E3177A474BFF
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :Message:  [[message://bug-338-1@http.newartisans.com/bugzilla/][{Bug 338} New: Issue with spaces in account names]]
   :CREATED:  [2010-06-15 Tue 21:57]
   :END:
** DONE [#C] [[bug:343][#343]] Journal with only periodic transactions gives an error
   - State "DONE"       from "TODO"       [2010-06-22 Tue 03:23]
   :PROPERTIES:
   :ID:       926EC43A-2A38-42B5-A1A7-170CAC1AC98F
   :CREATED:  [2010-06-16 Wed 18:15]
   :END:
** DONE [#C] Bug in showing budget balance
   - State "DONE"       [2009-02-24 Tue 15:10]
   I've been playing with budget feature in 2.4.  So far I've learned to make
   periodic income and expenses, and to show them balanced against actual
   transactions, which is very useful.  However I can't make it show how
   budgets for next month are balanced.  The obvious (for me) command:
   :OUTPUT:
   $ ledger -Bs --budget -p "next month" bal ^inc ^exp
   :END:
   shows nothing unless I add an empty transaction on someday next month, which
   is weird, and not any kind of transaction will work.  Are there better ways
   to do this?
   :PROPERTIES:
   :Submitter: <pomin5@gmail.com>
   :Version:  2.4.1
   :Ticket:   20
   :ID:       41716CDE-670C-4F41-825F-FE64B624AF97
   :CREATED:  [2007-12-10 Mon]
   :END:
** DONE [#C] Cleanup the cl-ledger repository, and put it on GitHub
   - State "DONE"       [2009-02-01 Sun 18:39]
   - State "STARTED"    [2009-02-01 Sun 15:59]
   :PROPERTIES:
   :ID:       EE45BD4D-E792-4668-98C5-B4CD50F9B3B7
   :CREATED:  [2009-02-01 Sun 03:03]
   :END:
** DONE [#C] Create a Merlin project for Ledger again
   - State "DONE"       [2008-10-30 Thu 20:52]
   - State "STARTED"    [2008-10-25 Sat 20:00]
   :PROPERTIES:
   :ID:       C57C3D54-917B-4FF1-BB22-804F14AE4AEC
   :ARCHIVE_TIME: 2008-11-28 Fri 16:45
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2008-10-21 Tue 14:24]
   :END:
** DONE [#C] CSV format can't handle balances or balance pairs
   - State "DONE"       [2009-02-08 Sun 02:31]
   :PROPERTIES:
   :ID:       FC689F1B-6155-462A-A170-E85ACEA42F79
   :CREATED:  [2009-02-07 Sat 05:52]
   :END:
** DONE [#C] ledger bal -s food should always show accounts matching regex
   - State "DONE"       [2009-02-08 Sun 15:10]
   :PROPERTIES:
   :ID:       9598C8CD-8830-4AD3-BC81-0368E39F88F7
   :CREATED:  [2009-02-06 Fri 03:26]
   :END:
** DONE [#C] Make sure Ledger's #include's are as minimal as possible
   - State "DONE"       [2009-02-15 Sun 23:20]
   :PROPERTIES:
   :ID:       857E3E86-674C-40CA-BDBD-70DFD477AAE7
   :CREATED:  [2008-08-14 Thu]
   :END:
** CANCELED [#A] [[bug:446][#446]] Segfault on wrong command directive
   - State "CANCELED"   from "TODO"       [2011-02-04 Fri 23:17]
   Please try this ledger:
   #+begin_src ledger
   !Account foo
   2010/09/20 bar
    Expenses:Mobile                    $1
    Assets:Bank
   !end

   2010/09/21 baz
    Assets:Bank                        $1
    Liabilities:Taxes
   #+end_src

   I get a "Segmentation fault" when trying an arbitrary report command
   (e.g. "balance"). Expected is an error message like "Wrong command
   directive !Account" (should be !account).
   :PROPERTIES:
   :ID:       AD8A9EB3-1220-4482-B0B0-0637C9F590E6
   :Submitter: GitHub <noreply@github.com>
   :Message:  [[message://4cfbded194771_50923ff7bdcc406c5b0@fe1.rs.github.com.tmail][{GitHub} Get segfault on wrong command directive {jwiegley/ledger GH-19}]]
   :CREATED:  [2010-12-06 Mon 12:42]
   :END:
** CANCELED [#A] The -V flag is producing a discrepancy when includes are used           :ATTACH:
   - State "CANCELED"   [2009-01-29 Thu 15:26] \\
     This was not a problem in Ledger itself.
   If you comment out AISChecking from main, the bug goes away.
   :SCRIPT:
   ./ledger -V reg AR:
   :END:
   :PROPERTIES:
   :Submitter: Russell Adams <RLAdams@AdamsInfoServ.Com>
   :Version:  2.6.1
   :Attachments: PrecisionBug.tar.gz
   :ID:       A98BFCBA-012D-4E18-9CBB-4D880CDBFE7E
   :CREATED:  [2008-10-05 Sun 20:59]
   :END:
** CANCELED 'derive_new_xact' shouldn't add accounts to the journal
   - State "CANCELED"   [2009-02-16 Mon 05:18]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   119
   :ID:       F229CDEA-1AED-4DBB-8DB6-24BEF30FC1E6
   :END:
** CANCELED --debug isn't taking a regular expression
   - State "CANCELED"   [2009-02-15 Sun 23:18]
   :PROPERTIES:
   :ID:       5936E070-F86A-4E52-B165-B70CE24C8109
   :CREATED:  [2008-07-24 Thu]
   :END:
** CANCELED [[bug:435][#435]] Re-anonymize speed-test.dat
   - State "CANCELED"   from "TODO"       [2010-11-26 Fri 13:50] \\
     I cannot re-anonymize this without the original file.
   :PROPERTIES:
   :ID:       98DE6EEC-E711-4C17-B07F-FD527CBC27A6
   :Submitter: Thierry Daucourt <thierry.daucourt@free.fr>
   :Message:  [[message://AANLkTi%3DNJtdJDwXnqTycnGdMmZq_DnZ8wyPqx56BZ2By@mail.gmail.com][Re: my privacy]]
   :CREATED:  [2010-08-16 Mon 16:31]
   :END:
** CANCELED Add comprehensive sanity checking to the XML parsers
   - State "CANCELED"   [2009-02-08 Sun 16:01]
   :PROPERTIES:
   :ID:       E2AC23FB-CCCF-4B2A-A925-43BD74EE30B0
   :CREATED:  [2009-01-24 Sat 04:47]
   :END:
** CANCELED Add to the commodity flags in the XML data
   - State "CANCELED"   [2009-02-08 Sun 16:04]
   ... whether it should never be downloaded or not (N).
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   109
   :ID:       FEAD4FEA-64FC-4DCA-8653-1C29DC6BC66E
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Another problem with XML output
   - State "CANCELED"   [2009-02-08 Sun 16:04]
   [[message://20060918231625.11184.qmail@web30708.mail.mud.yahoo.com][Re: Ledger 3 XML processing]]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   127
   :ID:       0AC36F03-A438-4547-8764-E2B90F6E2A1C
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED bal -l 'depth<=2' has no effect in the REPL
   - State "CANCELED"   [2009-03-03 Tue 03:02] \\
     It's because the REPL isn't honoring shell quoting syntax
   :PROPERTIES:
   :ID:       6DD90AF2-0088-4E4E-ACE4-FDD373B921A6
   :CREATED:  [2009-02-24 Tue 12:11]
   :END:
** CANCELED Binary cache is invalidated if LEDGER_FILE is changed
   - State "CANCELED"   [2009-02-08 Sun 15:59]
   - State "DEFERRED"   [2008-09-17 Wed 05:06] \\
     This bug is deferred until 3.0, since it is so rare there is no need to change
     it just yet.
   The following sequence of operations seemed to trigger it:
   :OUTPUT:
   export LEDGER_FILE=/home/albino/temp/ledger/ledger.dat
   ./ledger bal rent food movies -- freddie
   export LEDGER_FILE=/home/albino/temp/ledger/sample.dat
   ./ledger bal
   :END:
   :PROPERTIES:
   :Submitter: albino <#ledger>
   :Version:  2.6.1b
   :Ticket:   211
   :ID:       C65875E1-CF5D-4923-8546-9784EB08AC9D
   :CREATED:  [2008-08-05 Tue]
   :END:
** CANCELED Change Ledger to use shave
   - State "CANCELED"   [2009-02-24 Tue 01:01]
   :PROPERTIES:
   :ID:       54DAEF67-80D7-402A-BAF2-36EF86064DCD
   :CREATED:  [2009-02-24 Tue 00:22]
   :END:
** CANCELED Command output-xml
   - State "CANCELED"   [2009-02-08 Sun 16:04]
   As a corollary to the output command, have an output-xml command, which
   writes a complete Ledger file (including all automated xacts, etc) to an
   XML file.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   150
   :ID:       5D17A372-FB03-4E1D-9917-113E10211880
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Create an options_t object for inside of report_t
   - State "CANCELED"   [2009-02-19 Thu 14:47]
   :PROPERTIES:
   :ID:       8984D061-9749-4543-A5DB-C4B239F16F55
   :CREATED:  [2009-02-15 Sun 05:08]
   :END:
** CANCELED CSV output needs a column for every commodity
   - State "CANCELED"   [2009-02-08 Sun 02:30]
   :PROPERTIES:
   :ID:       1DB41F13-E745-4081-8DEA-57F986EF8113
   :CREATED:  [2009-02-07 Sat 16:12]
   :END:
** CANCELED Don't make uncommoditized amounts display differently
   - State "CANCELED"   from "TODO"       [2009-10-27 Tue 22:03]
   :PROPERTIES:
   :ID:       677CB18D-C7EE-446A-8123-57D80E3EFDD4
   :CREATED:  [2009-10-23 Fri 06:13]
   :END:
** CANCELED Finish implementing QIF parser, and document its use
   - State "CANCELED"   [2009-02-08 Sun 16:05]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   113
   :ID:       F7FFB324-9AC2-42A6-A6DD-38C02F30BEF7
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Finish my tickets script, so that I post from Org to Unfuddle
   - State "CANCELED"   [2009-03-06 Fri 04:12]
   :PROPERTIES:
   :ID:       988239F0-3A75-4C6E-B12B-0701DFE173F1
   :CREATED:  [2009-03-01 Sun 05:23]
   :END:
** CANCELED Get gdtoa's tests working under "make check"
   - State "CANCELED"   [2009-02-08 Sun 16:01]
   :PROPERTIES:
   :ID:       51B006B4-E3B4-41B6-865F-5E81926F8F73
   :CREATED:  [2009-01-23 Fri 18:36]
   :END:
** CANCELED Give an error if --input-date-format contains a space (or should it?)
   - State "CANCELED"   [2009-02-20 Fri 13:08]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   144
   :ID:       60B631E4-9819-4460-ABC0-6B789865646D
   :END:
** CANCELED Have ledger.el only use fancy TAB if there are no accounts
   - State "CANCELED"   [2009-02-15 Sun 23:17] \\
     I don't use fancy TAB, now it's fancy C-u TAB.
   :PROPERTIES:
   :ID:       545A16E5-49BE-44DB-AFAF-F0ABA87BF29E
   :CREATED:  [2009-02-12 Thu 19:12]
   :END:
** CANCELED Ledger doesn't know how to find include files for stdin
   - State "CANCELED"   from "TODO"       [2010-05-22 Sat 18:20] \\
     How could this be fixed without requiring a standard set of directories?
   If I have a file with relative includes and I pipe it to Ledger through
   stdin, it never knows how to find those includes.
   :PROPERTIES:
   :ID:       6F274577-80C7-42B1-923C-109F3BD5B8E2
   :CREATED:  [2010-04-11 Sun 14:18]
   :END:
** CANCELED Ledger is crashing on Thomas' computer when -O2 is used
   - State "CANCELED"   [2009-02-19 Thu 14:46]
   - Note taken on [2008-10-26 Sun 00:44] \\
     When putting printf statements, the statements in my main() routine are
     executed up till the one right before the parse_and_report call. In the
     parse_and_report function, I put another printf statement before any statement
     is executed, but I don't see this ... Is it possible that there is something
     wrong with the function call itself or might it be the case that output is not
     yet synced before ledger segfaults?
   :PROPERTIES:
   :ID:       00DA5F10-6B76-4CB0-89E3-152A80BFBCED
   :CREATED:  [2008-10-06 Mon 19:15]
   :END:
** CANCELED Make !rex reverse a regexp
   - State "CANCELED"   [2009-01-29 Thu 15:33] \\
     I now use "not rex".
   This is instead of -rex, allowing options to appear anywhere on the line.
   It also means that something has to be done about the meaning of "--".
   :PROPERTIES:
   :ID:       72B2202C-EC63-4A2E-A5C9-0C9A4991FB06
   :CREATED:  [2008-08-14 Thu]
   :END:
** CANCELED Make balance assertions be partly date dependent
   - State "CANCELED"   from "TODO"       [2010-02-05 Fri 00:02]
   They should be date dependent for differing days, but for transaction on
   the same day, they should be order dependent.
   :PROPERTIES:
   :ID:       E1B3CE9A-6305-4FFD-B916-6DF6D418A4B7
   :CREATED:  [2010-02-04 Thu 17:04]
   :END:
** CANCELED Make balance assignment failures into a warning
   - State "CANCELED"   from "DONE"       [2009-11-02 Mon 01:41] \\
     Instead, I've split this into assignments vs. assertions, where assertions are
     errors.
   - State "DONE"       from "TODO"       [2009-10-26 Mon 19:54]
   :PROPERTIES:
   :ID:       B3F65D45-C77F-4E01-A8FC-3EDC92A9CB45
   :CREATED:  [2009-10-23 Fri 06:13]
   :END:
** CANCELED Make every Ledger object able to render itself as XML
   - State "CANCELED"   [2009-02-08 Sun 16:01]
   :PROPERTIES:
   :ID:       B25DC71B-87DB-453F-87E9-D2015CCBAB26
   :CREATED:  [2009-01-24 Sat 04:01]
   :END:
** CANCELED Nuke the doc/INSTALL file, since it's not accurate
   - State "CANCELED"   [2009-03-19 Thu 03:41]
   :PROPERTIES:
   :ID:       A441A43B-25F6-42C4-B950-CF54A7C55F6F
   :ARCHIVE_TIME: 2009-04-12 Sun 20:34
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-03-11 Wed 18:58]
   :END:
** CANCELED Odditing in name of XML namespaces in Ledger
   - State "CANCELED"   [2009-02-08 Sun 16:05]
   [[message://20060304.181355.96677625.arb46@cornell.edu][e-mail]] one
   [[message://20060802015747.27838.qmail@web30706.mail.mud.yahoo.com][e-mail]] two
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   122
   :ID:       9F69B516-9F57-4204-9EF2-BA0AB42B1401
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Pass the default report object into the textual parser
   - State "CANCELED"   from "TODO"       [2009-11-05 Thu 04:17]
   :PROPERTIES:
   :ID:       048E2C5A-8AFA-4CF2-A1E6-F8693F96A9EE
   :CREATED:  [2009-11-02 Mon 15:50]
   :END:
** CANCELED Periodic budgeting problem when Yxxxx is used
   - State "CANCELED"   [2009-02-24 Tue 04:07]
   Yeah, it works as expected for me as well.  I have since changed my ledger
   files to use YYYY/MM/DD strings.  In the past I was using the Yxxxx
   directive with MM/DD strings for each entry.  That might have had something
   to do with it... or there was some other problem with my ledger files.
   :PROPERTIES:
   :Submitter: <edavis@insanum.com>
   :Version:  2.6
   :Ticket:   21
   :ID:       F2FC7C2B-0CB1-47E7-AE2E-C9E744A47927
   :CREATED:  [2007-12-10 Mon]
   :END:
** CANCELED Problem with piping input to ledger
   - State "CANCELED"   [2009-02-19 Thu 14:49]
   I decided to just go ahead and push my whole ledger file through "print".
   At first I had been a little nervous about the possibility that I might goof
   up somehow and lose some data.  But it seems to have worked okay: I did a
   spot check of the result by verifying that my checking account and credit
   card accounts still end up with the same final balance as they did before.
   Also, I typically save any edits to my ledger file in a Subversion
   repository, so I can always get back to a previous version if I need to.

   So now I do have a nice, clean file.

   After I got your message, I did try the "output" command.  I guess I didn't
   understand epostly what it's supposed to be doing, because it didn't quite
   seem to work as I expected.

   If I type:
   :SCRIPT:
   ledger -f foo output foo
   :END:
   is it supposed to rewrite foo?  It didn't seem to do that.  Instead, it
   seems to write its output onto stdout.  And not only that, it seems to
   duplicate the last xact in the file.

   For example, if this is my sample file foo:
   :DATA:
   2006/01/01 * Xyzzy Mortgage Co.
    Assets:Bank:Checking                  $-1,000.00
    Expenses:Interest:Mortage              $950.00
    Liabilities:Mortgage                     $50.00

   Y2005

   01/01 * (1830) TPC
    Expenses:Phone                  $100.00
    Assets:Bank:Checking

   2/3 (1832) ABC Dept Store
    Expenses:Clothing           $100.00
    Assets:Bank:Checking
   :END:

   Then when I run `ledger -f foo output foo` the output I get is this:
   :OUTPUT:
   2006/01/01 * Xyzzy Mortgage Co.
    Assets:Bank:Checking                  $-1,000.00
    Expenses:Interest:Mortage                $950.00
    Liabilities:Mortgage                      $50.00

   Y2005

   2005/01/01 * (1830) TPC
    Expenses:Phone                           $100.00
    Assets:Bank:Checking

   2005/02/03 (1832) ABC Dept Store
    Expenses:Clothing                        $100.00
    Assets:Bank:Checking
   2/3 (1832) ABC Dept Store
    Expenses:Clothing           $100.00
    Assets:Bank:Checking
   :END:

   If instead I run `ledger -f foo output foo2`, then I get this:
   :OUTPUT:
   Error: Journal does not refer to file ''
   :END:
   So I guess that wan't what I was supposed to do.

   Anyway, this is all just academic, 'cuz as I say I now have a nice, cleaned
   up file, thanks to the "print" command.
   :PROPERTIES:
   :Submitter: <arb46@cornell.edu>
   :Version:  2.6
   :Ticket:   27
   :ID:       D3820740-8BFB-4234-8125-DE813A713032
   :CREATED:  [2007-12-10 Mon]
   :END:
** CANCELED Rationalize register and balance total calculation
   - State "CANCELED"   [2009-03-03 Tue 03:02]
   Rather than keeping the running total for the register report in each
   posting's xdata, perhaps it should be kept in the grand total for the master
   account?
   :PROPERTIES:
   :ID:       E242CF42-062A-4B4C-A1A8-390465448F73
   :CREATED:  [2009-03-02 Mon 16:11]
   :END:
** CANCELED There are a few thorny issues remaining with the binary cache
   - State "CANCELED"   [2009-02-08 Sun 16:06]
   1. What happens to value expressions that have been compiled?  The FUNCTION
      operand must remember the name of the function it was compiled to; but
      even then, how can I recompile and maintain the same environment as the
      original point of definition?

   2. Base commodities no longer exist in their own data structure, but use
      shared_ptr to track multiple accesses.  How to write out this unwritten
      structure?
   :PROPERTIES:
   :ID:       69B51A07-5E5F-42F9-AB97-CEECAF4BB085
   :CREATED:  [2008-08-15 Fri]
   :END:
** CANCELED Use &lt; when writing out XML, instead of <
   - State "CANCELED"   [2009-02-08 Sun 16:06]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   143
   :ID:       BD664021-204A-4F16-B4F7-3ECEBA808530
   :END:
** CANCELED Using -f - gives drewr a bus error
   - State "CANCELED"   [2009-02-15 Sun 23:18]
   - State "TODO"       [2009-02-11 Wed 03:53]
   - State "STARTED"    [2009-02-10 Tue 05:50] \\
     I was unable to reproduce this.
   :PROPERTIES:
   :ID:       D4C96EA8-57B3-43D8-A136-8FDB2309B011
   :CREATED:  [2009-02-10 Tue 00:55]
   :END:
** CANCELED [#C] Budgeting oddness
   - State "CANCELED"   [2009-03-03 Tue 05:20]
   - State "WAITING"    [2009-02-24 Tue 15:08] \\
     I'm waiting on Tim to get back to me.
   I am trying to understand the budgeting information in the ledger
   documentation, as well as to understand some basic syntax in my ledger file
   and why it does not appear to be working correctly.  If I have a ledger file
   with:
   :DATA:
   ~Monthly
   Exp:....   $1000.00
   Exp:....   $500.00
   Exp:....   $250.00
   Exp:....   $1000.00
   Assets
   :END:
   [with real categories blanked out, of course], and Assets at the end, what
   does this imply?  That expenses will be withdrawn/balanced against assets?
   What happens if I have no expenses recorded in my ledger, e.g., what is the
   intended behavior of the budgeting functionality?

   In addition, the following three entries seem to be causing somewhat odd
   behavior:
   :DATA:
   2006/05/23
     Assets:Checking:xxxx             $1259.44
     Equity:Opening Balance

   2006/05/23
     Assets:Savings:xxxx               $711.31
     Equity:Opening Balance

   2006/05/23
     Expenses:Loans:xxxx               $750.00
     Assets:Checking:xxxx
   :END:

   When I perform:
   :OUTPUT:
   % ledger -f ~/ledger.txt -MAs bal ^expenses
              $375.00  Expenses:Loans
              $750.00    xxxx
   --------------------
              $375.00
   :END:
   and these are the only three entries in the ledger file, did I miss
   something as far as the intended behavior?  Is there a bug somewhere in my
   libgmp, etc?

   I'm on Mac OS X 10.4 on an Intel machine.
   :PROPERTIES:
   :Submitter: Tim <tim@scarybright.org>
   :Version:  2.6
   :Ticket:   18
   :ID:       D112A53E-1D18-44F4-8B9E-6224A4EC8F72
   :CREATED:  [2007-12-10 Mon]
   :END:
** CANCELED [#C] Preserve file comments in the XML output
   - State "CANCELED"   [2009-02-08 Sun 16:07]
   I would like to use the XML format for doing some transformations to my
   data. Not just reformatting for reporting, but actual changes to my data.

   This means I would like to export to XML, then do an XSLT transformation,
   and then re-import it back into ledger format. (Throw away my original
   ledger file, and replace it with the transformed version.)

   My problem is that comments don't seem to be preserved in the XML
   format. Well, the end-of-line comments on (what you call) postings
   do. (They come out as <tr:note> elements.) But whole-line comments do not.

   I wish these whole-line comments could somehow be preserved in the XML
   format.
   :PROPERTIES:
   :Version:  2.5
   :Ticket:   41
   :ID:       D27098A4-647A-4EEA-B0B8-3088E069214D
   :CREATED:  [2008-04-05 Sat]
   :END:
** CANCELED [#C] Trouble reading an ofx file                                             :ATTACH:
   - State "CANCELED"   [2009-02-15 Sun 23:20]
   I'm using ledger from CVS and am having some trouble reading an OFX file
   that I downloaded from my bank.  The command I'm using is
   :OUTPUT:
   $ ledger -f <ofx file> print
   Error: Please specify ledger file using -f or LEDGER_FILE environment variable.
   :END:
   What might be going on?  As far as I can see, the OFX file is well-formed.
   :PROPERTIES:
   :Submitter: <alama@stanford.edu>
   :Version:  2.4.1
   :Ticket:   11
   :ID:       D9CAC376-E751-4DC6-841B-70217748AA20
   :Attachments: 20060630-xxxxxx0779.ofx
   :CREATED:  [2007-12-10 Mon]
   :END:
** CANCELED [#C] Using --reconcile with -20 causes a segmentation fault
   - State "CANCELED"   [2009-02-15 Sun 23:19]
   Using the trunk version:
   :OUTPUT:
   ./ledger -f sample.dat --reconcile -20.00 --reconcile-date 2007/05/27 reg master
   :END:
   which leads to a segmentation fault.

   Replace -20.00 with a number below 1 (e.g. 0.99), then that's OK.

   My gcc version:
   :OUTPUT:
   $ gcc -v
   Reading specs from /usr/lib/gcc/i686-magic-linux/3.4.6/specs
   Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-java-awt=gtk --host=i686-magic-linux
   Thread model: posix
   gcc version 3.4.6 20060404 (MagicLinux 3.4.6-2mgc)
   :END:
   :PROPERTIES:
   :Submitter: Levin <zslevin@gmail.com>
   :Version:  2.6
   :Ticket:   4
   :ID:       567B5118-7A77-42B9-A1CD-C5DA688AC406
   :CREATED:  [2007-10-29 Mon]
   :END:
** WONTFIX [[bug:160][#160]] Attached file should print out Unrealized Gains in the report            :ATTACH:
   - State "WONTFIX"    from "TODO"       [2010-06-09 Wed 08:15] \\
     The aim of --unrealized is to show how much your unrealized gains or losses
     were, not to balance all possible values.
   It should print out:
   :OUTPUT:
                      0  Assets
               $-800.00    Brokerage
                $800.00    Checking
               $-100.00  Equity:Unrealized Gains
                $100.00  Equity:Unrealized Losses
   --------------------
                      0
   :END:
   Once this is fixed, correct test/baseline/opt-unrealized.test.
   :PROPERTIES:
   :ID:       22AA1522-30A0-403F-B16A-B8F674AC9125
   :Attachments: bug.dat
   :CREATED:  [2009-11-25 Wed 04:47]
   :END:
** WONTFIX [[bug:205][#205]] Specifying commodity price and total
   - State "WONTFIX"    from "TODO"       [2010-06-08 Tue 17:54]
   - Note taken on [2010-06-08 Tue 17:39] \\
     Martin: [ Our responses just collided; anyway, yes, I agree with you.
     Thanks for your patience ]

     I believe my last message actually showed a possible solution.  If I really
     cared about it, I could put it into ledger like this:
   - Note taken on [2010-06-08 Tue 17:39] \\
     My understanding is that "what you paid" is whatever balances the
     transaction to zero.  That's it.  Anything other than that is a notional
     idea on your side of the table.

     Now, I see what you're saying in that you want to reflect the fact that
     your broker charged you for the rounding.  You can, if you wish,
     incorporate this by changing the cost of the exchange and then adding a
     posting to indicate the rounding.  But having a special syntax to
     incorporate both "versions" of the transaction is not something I think I
     can support.
   - Note taken on [2010-06-08 Tue 17:39] \\
     Martin: I paid 11506.94 EUR for 533 AAPL.  That's a fact.  So I could
     simply stick 553 AAPL @@ 11506.94 EUR into ledger and be done with it.

     However, I feel this is not the whole story.

     Because what I really did was to buy 533 AAPL at a price of 21.589 EUR
     each.  And this is 533 * 21.589 = 11506.937.

     But there's no way to pay 11506.937, so my broker rounded it to 11506.94,
     which I then paid.

     So I can put 553 AAPL @@ 11506.94 EUR into ledger but I feel this
     slightly misrepresents what happened.  553 AAPL @@ 11506.94 EUR says that
     I bought 553 at a price of 21.589005628517825.  Wheras in reality I paid
     21.598 a share plus 0.003 of rounding.

     Do you see the difference?

     It's really just about this semantic difference of what I'm paying for
     (i.e.  X for Y shares vs X for Y shares plus 0.003 rounding).

     But I agree that this semantic difference doesn't really matter IRL and
     so I'm fine with you closing this bug.  However, it seems that I have not
     been able yet to express what I mean... hopefully this explanation was
     clearer.
   - Note taken on [2010-06-08 Tue 17:39] \\
     But did you really lose 0.003?  Becasue you said you were paid 11506.94.
     It does happen that your personal exchange rate was different from the
     market rate.  But this should be revealed to you in the -V report.
   - Note taken on [2010-06-08 Tue 17:39] \\
     Martin: No, I don't have a preference of @ over @@.  It's just that I
     feel that I'm losing some information.  When I put
   - Note taken on [2010-06-08 Tue 17:39] \\
     Hmm..  When you use @@, Ledger sets the "cost" of the posting to the
     right-hand amount.  It then calculates the per-unit amount for you, based
     on this cost.  What I'm not understanding is why this calculation is
     insufficient, or why you want to specify a different amount than would be
     calculated -- since Ledger now knows exactly how much you paid in both
     currencies, owing to the use of @@.  Is it just that you prefer to use @
     rather than @@?

     In general, @ is for when you know the unit price, and @@ is for when you
     know the total price.  Use of either one causes the other to be
     calculated.  Internally, Ledger only stores the total price, so if you
     use @ it will compute the per-unit price, but if you use @@ it stores the
     amount you specify directly.

     As for tracking the fraction rounding adjustment, can you give an example
     of when this would be needed?  I mean, since you used @@, all sums are
     known to their exact figure, are they not?
   - Note taken on [2010-06-08 Tue 17:38] \\
     Martin: Ok, here's another example.  Let's say I do my expenses.  I put
     in expenses of 11.04 GBP and get paid in EUR at a rate of 1.129.  11.04 *
     1.129 = 12.46416 EUR but my employer will obviously round this to 11.46
     EUR.

     When I now put 11.04 GBP @ 1.129 EUR into ledger, it will not round but
     track 12.46416.  So when I put this twice, ledger will end up with a
     balance of 24.93 EUR but I only got paid 24.92 EUR due to the rounding.

     So my only solution right now is to specify the total with @@, but imho
     I'm losing some info here because I cannot specify the exchange rate
     here.  So that's my I had the idea for XX @ YY @@ ZZZ.

     I guess essentially what I'd like to do is use @ 1.129 EUR but tell
     ledger "don't keep all the digits but round it to 2 digits".
   - Note taken on [2010-06-08 Tue 17:38] \\
     Martin: My thinking with
   - Note taken on [2010-06-08 Tue 17:38] \\
     I don't quite understand what you're trying to achieve.  Is it just that
     you want the per-share price documented in your Ledger file?  If so, then
     the latter solution you gave is the best I can think of.

     Ledger doesn't do any rounding except at the time of display.  If you use
     @@ to specify the actual cost that you paid, it calculates the per-unit
     price based on that, and rounds it at reporting time based on the display
     characteristics of the commodity it's priced in.
   #+begin_src ledger
       Assets:Broker:Depot          533 AAPL @ 21.589 EUR
       Expenses:Adjustment                      0.003 EUR ; rounding
       Assets:Broker:Current
   #+end_src
     but I don't find that very elegant, so I guess I'll just go with 533 AAPL
     @@ 11506.94 EUR.
   #+begin_src ledger
         533 AAPL @@ 11506.94 EUR
   #+end_src
     into ledger, this means: I bought 533 AAPL for 11506.94 EUR or
     21.589005628517825 a piece.  But this doesn't reflect reality 100%.  What
     really happened is that I bought 533 AAPL for 21.589 EUR a piece and then
     they added 0.003 of rounding, leading to a total of 11506.94 EUR.

     When I use @@, I lose the information that these 0.003 EUR were caused by
     rounding.  Is this important?  No, at the end of the day it doesn't
     matter at all and as I said above I'm happy to just use @@.  But do I
     feel that I 100% represent reality with @@?  No...
   #+begin_src ledger
        533 AAPL @ 21.589 EUR @@ 11506.94 EUR
   #+end_src
     was that I'd like to tell ledger:
      - I bought 533 AAPL shares at 21.589 EUR
      - and I paid 11506.94 EUR for it.
     and for ledger to say:
      - but hold on, 11506.94 / 533 = 21.589005628517825
        so I'll automatically adjust this for you and create
        an adjustment from 21.589 to 21.589005628517825,
     And then ledger reg or pricemap or so would show that adjustment.

     Anyway, I can live with
   #+begin_src ledger
       533 AAPL @@ 11506.94 EUR ; @ 21.589 EUR
   #+end_src
     if you think this scenario is not worth supporting in ledger.
   Let's say I buy 533 AAPL at a price of 21.589 each.  This comes out at
    11506.937.  However, my broker rounds this up to 11506.94.  Is there a way
    I can specify both the individual price as well as the total I actually
    paid?

    In other words, I'd like to say something like:
   #+begin_src sh
       Assets:Fund       533 AAPL @ 21.589 EUR @@ 11506.94 EUR
   #+end_src
    but this is invalid syntax.

    Is it possible to express this somehow or is the best solution
    something like
   #+begin_src sh
       Assets:Fund       533 AAPL @@ 11506.94 EUR ; @ 21.589
   #+end_src
   :PROPERTIES:
   :ID:       4A7C9359-EBAC-402D-81DC-BE4985DA0440
   :Message:  [[message://20100325220253.GA23265@jirafa.cyrius.com][Specifying commodity price and total]]
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :CREATED:  [2010-03-26 Fri 22:17]
   :END:
** WONTFIX [[bug:214][#214]] Question about credit card transactions
   - State "WONTFIX"    from "TODO"       [2010-06-01 Tue 18:02]
   I am using ledger v2.6.2 on Ubuntu9.10 Karmic Koala. I am trying to do a
   script (bash) to show a pie chart that show where I spent my money payed in
   my credit card in this current month. I was trying to start with:
   #+begin_src sh
   ledger --totals --effective -r --sort d -d "d>[2010/5/04]"  -e 2010/6/05  reg Liabilities:CREDITCARD:VISA
   #+end_src
   :OUTPUT:
   2010/05/06 Happy Hour Prime     Expenses:Bar_Rest           $-80.11 $-2930.41
   2010/05/06 Matambre             Ex:Al:Trabalho              $-17.28 $-2947.69
   ...... (hidden)
   2010/06/03 Fonte Sta Efigenia.. Expenses:Eletro             $-11.00 $-1860.65
   2010/06/04 Teste credit card    Expenses:Eletro            $-100.00 $-1960.65
   2010/07/04 Viagem Niver Mae     Li:CREDITCARD:VISA          $142.00 $-1818.65
   2010/07/04 Presente Niver Dani  Li:CREDITCARD:VISA           $49.96 $-1768.69
   2010/07/04 Caixa de som Renau.. Li:CREDITCARD:VISA           $93.34 $-1675.35
   :END:

   After that. I am think to add "-j" option and use gnuplot to do the job.

   The first problem is that option "-r" does not output related accounts when
   I use "--effective" options together. Bellow, It follows a example of my
   ledger file
   #+begin_src ledger
   2010/05/06 *  Happy Hour Prime
    Expenses:Bar_Rest                           $80.11
    Liabilities:CREDITCARD:VISA

   2010/05/06 *  Matambre
    Expenses:Alimentacao:Trabalho               $17.28
    Liabilities:CREDITCARD:VISA

   2010/04/14 *  Caixa de som Renault
    Expenses:Carro:Celta                       $280.00
    Liabilities:CREDITCARD:VISA                $-93.33 ; [=2010/05/04]
    Liabilities:CREDITCARD:VISA                $-93.33 ; [=2010/06/04]
    Liabilities:CREDITCARD:VISA                $-93.34 ; [=2010/07/04]
   #+end_src
   :PROPERTIES:
   :ID:       F5956145-BD8C-46EF-94FF-01953799EC47
   :Submitter: leandroohf <leandroohf@gmail.com>
   :Message:  [[message://8ecce8dd-97bc-49d3-871b-cc55fc40b193@v12g2000prb.googlegroups.com][credit card]]
   :CREATED:  [2010-05-31 Mon 14:38]
   :END:
** WONTFIX [[bug:220][#220]] In output intermediate, do not reduce prices to one per day
   - State "WONTFIX"    from "TODO"       [2010-06-01 Tue 17:05]
   Just output them all in the proper order.
   :PROPERTIES:
   :ID:       412B13B5-9155-433F-B7AA-26F226D93D20
   :CREATED:  [2010-05-31 Mon 01:13]
   :END:
** WONTFIX [[bug:326][#326]] Strip out quotes in the options parser
   - State "WONTFIX"    from "TODO"       [2010-06-24 Thu 01:54]
   This allows people to copy and paste option settings directly into their
   .ledgerrc file.
   :PROPERTIES:
   :ID:       8EB6E995-6815-4EC4-9019-9B162DE27FE1
   :Submitter: ed <ed.temp.01@gmail.com>
   :Message:  [[message://1d1ff6f1-3445-4d4b-9ef0-dfd510405e47@u26g2000yqu.googlegroups.com][Re: Init file doesn't support file --input-date-format]]
   :CREATED:  [2010-06-11 Fri 17:25]
   :END:
** WONTFIX [[bug:351][#351]] print command puts tag in same line as payee
   - State "WONTFIX"    from "TODO"       [2011-06-20 Mon 00:34] \\
     This is actually by design, if the note (whatever follows ;) is short
     enough.  The object of print is not to exactly replicate what you wrote
     in the ledger file.
   :PROPERTIES:
   :ID:       EAF396BD-3A6C-4209-82C2-08D102A725B6
   :CREATED:  [2010-06-20 Sun 14:51]
   :ARCHIVE_TIME: 2011-06-20 Mon 00:35
   :ARCHIVE_CATEGORY: Bugs
   :END:
** WONTFIX Auto-remainder of setting an account's balance broken
   - State "WONTFIX"    from "TODO"       [2010-01-21 Thu 04:29] \\
     This is expected behavior now.
   :PROPERTIES:
   :ID:       5A8CB6B5-E888-4B6D-9916-6521ABA0A746
   :Message:  [[message://20100103125340.GA4886@kerneis.info][Auto-remainder of setting an account's balance broken]]
   :CREATED:  [2010-01-09 Sat 21:07]
   :END:
** WONTFIX Change all the source code to utf-8
   - State "WONTFIX"    [2008-07-13 Sun 21:45] \\
     The source code itself doesn't use international characters!
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   141
   :ID:       D00D1F5A-8BD5-43B5-B8E0-1FEBB98F610A
   :CREATED:  [2008-04-11 Fri]
   :END:
** WONTFIX Errors when compiling ledger 2.6.2 on Fedora 11
   - State "WONTFIX"    from "TODO"       [2010-01-18 Mon 03:04] \\
     2.6.2 bugs are no longer being fixed.
   - Note taken on [2010-01-09 Sat 21:06] \\
     All required '-dev' or '-devel' libraries installed/updated to the best of my
     knowlege. gcc is 4.4.1, kernel is 2.6.30, and while my major job function is
     'accountant', my education (20+ years ago) is technical, so I'm the designated
     IT guy -- but still not a programmer.
   :PROPERTIES:
   :ID:       1C6B78C7-E0B4-4515-A172-5DE17470F9F0
   :Message:  [[message://20100104044948.GA14665@atom][problems compiling with python support on debian squeeze]]
   :CREATED:  [2010-01-09 Sat 21:06]
   :END:
** WONTFIX Precision error
   - State "WONTFIX"    from "TODO"       [2009-10-26 Mon 00:52] \\
     This is expected behavior, based on the fact that a 3 decimal place dollar
     value was used before the transaction giving the error.
   [[message://1253475930.3701.41.camel@mithos.talinet.net]]
   :PROPERTIES:
   :ID:       77D3A0A9-35DF-4A4D-8469-8928E3954441
   :CREATED:  [2009-10-03 Sat 03:23]
   :END:
** WONTFIX Space is not allowed in quoted query regexps
   - State "WONTFIX"    from "STARTED"    [2010-05-22 Sat 21:12] \\
     This can be worked around quoting regular expression syntax:

       ledger reg "/one two three/"
   :LOGBOOK:
   CLOCK: [2010-05-22 Sat 21:09]--[2010-05-22 Sat 21:11] =>  0:02
   :END:
   :PROPERTIES:
   :ID:       CB883B26-C0A9-41A6-9E1D-3C97A93043FB
   :Message:  [[message://bf53d15e-c8ea-4771-a3df-bed7883f56b5@k17g2000yqb.googlegroups.com][regular expression argument that contains spaces]]
   :CREATED:  [2010-03-01 Mon 16:13]
   :END:
** WORKSFORME [#A] [[bug:203][#203]] Problem with fixed commodities and rounding
   - State "WORKSFORME" from "TODO"       [2010-06-08 Tue 05:13]
   I run the following command and get an error
    :OUTPUT:
    $ ~/personal/workspaces/ledger/ledger -f ledger.dat bal
    While parsing file "ledger.dat", line 37:
    While balancing transaction from "ledger.dat", lines 35-37:
    2010/01/22  Marketing B
        Expenses:Marketing              55EUR {=$1.81818181818}
        Liabilities:Accounts Payable    -$100
    Unbalanced remainder is:
                    $10
    Amount to balance against:
                   $110
    Error: Transaction does not balance
    :END:

    From what I understand I should be using the rate 1.81818181818 to convert
    the 55 euros into 100 dollars.  However this doesn't seem to be happening.
    Here is the full ledger file:
   #+begin_src sh
    2009/01/01      Invoice A
           Assets:Accounts Payable         $1000
           Income:Sales

    2009/01/21      Payment Invoice A
           Assets:NAB                      $1000
           Assets:Accounts Receivable

    2009/01/22      Pay expenses
           Expenses:Payroll                $800
           Assets:NAB

    2009/01/22      Marketing A
           Expenses:Marketing              50EUR {=$2}
           Liabilities:Accounts Payable    -$100

    2009/01/23      Pay MC Marketing
           Assets:NAB                      -$100
           Liabilities:Accounts Payable

    ;-------------------------------------------------------

    2010/01/01      Invoice B
           Assets:Accounts Payable         $1000
           Income:Sales

    2010/01/21      Payment Invoice B
           Assets:NAB                      $1000
           Assets:Accounts Receivable

    2010/01/22      Pay expenses
           Expenses:Payroll                $800
           Assets:NAB

    2010/01/22      Marketing B
           Expenses:Marketing              55EUR {=$1.81818181818}
           Liabilities:Accounts Payable    -$101

    2010/02/23      Pay MC Marketing
           Assets:NAB                      -$100
           Liabilities:Accounts Payable
   #+end_src

    Hope someone can explain to me what I'm doing wrong.

    I also tried to use the fixed syntax:
   #+begin_src sh
    fixed EUR $1.81818181818
    ....
    end fixed
   #+end_src
    but that always reported a parse error.
   :PROPERTIES:
   :ID:       61AE3B0B-751B-4EBD-98BB-5DB3BB7782AA
   :Message:  [[message://1582b9d81002162123g2cb7ddf5vef3739a46e277699@mail.gmail.com][Problem using the fixed rate commodity syntax]]
   :Submitter: Peter Ross <peter@emailross.com>
   :CREATED:  [2010-02-17 Wed 01:39]
   :END:
** WORKSFORME [#A] [[bug:332][#332]] Assert failure when using tag in a limit expression
   SCHEDULED: <2010-06-14 Mon>
   - State "WORKSFORME" from "TODO"       [2010-06-14 Mon 21:06]
   - State "TODO"       from "WORKSFORME" [2010-06-14 Mon 17:32]
   - State "WORKSFORME" from "DONE"       [2010-06-13 Sun 18:59]
   - State "DONE"       from "TODO"       [2010-06-13 Sun 18:59]
   :PROPERTIES:
   :ID:       BD7C93C2-5C20-4A48-9BEE-5E3975D82D34
   :CREATED:  [2010-06-13 Sun 05:32]
   :END:
** WORKSFORME [#A] [[bug:426][#426]] ledger --budget reg|wc -l depends on order of transactions
   - State "WORKSFORME" from "TODO"       [2011-06-20 Mon 00:15] \\
     Both reports generate 14 lines for me.
   I'm experiencing a weird behaviour with the test ledger file to be found at
   the end of this message. Saving it as the default ledger file, and running
   #+begin_src sh
   ledger -b 2010/09 -e 2010/12 --budget --sort date reg Dépense
   #+end_src
   through Ledger 3.0.0-20100623 displays only 8 lines.  Now, surprisingly
   enough, when moving the transaction "2010/11/05 * FAI" below the
   transaction "2010/08/05 * FAI", the same command
   #+begin_src sh
   ledger -b 2010/09 -e 2010/12 --budget --sort date reg Dépense
   #+end_src
   displays 14 lines.

   #+begin_src ledger
   ; -*- ledger -*-
   
   N €
   C 655957 FCFA = 1000 €
   
   ~ Monthly
    Dépense:Nourriture                      300
    Dépense:Transport                       300
    Dépense:Communication:Internet           23
    Actif:Disponibilité
   
   ; Dépenses régulières
   2010/09/06 * FAI
    Dépense:Communication:Internet       23.92
    Actif:Disponibilité:Ccp02
   2010/11/05 * FAI
    Dépense:Communication:Internet            23.92
    Actif:Disponibilité:Ccp02
   2010/08/05 * FAI
    Dépense:Communication:Internet       23.92
    Actif:Disponibilité:Ccp02
   
   2010/11/01 * FAI2
    Dépense:Communication:Internet      10.75
    Actif:Disponibilité:Ccp02
   2010/11/01 * Visa ?
    Dépense:Frais de service bancaire              1
    Actif:Disponibilité:Ccp02
   2010/10/04 * FAI2
    Dépense:Communication:Internet      10.92
    Actif:Disponibilité:Ccp02
   2010/10/04 * Visa ?
    Dépense:Frais de service bancaire              1
    Actif:Disponibilité:Ccp02
   2010/09/03 * FAI2
    Dépense:Communication:Internet      11.71
    Actif:Disponibilité:Ccp02
   2010/09/03 * Visa ?
    Dépense:Frais de service bancaire              1
    Actif:Disponibilité:Ccp02
   2010/08/03 * FAI2
    Dépense:Communication:Internet      11.49
    Actif:Disponibilité:Ccp02
   2010/08/03 * Visa ?
    Dépense:Frais de service bancaire              1
    Actif:Disponibilité:Ccp02
   2010/07/05 * FAI2
    Dépense:Communication:Internet      12.11
    Actif:Disponibilité:Ccp02
   2010/07/05 * Visa ?
    Dépense:Frais de service bancaire              1
    Actif:Disponibilité:Ccp02
   #+end_src
   :PROPERTIES:
   :ID:       048246B7-CA7A-42E7-A460-8FB02EDAA016
   :Submitter: Nicolas Girard <girard.nicolas@gmail.com>
   :Message:  [[message://3547a240-4f80-405b-8b8a-e04717b583d9@t13g2000yqm.googlegroups.com][ledger --budget reg |wc -l depends on the order of the transactions]]
   :CREATED:  [2010-11-10 Wed 16:29]
   :ARCHIVE_TIME: 2011-06-20 Mon 00:25
   :ARCHIVE_CATEGORY: Bugs
   :END:
** WORKSFORME [#A] [[bug:437][#437]] Crash when using automatic rules                                :blocker:
   - State "WORKSFORME" from "TODO"       [2011-06-20 Mon 00:23] \\
     I cannot reproduce this.
   - Note taken on [2011-06-15 Wed 01:01] \\
     It doesn't look to be very informative:
     :OUTPUT:
     (gdb) backtrace
     #0  0x00000001000fd462 in ledger::post_t::date ()
     #1  0x000000010010af79 in ledger::(anonymous
     namespace)::get_wrapper<&(ledger::(anonymous
     namespace)::get_date(ledger::item_t&))> ()
     :END:
  
     If that helps, cool. Otherwise I'm building next right now with debugging
     symbols and I'll let you know if it's still happening.
   - Note taken on [2011-02-12 Sat 14:15] \\
     Interesting. I built the next branch from scratch and found a much more
     useful error message. I have a periodic transaction that it can't parse:
     :OUTPUT:
     While parsing file "/Users/peter/ledger.txt", line 29:
     While evaluating value expression:
      date
     While applying automated transaction from "/Users/peter/ledger.txt",
     lines 10-12:
     = expr date=>[2010/02/10] && account =~ /^Expenses:(Cable|Utils)/ && account !~ /Expenses:Utils:Water/
       $account                                     -0.5
       Assets:Receivable:Andrew                      0.5
     While parsing periodic transaction:
     ~ monthly
        Expenses:Cable                            $37.00
        Expenses:Food                            $600.00
        Expenses:Insurance:Car                    $81.15
        Expenses:Insurance:Fees                    $1.00
        Expenses:Insurance:Life                   $50.00
        Expenses:Interest:Car                     $25.00
        Expenses:Interest:Student                $150.00
        Expenses:Rent                            $650.00
        Expenses:Utils:Electric                   $50.00
        Expenses:Utils:Gas                        $50.00
        Assets
     Error: Assertion failed in "src/item.cc", line 535: ledger::string
     ledger::item_context(const ledger::item_t&, const ledger::string&):
     len > 0
     :END:

     Not really sure what that means. If I comment out the periodic transaction
     everything works again, except the automatic transaction is matching every
     transaction, not just the ones that the expression should match.
   I have the following automatic rule at the top of my ledger file that
   automatically splits expenses with my roommate. It worked great under 2.6
   but it's stopped working under 3.0. How do I convert it to work under 3?
   #+begin_src sh
   ;; starting on 2010/02/10, all util and cable transactions automatically
   ;; get half of their value assigned to andrew
   
   = d>=[2010/02/10] & /^(?:Expenses:(Cable|Utils))/ & !/Expenses:Utils:Water/
     $account                                     -0.5
     Assets:Receivable:Andrew            0.5
   #+end_src
   
   On a further note, where would I go in the source to learn about the filter
   language?  I've seen people post snippets but as far as I can tell there's
   no comprehensive docs yet, and my shallow dives into the source haven't
   turned up anything useful.
   :PROPERTIES:
   :ID:       E51310FF-3548-45AE-AEFF-57B800E8A304
   :Submitter: Peter Keen <peter.keen@bugsplat.info>
   :Message:  [[message://AANLkTinY_1OpT4OeSNFn3B7oXnnqZ%3DAcgs-4rya1OZPM@mail.gmail.com][Re: Automatic rules and 3.0]]
   :CREATED:  [2010-11-21 Sun 23:03]
   :ARCHIVE_TIME: 2011-06-20 Mon 00:26
   :ARCHIVE_CATEGORY: Bugs
   :END:
** WORKSFORME [#A] [[bug:438][#438]] Case where register and balance do not agree                   :critical:
   - State "WORKSFORME" from "TODO"       [2011-06-20 Mon 00:10] \\
     I see this at the end of the register report:
     :OUTPUT:
     11-Jun-20 Commodities revalued  <Revalued>                   $19.30    $18020.74
     :END:
   The file below gives the following
   :OUTPUT:
   $ ledger/ledger -f foo -X \$ bal sub1
             $18020.74  Assets:Sub1
                 $8.10    Leftovers
   --------------------
             $18020.74
   :END:
   and
   :OUTPUT:
   $ ledger/ledger -f foo -X \$ reg sub1
   10-Apr-04 Opening Balance       Assets:Sub1                   $1.00        $1.00
   10-Apr-04 Opening Balance       Assets:Sub1                $3227.00     $3228.00
   10-Apr-04 Opening Balance       Assets:Sub1                $1130.00     $4358.00
   10-Apr-04 Opening Balance       Assets:Sub1                $2030.00     $6388.00
   10-Apr-04 Opening Balance       Assets:Sub1:Leftovers         $6.79     $6394.79
   10-Apr-04 Opening Balance       Assets:Sub1                 $223.30     $6618.09
   10-Apr-04 Opening Balance       Assets:Sub1                 $297.00     $6915.09
   10-May-18 FOO                   Assets:Sub1                $5438.00    $12353.09
   10-Jul-02 Commodities revalued <Revalued>                  $259.74    $12612.83
   10-Jul-02 BAR                   Assets:Sub1                 $135.84    $12748.67
                                  Assets:Sub1:Leftovers         $1.31    $12749.98
   10-Sep-29 Commodities revalued <Revalued>                 $5251.46    $18001.44
   :END:

   The price db is in the file.

   I'm using 9fcf48482626f20151d75a2ebb81371b45d4540a, which is on the next
   branch.
   #+begin_src ledger
   N $
   P 2010/09/28 20:43:24 E $3.700
   P 2010/09/28 20:43:25 A $5.230
   P 2010/09/28 20:43:26 D $34.020
   P 2010/09/28 20:43:27 C $12.370
   P 2010/09/28 20:43:28 F $39.700
   P 2010/09/28 20:43:29 B $39.430
   P 2010/09/29 13:50:15 E $3.720
   P 2010/09/29 13:50:15 A $5.240
   P 2010/09/29 13:50:17 D $33.920
   P 2010/09/29 13:50:18 C $12.310   P 2010/09/29 13:50:18 F $39.670
   P 2010/09/29 13:50:19 B $39.830

   2010/04/04 * Opening Balance
    Assets:Sub1                       100 A @ $0.01
    Equity:Opening Balances

   2010/04/04 * Opening Balance
    Assets:Sub1                       100 B @ $32.27
    Equity:Opening Balances

   2010/04/04 * Opening Balance
    Assets:Sub1                       100 C @ $11.30
    Equity:Opening Balances

   2010/04/04 * Opening Balance
    Assets:Sub1                       100 D @ $20.30
    Equity:Opening Balances

   2010/04/04 * Opening Balance
    Assets:Sub1:Leftovers     $6.79
    Equity:Opening Balances

   2010/04/04 * Opening Balance
    Assets:Sub1                       11 D
    Equity:Opening Balances

   2010/04/04 * Opening Balance
    Assets:Sub1                       100 E @ $2.97
    Equity:Opening Balances

   2010/05/18=2010/05/21 * FOO
    Assets:Sub1           200 F @ $27.190
    Expenses:Qux         $29.95
    Assets:Sub2

   2010/07/02 * BAR
    Income:D                      -$169.65
    Assets:Sub2        $32.50
    Assets:Sub1                       6 D @ $22.64
    Assets:Sub1:Leftovers
   #+end_src
   :PROPERTIES:
   :ID:       3FE26304-C336-48C5-85AB-909A1FC8D87B
   :Submitter: Michael Norrish <michael.norrish@gmail.com>
   :Message:  [[message://4CA31AA6.7080004@gmail.com][Re: reg vs bal in presence of recent commodity price info]]
   :CREATED:  [2010-10-03 Sun 22:16]
   :ARCHIVE_TIME: 2011-06-20 Mon 00:27
   :ARCHIVE_CATEGORY: Bugs
   :END:
** WORKSFORME [#A] [[bug:440][#440]] Complex command causes core dump                                :blocker:
   - State "WORKSFORME" from "TODO"       [2011-06-20 Mon 00:16] \\
     I cannot reproduce this core dump.
   - Note taken on [2011-03-07 Mon 15:05] \\
     > for run command, i used the following args:

     #+begin_src sh
     run --args-only reg --group-by=account --related --subtotal --file ~/src/ledger/archive/speed-test.dat --exchange=€ --decimal-comma
     #+end_src

     > in gdb, just before "bt", I get this output:

     :OUTPUT:
     Program received signal SIGSEGV, Segmentation fault.
     0x000000000055d44e in ledger::temporaries_t::clear (this=0x1f1f8b0)
         at src/temps.cc:122
     122            post.xact->remove_post(&post);

     > in gdb, the call to "bt" command give this output:

     #0  0x000000000055d44e in ledger::temporaries_t::clear (this=0x1f1f8b0)
         at src/temps.cc:122
     #1  0x000000000051727d in ledger::display_filter_posts::clear (
         this=0x1f1f830) at src/filters.h:543
     #2  0x000000000048a5b8 in ledger::item_handler<ledger::post_t>::clear (
         this=0x1f1feb0) at src/chain.h:86
     #3  0x0000000000517706 in ledger::changed_value_posts::clear (
         this=0x1f1feb0) at src/filters.h:606
     #4  0x000000000048a5b8 in ledger::item_handler<ledger::post_t>::clear (
         this=0x1f1ffb0) at src/chain.h:86
     #5  0x0000000000516851 in ledger::calc_posts::clear (this=0x1f1ffb0)
         at src/filters.h:400
     #6  0x000000000048a5b8 in ledger::item_handler<ledger::post_t>::clear (
         this=0x1f20b10) at src/chain.h:86
     #7  0x0000000000501a21 in ledger::subtotal_posts::clear (this=0x1f20b10)
         at src/filters.h:676
     #8  0x000000000048a5b8 in ledger::item_handler<ledger::post_t>::clear (
         this=0x1f20320) at src/chain.h:86
     #9  0x0000000000516e84 in ledger::related_posts::clear (this=0x1f20320)
         at src/filters.h:498
     #10 0x00000000005086f8 in ledger::post_splitter::flush (this=0x1f20c10)
         at src/filters.cc:61
     #11 0x000000000048b202 in ledger::item_handler<ledger::post_t>::flush (
         this=0x7fffffffd520) at src/chain.h:75
     #12 0x0000000000509453 in ledger::pass_down_posts::pass_down_posts (
         this=0x7fffffffd520, handler=..., iter=...) at src/filters.cc:102
     #13 0x000000000047032a in ledger::report_t::posts_report (this=0x1270480,
         handler=...) at src/report.cc:321
     #14 0x0000000000497303 in ledger::reporter<ledger::post_t,
     boost::shared_ptr<ledger::item_handler<ledger::post_t> >,
     &(ledger::report_t::posts_report)>::operator() (this=0x1f1e630, args=...) at
     src/report.h:1024
     #15 0x00000000004953e0 in
     boost::detail::function::function_obj_invoker1<ledger::reporter<ledger::post_t,
     boost::shared_ptr<ledger::item_handler<ledger::post_t> >,
     &(ledger::report_t::posts_report)>, ledger::value_t,
     ledger::call_scope_t&>::invoke (function_obj_ptr=..., a0=...)
         at /usr/include/boost/function/function_template.hpp:132
     #16 0x000000000044993e in boost::function1<ledger::value_t,
     ledger::call_scope_t&>::operator() (this=0x7fffffffd7b0, a0=...)
         at /usr/include/boost/function/function_template.hpp:1013
     #17 0x000000000042bbb3 in ledger::global_scope_t::execute_command (
         this=0x126db60, args=..., at_repl=false) at src/global.cc:232
     #18 0x000000000042bd0f in ledger::global_scope_t::execute_command_wrapper (
         this=0x126db60, args=..., at_repl=false) at src/global.cc:242
     #19 0x000000000041b9bc in main (argc=10, argv=0x7fffffffe1f8,
         envp=0x7fffffffe250) at src/main.cc:121
     :END:
   - Note taken on [2011-03-07 Mon 14:52] \\
     From Thierry ([[message://AANLkTi%3Dr%2BgibQW-nv%3Dea7VkBRXk3die4-4XVYMfPq3Kd@mail.gmail.com][Re: core dump]]): Sorry for late testing, but unfortunately,
     this is not solved on my machine.

     The command still produces a "Segmentation fault" without any other help.
     Should I try with a debug version of ledger? Can you remind me how to do
     it?
   - State "TODO"       from "DONE"       [2011-03-07 Mon 14:51]
   - State "DONE"       from "STARTED"    [2011-02-10 Thu 23:00]
   - State "TODO"       from "STARTED"    [2011-02-09 Wed 14:42]
   :LOGBOOK:
   CLOCK: [2011-02-10 Thu 20:35]--[2011-02-10 Thu 22:24] =>  1:49
   CLOCK: [2011-02-09 Wed 14:13]--[2011-02-09 Wed 14:42] =>  0:29
   :END:
   #+begin_src sh
   ledger --args-only reg --group-by=account --related --subtotal --file ~/src/ledger/archive/speed-test.dat --exchange=€ --decimal-comma
   #+end_src
   :PROPERTIES:
   :ID:       CEE57FBC-DF19-40DD-901D-68B1AEC29888
   :Submitter: Thierry Daucourt <thierry.daucourt@free.fr>
   :Message:  [[message://AANLkTimK1QtZdzAyVKV7h6T0OeeTXG0fgn5pr0HfVxYn@mail.gmail.com][core dump]]
   :CREATED:  [2010-08-19 Thu 23:35]
   :ARCHIVE_TIME: 2011-06-20 Mon 00:27
   :ARCHIVE_CATEGORY: Bugs
   :END:
** WORKSFORME [#A] Corrupted double-linked list in the register report
   - State "WORKSFORME" from "WAITING"    [2009-10-27 Tue 04:38]
   - State "WAITING"    from "TODO"       [2009-10-26 Mon 16:26] \\
     I'm waiting on a test case to come back from the user, as I've never seen this
     behavior.
   :PROPERTIES:
   :ID:       8C22A64E-6095-4933-9D66-FA970CCD1590
   :Message:  message://4AA8F383.3010801@gmail.com
   :CREATED:  [2009-10-03 Sat 03:23]
   :END:
** WORKSFORME [#A] Minor inaccuracies in 2.6.1
   - State "WORKSFORME" [2009-02-01 Sun 00:41] \\
     This works as expected in 3.0.
   Since moving to 2.6.1, I'm still having some old posts which are
   showing extra pennies here and there. I've simplified my file to the
   following. Note that in my sell xact, I'm using a format that someone
   mentioned on this list a long time ago which allows me to keep track of
   capital gains. Is this still the format I should be using?
   :DATA:
   2006/03/30 BUY VVVVV
   Assets:Investments:Principal:VVVVV  0.99 VVVVV @ $34.07
   Assets:Investments:Principal:VVVVV  0.10 VVVVV @ $34.76
   Assets:Investments:Principal            $-37.21

   2007/10/08 SELL VVVVV
   Assets:Investments:Principal:VVVVV  -1.09 VVVVV @ $34.09
   Assets:Investments:Principal:VVVVV   1.09 VVVVV @ $37.51
   Assets:Investments:Principal:VVVVV  -1.09 VVVVV @ $37.51
   Assets:Investments:Principal          $40.89
   Income:Capital Gains:NT
   :END:
   Yeah... weird, made-up numbers, but it shows the bug :-)
   :OUTPUT:
   [22:25:47 vinod]:~/data $ ledger -f vk1.dat bal Ass.*VVVVV
   --------------------
                  0
   :END:
   so far so good.

   :OUTPUT:
   [22:26:36 vinod]:~/data $ ledger -f vk1.dat -V bal Ass.*VVVVV
             $-0.01  Assets:Investments:Principal:VVVVV
   --------------------
             $-0.01
   :END:
   Now, I would expect this to be 0 as well, not $-0.01.

   :OUTPUT:
   [22:26:39 vinod]:~/data $ ledger -f vk1.dat -Vs bal
              $3.67  Assets:Investments:Principal
             $-0.01    VVVVV
           $-3.7319  Income:Capital Gains:NT
   --------------------
             $-0.06
   :END:
   :PROPERTIES:
   :Submitter: Vinod Kurup <vvkurup@gmail.com>
   :Version:  2.6.1
   :ID:       9211CFCF-8861-4E60-A501-75B2CB5DE8B1
   :CREATED:  [2009-09-28 Mon 20:32]
   :END:
** WORKSFORME [#A] The --account option is not working for metadata                      :ATTACH:
   - State "WAITING"    from "STARTED"    [2010-01-18 Mon 02:40] \\
     This is working for me, but I want to confirm with Russell.
   :LOGBOOK:
   CLOCK: [2010-01-18 Mon 02:38]--[2010-01-18 Mon 02:40] =>  0:02
   :END:
   #+begin_src sh
   ./ledger -f AISER0033.dat bal
   #+end_src
   :OUTPUT:
              $10.44  Internal:Travel
              $44.24  Projects:Meals
             $-54.68  Source:Visa
   --------------------
                   0
   :END:

   #+begin_src sh
   ./ledger -f AISER0033.dat reg
   #+end_src
   :OUTPUT:
   09-Sep-27 HUDSON NEWS HOUSTN .. Source:Visa                  $-6.55       $-6.55
                                Projects:Meals                $6.55            0
   09-Sep-27 PEET'S COFFEE & TEA.. Source:Visa                  $-2.44       $-2.44
                                Projects:Meals                $2.44            0
   09-Sep-28 FUSIA NEW YORK, NY    Source:Visa                 $-15.25      $-15.25
                                Projects:Meals               $15.25            0
   09-Sep-29 BALUCHI'S NEW YORK,.. Source:Visa                 $-20.00      $-20.00
                                Projects:Meals               $20.00            0
                                Source:Visa                 $-10.44      $-10.44
                                Internal:Travel              $10.44            0
   :END:

   #+begin_src sh
   ./ledger -f AISER0033.dat bal '%ER=AISER0033'
   #+end_src
   :OUTPUT:
              $44.24  Projects:Meals
             $-44.24  Source:Visa
   --------------------
                   0
   :END:

   #+begin_src sh
   ./ledger -f AISER0033.dat bal '%ER=AISER0036'
   #+end_src
   :OUTPUT:
              $10.44  Internal:Travel
             $-10.44  Source:Visa
   --------------------
                   0
   :END:

   #+begin_src sh
   ./ledger -f AISER0033.dat bal '--account=tag("ER")'
   #+end_src
   No output?!
   :PROPERTIES:
   :ID:       CB3FFE90-6C53-438C-8A87-4D7616782FAE
   :Attachments: russell-bug.zip.gpg bug.dat
   :CREATED:  [2010-01-04 Mon 16:57]
   :END:
** WORKSFORME [#A] Thomas is experiencing a crash when running the balance command
   - State "WORKSFORME" [2008-08-17 Sun 06:32] \\
     Thomas can't reproduce this anymore, after I logged into his machine to try
     and debug it directly.
   [[message://a8a10a0808160351v3f407203tf6fc1b87b3b4eef7@mail.gmail.com][Stack trace]]
   :PROPERTIES:
   :ID:       D0D130E3-EDC0-4D9F-A77A-0B62E115D25A
   :CREATED:  [2008-08-16 Sat]
   :END:
** WORKSFORME 'xact' sometimes produces transactions without commodities
   - State "WORKSFORME" from "TODO"       [2009-06-28 Sun 15:25]
   :PROPERTIES:
   :ID:       0134251E-89B8-4F66-9B9C-253F6786E3A3
   :CREATED:  [2009-03-03 Tue 01:04]
   :END:
** WORKSFORME --flat gives no output
   This is expected behavior.
   :PROPERTIES:
   :ID:       A2023850-75D9-4DCA-AF97-4894037FCA13
   :Message:  [[message://7528969d-341e-42f5-999b-1ba819582053@v20g2000yqv.googlegroups.com][--flat gives no output]]
   :CREATED:  [2010-04-04 Sun 15:12]
   :END:
** WORKSFORME [[bug:159][#159]] --unrealized also reports realized gains
   - State "WORKSFORME" from "TODO"       [2010-06-05 Sat 03:42] \\
     The meaning of "--unrealized" is simply that it *adds* unrealized gains
     to the balance report, not that it only report unrealized gains.  If you
     want that, then use --unrealized and filter on the Unrealized account.
   I've found that the "--unrealized" option reports also the "realized
   gains".  I would have expected that realized gains are not listed.
   #+begin_src ledger
   1997/10/24 * Achat
      Actif:Courant:BNP             10 FT @ 180 F
      Actif:Courant:BNP                   -1800 F

   1997/11/03 * Vente
      Actif:Courant:BNP            -10 FT @ 200 F
      Dépense:Invest:Commissions            100 F
      Actif:Courant:BNP                    1900 F
      [Revenu:Invest:Capital]      -10 FT @ 180 F
      [Revenu:Invest:Capital]       10 FT @ 200 F
   #+end_src

   :OUTPUT:
   $ ledger --european -f test_10.ledger bal -V --unrealized BNP
                 100 F  Actif:Courant:BNP
                -200 F  Equity:Unrealized Gains
   --------------------
                -100 F
   :END:
   :PROPERTIES:
   :CREATED:  [Revenu:Invest:Capital]
   :ID:       DA659A7A-C43F-4005-90F7-02DA97D864D4
   :Message:  [[message://e49c9335-d206-4ad8-9851-fed2e7e75f5b@q23g2000yqd.googlegroups.com][--unrealized reports also realized gains]]
   :Submitter: thierry <thierry.daucourt@free.fr>
   :END:
** WORKSFORME [[bug:164][#164]] --balance-format overrides --exchange
   - State "WORKSFORME" from "TODO"       [2010-06-02 Wed 01:23] \\
     You need to use %(scrub(display_total)), or just %{display_total}, with curly
     braces.  The value "total" is too raw.
   I pasted command at the end of the message. Here is a simplified scenario:

    1. First bal command report is:
       :OUTPUT:
            $180.00
            €240.38  Expenses
       :END:

    2. By adding "--exchange=€", I got:
       :OUTPUT:
            €420.38  Expenses
       :END:

    3. By adding "--balance-format='%(account);%(total)\n'", I got:
       :OUTPUT:
       Expenses;$180.00
       €240.38
       :END:

    4. by modifying "%(total)" to "%(quantity(total))", I got the error:
       :OUTPUT:
       Cannot convert a balance with multiple commodities to an amount
       :END:

    I do not understand why at point 3. the --balance-format overrides the
    output of --exchange option in point 2.  As point 3. is incorrect, this
    cause the error of point 4. I believe.

   #+begin_src ledger
    P 2008/01/01 $ €1

    2008/01/11 LIAT
       Expenses:Travel:Airfare                   $40.00
       Liabilities:MasterCard

    2008/02/05 CTX
       Expenses:Travel:Auto                     €240.38
       Liabilities:MasterCard

    2008/01/11 XYZ
       Expenses:House:Phone                     $140.00
       Liabilities:MasterCard
   #+end_src

    :OUTPUT:
    $ ledger -f test_14.ledger bal ^Expenses --collapse --no-total
                $180.00
                €240.38  Expenses
    $ ledger -f test_14.ledger bal ^Expenses --collapse --no-total --
    exchange=€
                €420.38  Expenses
    $ ledger -f test_14.ledger bal ^Expenses --collapse --no-total --
    exchange=€ --balance-format='%(account);%(total)\n'
    Expenses;$180.00
    €240.38
    $ ledger -f test_14.ledger bal ^Expenses --collapse --no-total --
    exchange=€ --balance-format='%(account);%(quantity(total))\n'
    While evaluating value expression:
     quantity(total)
     ^^^^^^^^^^^^^^^
    Error: Cannot convert a balance with multiple commodities to an amount
    :END:
   :PROPERTIES:
   :ID:       EED0AF18-0C38-42CC-9057-EB461815DDE6
   :Message:  [[message://06e4ad2e-0c00-4d08-89b9-4a1025dd569c@e6g2000yqh.googlegroups.com][--balance-format overrides --exchange]]
   :Submitter: thierry <thierry.daucourt@free.fr>
   :CREATED:  [2010-04-04 Sun 15:12]
   :END:
** WORKSFORME [[bug:168][#168]] Balance wrong because of exchange rates
   - State "WORKSFORME" from "STARTED"    [2010-06-02 Wed 01:36] \\
     This is expected behavior.  You're seeing rounding artifacts due to the
     fluctuations in price.  Use the register command to see the revaluation
     taking place.  Even better, edit your data file to specify:
     #+begin_src ledger
     D 1,000.0000 EUR
     #+end_src

     And then run the same register command again.  Even if you extend the
     precision to six decimal places, there is still rounding taking place.
     What ends up happening is that you have a specific amount of -45.67 in
     Bar getting balanced against a priced value of 45.655160, which has a
     rounding discrepancy of -0.01.
   :LOGBOOK:
    CLOCK: [2010-06-02 Wed 01:24]--[2010-06-02 Wed 01:35] =>  0:11
    :END:
    This looks like a bug in ledger v3 to me.  Why does it not balance due to
    0.01 EUR?
    :OUTPUT:
    % ledger -f - -X EUR  bal
             -45.67 EUR  Bar
              45.66 EUR  Foo
    --------------------
              -0.01 EUR
    :END:

    Input file:
   #+begin_src ledger
    D 1,000.00 EUR

    2010-03-18 Postage
     Foo        11.04 GBP @@ 12.46 EUR  ; @ 1.129 EUR
     Bar

    2010-03-20 Postage
     Foo         2.61 GBP @@  2.94 EUR  ; @ 1.127 EUR
     Bar

    2010-03-21 foo
     Foo        20.00 GBP @@ 22.52 EUR  ; @ 1.126 EUR
     Bar

    2010-03-21 bar
     Foo         6.88 GBP @@  7.75 EUR  ; @ 1.127 EUR
     Bar
   #+end_src

    Actually, it seems the problem is because the amounts in Bar are in EUR
    whereas the amounts in Foo are in GBP and because the exchange rates
    between GBP and EUR in my transacations vary, they don't balance
    (presumably ledger uses the exchange rate from the last transacation to
    compute the balance).
   :PROPERTIES:
   :ID:       DCB05AE0-3972-4F56-960D-D0BE2646E19E
   :Message:  [[message://20100410133046.GA21886@jirafa.cyrius.com][Balance wrong because of exchange rates]]
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :CREATED:  [2010-04-11 Sun 03:55]
   :END:
** WORKSFORME [[bug:171][#171]] Path handling issues in master
   - State "WORKSFORME" from "WAITING"    [2010-06-01 Tue 17:59] \\
     I can't get this to happen.
   - State "WAITING"    from "TODO"       [2010-05-22 Sat 22:08] \\
     I need more details.
   I'm getting a few different errors with the git master version - most
    specifically, it seems that if I use a different path to the file, or put
    the file path in quotes, I either get a different error, or it actually
    works:
    :OUTPUT:
    $ ./ledger -V
    Ledger master-0-g7ca8149, the command-line accounting tool
    :END:
    :OUTPUT:
    $ ./ledger -f ~/totals.ledger bal
    Assertion failed: (false), function visitation_impl, file
    /opt/local/include/boost/variant/detail/visitation_impl.hpp, line 203.
    Abort trap
    :END:
    :OUTPUT:
    $ cd ~
    $ ledger -f totals.ledger bal
    Bus error
    :END:
    :OUTPUT:
    $ cd ~/customer-data
    $ ledger -f ledgers/total.ledger bal
    Assertion failed: (this->is_initialized()), function get, file
    /opt/local/include/boost/optional/optional.hpp, line 578.
    Abort trap
    :END:
    :OUTPUT:
    $ ledger -f "ledgers/total.ledger" bal --anon
                      0  da39a3ee
             $-4,173.68    035eae60:aebe8b37
               $-550.25      0786ff3b
                $550.25      44357ae5:4b5e84be
             $-4,173.68      f9f38818
             $-1,640.78        2402ea36
               $-132.90        9be70f66
             $-2,400.00        b40e1543
              $4,173.68    d673d941:20e33862
                $550.25      97876b83
              $3,623.43      cad804ae:aebe8b37
    --------------------
                      0
    :END:
    (system is OS X 10.6.2, with ledger compiled from git, and the other
    dependencies compiled using MacPorts)
   :PROPERTIES:
   :ID:       837625AC-10DF-439E-8B30-6DEE8C41F49F
   :Message:  [[message://32ad6ed11003211731odd7d19aq2bb2e2be1fceaffa@mail.gmail.com][Path handling issues in master]]
   :Submitter: Zack Williams <zdwzdw@gmail.com>
   :CREATED:  [2010-03-26 Fri 22:24]
   :END:
** WORKSFORME [[bug:204][#204]] Problem with price conversions and -V
   - State "WORKSFORME" from "TODO"       [2010-06-09 Wed 03:14] \\
     The concept of a "default commodity" does not mean what you are thinking.
     In order to render all values in a specific commodity, you can use:
     #+begin_src sh
     ledger -X € reg Assets
     #+end_src

     The reason why -V alone doesn't do what you expect is because you never
     use it to trade either F or $ in this example.
   Below is the test file.  What is noticeable is that if I put € as my
    default currency $ is converted to F, and then F is converted to €.
   #+begin_src ledger
    D 1000,00 €
    P 1993/1/1 F 0,15244901723741037903399155737342539221320909754755 €
    P 1993/1/1 $ 6 F

    1994/1/1 Company
     Assets:Checking  10000 F
     Income:Salary

    1998/1/1 Transfer
     Assets:US account  200 $
     Assets:Checking  -1000 F

    1999/1/1 Books
     Expenses:Books  200 $
     Assets:US account

    2002/1/1 Company
     Assets:Checking  2000 €
     Income:Salary
   #+end_src

    Below is the output of ledger v2.6.2.  What surprise me is that $ in
    converted to F only, I would have expected $ to F then F to €.:
    :OUTPUT:
    thierry@rialto:~/VirtualBoxShare$ ledger -f test4.ledger -V reg Assets
    1994/01/01 Company              Assets:Checking         1524,49 €  1524,49 €
    1998/01/01 Transfer             Assets:US account          1000 F     1000 F
                                                                       1524,49 €
                                    Assets:Checking         -152,45 €     1000 F
                                                                       1372,04 €
    1999/01/01 Books                Assets:US account         -1000 F  1372,04 €
    2002/01/01 Company              Assets:Checking         2000,00 €  3372,04 €
    :END:

    Below is the output of ledger v3.  What surprise me is that I put € as my
    default currency, but this is not valued to € (actually the valuation from
    $ to F is done, but not the F to €).  Also, on the last line, the result
    is not collapsed, as it is in output of v2.6.2:
    :OUTPUT:
    thierry@rialto:~/VirtualBoxShare$ ledger3 -f test4.ledger -V reg Assets
    94-Jan-01 Company               Assets:Checking           10000 F   10000 F
    98-Jan-01 Transfer              Assets:US account          1000 F   11000 F
                                    Assets:Checking           -1000 F   10000 F
    99-Jan-01 Books                 Assets:US account         -1000 F    9000 F
    02-Jan-01 Company               Assets:Checking         2000,00 €    9000 F
                                                                      2000,00 €
    :END:
   :PROPERTIES:
   :ID:       6FC5D114-958D-493B-8879-6B9ED28224AB
   :Message:  [[message://a6e822eb-17e3-4ff3-8e41-25c1999fb871@h9g2000yqa.googlegroups.com][-V option]]
   :Submitter: thierry <thierry.daucourt@free.fr>
   :CREATED:  [2010-01-09 Sat 21:05]
   :END:
** WORKSFORME [[bug:207][#207]] No output to file in REPL with "push -o output.journal"
   - State "WORKSFORME" from "WAITING"    [2010-06-15 Tue 05:23]
   - State "WAITING"    from "STARTED"    [2010-06-10 Thu 04:54] \\
     To Thomas: I just tried this and it worked fine.  After your "push" command,
     does the prompt change to a ]]?
   :LOGBOOK:
   CLOCK: [2010-06-10 Thu 04:52]--[2010-06-10 Thu 04:54] =>  0:02
   :END:
   :PROPERTIES:
   :ID:       D6B17614-288D-44E5-99C2-569E020809C4
   :CREATED:  [2010-05-30 Sun 03:33]
   :END:
** WORKSFORME [[bug:213][#213]] Balancing problems with fixated commodity prices
   - State "WORKSFORME" from "TODO"       [2010-06-09 Wed 03:37]
   I've been playing with [[http://groups.google.com/group/ledger-cli/browse_thread/thread/e98bee73e279b3af][John's example]]:
   #+begin_src ledger
   2009/01/01 Shell
       Expenses:Gasoline             11 GAL {=$2.29} @ $2.30
       Assets:Checking
   #+end_src
   > This transaction says that you bought 11 gallons priced at $2.29 per
   > gallon at a *cost to you* of $2.30 per gallon.  Ledger auto-generates a
   > balance posting in this case to Equity:Capital Losses to reflect the 11
   > cent difference, which is then balanced by Assets:Checking because its
   > amount is null.

   This example suggests that ledger will automatically balance this but when
   I put this example into ledger I get:
   :OUTPUT:
   Unbalanced remainder is:
                 $-0.11
   Amount to balance against:
                 $25.30
   :END:

   What seems to happen is that ledger makes an automatic posting to
   Equity:Capital Losses for $-0.11 but this is not taken into account when
   doing the balance.

   While trying to figure out what's going on, I worked on an example that
   (to me) is easier to understand: I start out with 10.00 EUR and then buy
   5.00 GBP at a rate of 1.4 (i.e. for 7.00 EUR).  I now have 3.00 EUR and
   5.00 GBP.  I then sell the 5.00 GBP at a rate of 1.5, i.e. for 7.50 EUR.
   So now I have 10.50 EUR and have made a 0.50 EUR gain.

   However, when I sell the money and say that my Assets:Cash goes up by 7.50
   EUR, ledger will complain that it doesn't balance.  In order for ledger to
   accept it, I have to say that it goes up by 7.00 EUR.  So what I did was
   to post 7.50 EUR to Assets:Cash and 0.50 EUR to Income:Gain.  Then ledger
   no longer complains, but when you look at "ledger bal" its off by 0.50 EUR
   because of the automatic "Equity:Capital Gains" posting ledger made.

   So it seems that the automatic Equity:Capital Loss|Gains posting is not
   taking into account for the balance.

   In addition to this bug, I wonder whether this automatic posting by ledger
   makes sense in the first place.  First of all, the name is hardcoded into
   ledger and some people may want to use a different account name.
   Secondly, you might want to use different account names depending on the
   circumstances (e.g. Expenses:Currency Loss for currency conversation, but
   Income:Capital Gains for gains when selling shares).  If you'd get rid of
   the automatic posting, people could simply write:
   #+begin_src ledger
    Assets:Cash                       -5.00 GBP {=1.4 EUR} @ 1.5 EUR
    Assets:Cash                        7.50 EUR
    Income:Gain
   #+end_src
   and it would balance.

   Anyway, my example is below.  When you run "ledger bal", you get:
   :OUTPUT:
             10.50 EUR  Assets:Cash
             -9.50 EUR  Equity
              0.50 EUR    Capital Gains
            -10.00 EUR    Opening balance
             -0.50 EUR  Income:Gain
   --------------------
              0.50 EUR   <--
   :END:
   #+begin_src ledger
   2010-01-01 Opening balance
    Assets:Cash         10.00 EUR
    Equity:Opening balance

   2010-01-20 Buy GBP
    Assets:Cash         5.00 GBP @ 1.4 EUR
    Assets:Cash

   2010-01-20 Sell GBP
    Assets:Cash                       -5.00 GBP {=1.4 EUR} @ 1.5 EUR
    Assets:Cash                        7.50 EUR
    Income:Gain                       -0.50 EUR
   #+end_src

   Note: when you remove the -0.50 EUR from Income:Gain and just leave it
   empty, ledger will not be able to balance.

   P.S. Is a loss/gain really "Equity"?  Shouldn't that be an Income or
   Expense?  I wonder why the automatic posting puts it on the Equity side.
   I didn't know you put things there except for the opening balance.
   :PROPERTIES:
   :ID:       6E0F6FE7-4C5C-4BA1-8915-F6D85666A98F
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :Message:  [[message://20100531100036.GA23484@jirafa.cyrius.com][Balancing problems with fixated commodity prices]]
   :CREATED:  [2010-05-31 Mon 14:37]
   :END:
** WORKSFORME [[bug:222][#222]] tag/pop to apply metadata does not work
   - State "WORKSFORME" from "STARTED"    [2010-06-10 Thu 04:58] \\
     The metadata is there, it's just not "print"ing becasue it's not a specific
     note on the printed transaction.  This, however, would show you that the
     metadata is in effect:

       ledger print %Test

     Since that only prints entries with the metadata "Test", it prints your entry.
   :LOGBOOK:
   CLOCK: [2010-06-10 Thu 04:54]--[2010-06-10 Thu 04:57] =>  0:03
   :END:
   :PROPERTIES:
   :ID:       6343F4D3-FDEB-4812-AC9D-8D9D31B873CF
   :CREATED:  [2010-06-01 Tue 15:15]
   :END:
** WORKSFORME [[bug:323][#323]] -r does not output related accounts when using --effective
   SCHEDULED: <2010-06-13 Sun>
   - State "WORKSFORME" from "TODO"       [2010-06-14 Mon 00:55] \\
     Actually, this command is doing exactly what you asked it to do.  There is no
     bug here.  In your data file you have:
     #+begin_src ledger
     2010/04/14 * Caixa de som Renault
         Expenses:Carro:Celta                     $280.00
         Liabilities:CREDITCARD:VISA              $-93.33  ;  [=2010/05/04]
         Liabilities:CREDITCARD:VISA              $-93.33  ;  [=2010/06/04]
         Liabilities:CREDITCARD:VISA              $-93.34  ;  [=2010/07/04]
     #+end_src

     Now let's review your report options:

      - --effective -e 2010/06/05
        These options mean that only the first three postings will be considered
        from this transaction as matching your query.
      - Liabilities:CREDITCARD:VISA
        This query term narrows it down to the middle two.
      -r
        The -r flag causes the other two to be reported, the 1st and 4th posting.
      -d "d>[2010/05/04]"
        And this option confines the report to the last posting.

     What were you expecting to see, given these options?
   :PROPERTIES:
   :ID:       F210BB4E-DCD5-48A6-9113-677560AC3B70
   :Submitter: Leandro Henrique Oliveira Fernandes <leandroohf@gmail.com>
   :Message:  [[message://AANLkTimRG8t9ZbYC-vW69egV1uM-0vc26VQsT6JYutGe@mail.gmail.com][Re: credit card]]
   :CREATED:  [2010-06-09 Wed 18:04]
   :END:
** WORKSFORME [[bug:344][#344]] Budgeting behavior changed between 2.6 and 3.0
   - State "WORKSFORME" from "TODO"       [2010-06-21 Mon 18:51]
   2.6: http://ericbetts.org/pastebin/d488d0d79
   3.0: http://ericbetts.org/pastebin/d74668f87

   Why are these two different?
   :PROPERTIES:
   :ID:       F5D66D56-36D8-4AD1-85BB-B6E792A5A1DF
   :CREATED:  [2010-06-16 Wed 18:09]
   :END:
** WORKSFORME Balance of virtual transactions depends on amount syntax
   - State "WORKSFORME" from "TODO"       [2010-05-22 Sat 20:49] \\
     This is expected behavior.
   - Note taken on [2010-03-14 Sun 04:37] \\
     He amended: [[message://5aa7e7a0-fe3b-4bf3-9405-ba0fb3c08c97@y17g2000yqd.googlegroups.com][Re: balance of virtual transactions depends on amount syntax]]
   :PROPERTIES:
   :ID:       6DB20CAE-C7B0-44F8-BA47-A47656013596
   :Message:  [[message://709de76d-34dd-430b-8af8-103416083833@c16g2000yqd.googlegroups.com][balance of virtual transactions depends on amount syntax]]
   :CREATED:  [2010-03-14 Sun 04:37]
   :END:
** WORKSFORME Forecasting command with -Y doesn't do any forecasting
   - State "WORKSFORME" from "TODO"       [2009-10-26 Mon 21:09] \\
     This is working now in 3.0.
   The command is:
   :SCRIPT:
   ledger -Y --forecast 'T>0' reg food
   :END:
   Doesn't do any forecasting!  If the -Y is dropped it does.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   28
   :ID:       E2DF7C6C-BA02-4F3D-8C3C-B73F8BC30CD6
   :CREATED:  [2007-12-10 Mon]
   :END:
** WORKSFORME ledger bal --flat --display 'depth <= 2' fails to show any accounts
   - State "WORKSFORME" from "TODO"       [2009-10-26 Mon 22:14] \\
     This is working fine in 3.0.
   It works fine without --flat, but not with.
   :PROPERTIES:
   :ID:       CEA59DB9-93E4-44A9-977C-F68A9E2D308A
   :URL:      http://github.com/jwiegley/ledger/issues#issue/2
   :CREATED:  [2009-10-26 Mon 21:32]
   :END:
** WORKSFORME next_element should honor quoting
   - State "WORKSFORME" from "STARTED"    [2010-05-23 Sun 00:49] \\
     This already works for the pricing directive.
   :LOGBOOK:
   CLOCK: [2010-05-23 Sun 00:36]--[2010-05-23 Sun 00:48] =>  0:12
   :END:
   To make this possible:
   #+begin_src ledger
   P 2009/08/20 "FOO BAR" $2
   #+end_src
   :PROPERTIES:
   :ID:       1D6EB807-6BFA-4C63-B993-930102A7AFF2
   :CREATED:  [2009-11-25 Wed 04:27]
   :END:
** WORKSFORME The print command can generate unbalanced transactions                     :ATTACH:
   - State "WORKSFORME" from "TODO"       [2010-05-22 Sat 18:51] \\
     This was fixed when the print command was rewritten.
   - Note taken on [2010-02-05 Fri 16:49] \\
     From [[message://20100204082006.GA4250@kerneis.info][Re: ledger print does not output implicit lines]]:

     I narrowed the problem with "ledger print".  It also happens with "ledger
     entry" by the way (I guess the code is shared).  The problem is when you
     have custom dates for some postings:
     :OUTPUT:
     $ cat test
     2010/01/01 Test entry
           Foo:Bar              $ 10.00 ; [2010/01/02]
           Bip:Bop
     $ ledger -f test print
     2010/01/01 Test entry
        Bip:Bop
     2010/01/01 Test entry
        Foo:Bar                                  $ 10.00  ; [2010/01/02]
     $ ledger -f test entry 2010/02/01 "Test entry"
     2010/02/01 Test entry
        Foo:Bar                                  $ 10.00  ; [2010/01/02]
     2010/02/01 Test entry
        Bip:Bop
     :END:

     Of course, the extra header line splits the transaction in two, which
     breaks balance.
   #+begin_src sh
   ledger --exchange € print
   #+end_src
   If some lines have a date different from the transaction one, they are
   splitted in two transaction, which does not balance.
   :OUTPUT:
   $ grep 6933954 ledger.txt
   2009/11/05 * (6933954) Hamou Jean-Pierre

   $ ledger print|grep 6933954
   2009/11/05 * (6933954) Hamou Jean-Pierre
   2009/11/05 * (6933954) Hamou Jean-Pierre
   :END:
   :PROPERTIES:
   :ID:       34BD95B8-F5ED-431E-A4BD-02DA3DF66EAA
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :Attachments: ledger.txt.gpg
   :CREATED:  [2010-01-18 Mon 02:56]
   :END:
** INVALID [#A] [[bug:463][#463]] Question about commodity sub-total vs. total in balance
   - State "INVALID"    from "TODO"       [2011-06-20 Mon 00:23] \\
     I cannot see why the reporter thinks there is a bug here.
   I had a question about balance totals. Given this test data:
   #+begin_src ledger
   D $1,000.00
   P 2011-01-01 22:00:00-0800 TESTA $78.35
   P 2011-01-01 22:00:00-0800 TESTB $15.86
   P 2011-01-01 22:00:09-0800 TESTC $13.01

   2011/01/01 Example
     Assets:Brokerage:TESTA         188.424 TESTA @      $76.61
     Assets:Brokerage:TESTB       1,809.282 TESTB @      $15.60
     Assets:Brokerage:TESTC         384.320 TESTC @@  $5,000.00
     Assets:Brokerage:TESTC           5.306 TESTC @@     $68.18
     Equity:Opening Balances
   #+end_src

   I'm a little bit surprised that the sub-accounts reflect a difference from
   the top level account w/re to rounding the last cent:
   :OUTPUT:
   $ ledger -V -f test.dat  bal
             $48,527.27  Assets:Brokerage
             $14,763.02    TESTA
             $28,695.21    TESTB
              $5,069.03    TESTC
            $-47,728.14  Equity:Opening Balances
   --------------------
                $799.13
   :END:

   Even if --no-rounding is passed in:
   :OUTPUT:
   $ ledger -V -f test.dat --no-rounding bal
             $48,527.27  Assets:Brokerage
             $14,763.02    TESTA
             $28,695.21    TESTB
              $5,069.03    TESTC
            $-47,728.14  Equity:Opening Balances
   --------------------
                $799.13
   :END:

   Is there something off with how the data aboce is set up?  Should I be
   using be more place holders?
   :PROPERTIES:
   :ID:       3715CC11-ADFF-4F6B-9C39-C7D1077A2F83
   :Submitter: jimr <jim.robinson@gmail.com>
   :Message:  [[message://d2d528e1-33ba-49d1-bddf-53f07e9b5f1b@y19g2000prb.googlegroups.com][question about commodity sub-total vs. total in balance]]
   :CREATED:  [2011-01-05 Wed 16:20]
   :ARCHIVE_TIME: 2011-06-20 Mon 00:28
   :ARCHIVE_CATEGORY: Bugs
   :END:
** INVALID [[bug:212][#212]] Question about using the same tag twice
   - State "INVALID"    from "TODO"       [2010-06-01 Tue 18:05] \\
     I answered this on the mailing list.
   I'd like to tag transacations with either foo:bar or foo:baz but some
   actually have both bar and baz.  Instead of using foo:bar:baz I'd like to
   use 2 tags for one transacation: foo:bar and foo:baz to make it easier to
   grep for things in my ledger file.
   :PROPERTIES:
   :ID:       5DCC31B1-52C8-443D-98B9-0C2D72AF561A
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :Message:  [[message://20100529163125.GJ2679@jirafa.cyrius.com][Using the same tag twice]]
   :CREATED:  [2010-05-30 Sun 03:33]
   :END:
** INVALID There is bad column alignment with certain UTF-8 characters
   - State "INVALID"    from "TODO"       [2009-11-14 Sat 02:49] \\
     This only happens in Eshell, it works fine in a Terminal window with UTF-8
     display support.
   :SCRIPT:
   ledger -f doc/sample.dat --columns=80 reg
   :END:
   :OUTPUT:
   04-May-14 Another dày in whic.. ..Bá:Ch:As:Bá:Chécking      $500.00   $-1,000.00
                                                                            50 AAPL
                                   Income:Salary              $-500.00   $-1,500.00
                                                                            50 AAPL
   04-May-14 Another dày in whic.. Ру:Ак:Ру:Русский язык     $1,000.00     $-500.00
                                                                            50 AAPL
                                   Income:Salary            $-1,000.00   $-1,500.00
                                                                            50 AAPL
   :END:
   :PROPERTIES:
   :ID:       72B0ACB4-37EB-492A-8EFE-8CC65CB66EC8
   :CREATED:  [2009-11-12 Thu 18:33]
   :END:
** DUPLICATE [#A] [[bug:206][#206]] Specifying exchange rate with @ doesn't led to expected result
   - State "DUPLICATE"  from "WAITING"    [2010-06-06 Sun 03:22] \\
     Duplicate of #205.
   - State "WAITING"    from "TODO"       [2010-06-04 Fri 06:16]
   - Note taken on [2010-06-02 Wed 17:02] \\
     I believe this is fixed now.  If not, could you please provide an example?
   While entering some expense reports, I found another case where specifying
   the exchange rate with @ doesn't led to the expected result because of
   rounding (I can give an example if you want).  I suppose I could simply
   enter the amounts using @@ but would like to add the conversation rate too.
   Is something like "11.04 GBP @@ 12.46 EUR ; @ 1.129 EUR" the best option
   for now or is there another trick I could use?
   :PROPERTIES:
   :ID:       CFE233D5-3D11-423F-97D4-68A0A6B10B59
   :Message:  [[message://20100410132007.GA21623@jirafa.cyrius.com][Re: Specifying commodity price and total]]
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :CREATED:  [2010-04-11 Sun 03:55]
   :END:
** DUPLICATE [#A] The following example fails to apply automated transactions
   - State "DUPLICATE"  from "DONE"       [2009-11-09 Mon 23:30]
   - State "DONE"       from "TODO"       [2009-11-09 Mon 22:02]
   :DATA:
   = account =~ /^Assets:Cash/
     Assets:Bank:Visa                  -1
     Assets:Bank:Checking               1

   2008/01/01 January
       Expenses:One:Books          $10.00
       Expenses:One:Two:Books          $10.00
       Expenses:One:Two:Three:Books          $10.00
       Assets:Cash

   2008/01/01 January
       Assets:Cash    0
       Income:Books

   2008/01/01 January
       Assets:Cash
       Income:One:Books          $-10.00
       Income:One:Two:Books          $-10.00
       Income:One:Two:Three:Books          $-10.00
   :END:
   Doing a register report for Assets shows only the Assets:Cash line.
   :PROPERTIES:
   :ID:       C727C0E1-9996-4304-81DF-EDF03D1258F8
   :CREATED:  [2009-11-09 Mon 20:08]
   :END:
** DUPLICATE 'ledger print' does not output implicit lines
   - State "DUPLICATE"  from "TODO"       [2010-01-18 Mon 03:03] \\
     Duplicates 34BD95B8-F5ED-431E-A4BD-02DA3DF66EAA
   :PROPERTIES:
   :ID:       B96C3D99-70F4-4BF4-944D-DFB10D776FC1
   :Message:  [[message://20100115103424.GA5932@kerneis.info][ledger print does not output implicit lines]]
   :Submitter: Gabriel Kerneis <gabriel@kerneis.info>
   :CREATED:  [2010-01-16 Sat 18:58]
   :END:
** DUPLICATE [[bug:191][#191]] Optimize conversion of commodities
   - State "DUPLICATE"  from "TODO"       [2010-06-02 Wed 06:52] \\
     Duplicate of #163.
   Thierry has proven that using --exchange can increase reporting times from
   1 second to over 25 minutes.
   :PROPERTIES:
   :ID:       567780B6-EABE-405E-8AB4-46F201AC42B3
   :CREATED:  [2010-05-23 Sun 17:04]
   :END:
** DUPLICATE Ledger formats UTF-8 strings incorrectly
   The report `ledger --tail 20 reg nrl:checking` has errors in the tabulation
   because of the width of UTF-8 characters that are larger than 8-bit.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   67
   :ID:       2FE8B7B7-15A3-4F02-9B53-3A629212561A
   :CREATED:  [2008-04-11 Fri]
   :END:
** DUPLICATE Strange libboost suffix on Debian Squeeze with acprep
   - State "DUPLICATE"  from "TODO"       [2010-01-21 Thu 02:36]
   :PROPERTIES:
   :ID:       758C04DB-FECD-41DD-9A7B-B12E394B7E22
   :Message:  [[message://4b41432bd68c7_6cc63f9b2badc2fc154@fe4.rs.github.com.tmail][{GitHub} docunext sent you a message]]
   :CREATED:  [2010-01-09 Sat 21:07]
   :END:
** DUPLICATE Support multiple -f options
   - State "DUPLICATE"  [2009-01-29 Thu 15:36] \\
     Duplicated by B1E49EA5-18B9-413A-ACD6-9F9795F25722.
   So that add-in report files can be specified
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   155
   :ID:       146B0BE4-C5EB-4A5B-A332-FE512B40D375
   :CREATED:  [2008-04-11 Fri]
   :END:
** CLOSED [#A] 'ledger -b 2007/08/16 -s reg food' is completely broken
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:49]
   - State "DONE"       [2007-08-23 Thu 21:22] \\
     Fixed by the following change:
        * walk.cc (handle_value): The xact xdata.dflags were being
        set too late; the XACT_COMPOUND setting was being thrown
        away as a result.
   Although reg without shows a ton of Expenses:Food expenses, searching for
   food expenses shows none.
   :PROPERTIES:
   :ID:       6CAF45D7-9098-41B4-A25A-12F8A8166006
   :CREATED:  [2007-08-22 Wed]
   :END:
** CLOSED [#A] Change processing of ~/.ledgerrc
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:51]
   - State "DONE"       from "TODO"       [2009-10-29 Thu 00:51]
   - Note taken on [2009-10-27 Tue 22:02] \\
     Fixing this will fix [[id:863A769C-E97C-4CA6-B89F-B72C47F07543]].
   1. Before parsing, run through and handle options that session_t and
      global_scope_t know about.
   2. Before reporting or loading the REPL, run through and handle all other
      options and any commands found.
   :PROPERTIES:
   :ID:       71FE0FAB-622D-403C-A944-C7541948AFFF
   :CREATED:  [2009-02-19 Thu 15:10]
   :END:
** CLOSED [#A] Changes to make to the way things are calculated [8/10]
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:49]
   - State "DONE"       [2009-03-05 Thu 05:03]
   - [X] During parsing, each account is given a pointer to the posts it
         contains, in a deque.
   - [X] calc_xacts should only compute the amount, and store it in the post's
         xdata.
   - [X] It then marks the post as "visited".
   - [X] When session_t::clean_posts is called, it should clear the "visited"
         flag.
   - [ ] The running total is not stored with the post, but is calculated as
         needed by the format_xacts object.
   - [ ] Which means that format_xacts now need to know the display predicate,
         much like format_accounts.
   - [X] account_t's xdata must remember whether or not the amount/total for
         the account has been calculated (with a different bool for each).
   - [X] account_t exposes two methods: family_total and self_total, which
         performs and caches a calculation based on walking the "visited"
         posts relating to that account.
   - [X] These calculations must be lazy, so that if a report never uses them,
         it never calculates either one.
   - [X] The same goes for statistics, which can determined from the list of
         posts.
   :PROPERTIES:
   :ID:       240CAF9A-2681-4AE9-A0DF-F17416E31C60
   :CREATED:  [2009-03-04 Wed 15:34]
   :END:
** CLOSED [#A] My current ledger.dat file is not reporting
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:49]
   - State "DONE"       [2008-10-29 Wed 03:29]
   :PROPERTIES:
   :ID:       807E9D3D-3F30-4818-9045-FDBC20C1417A
   :ARCHIVE_TIME: 2008-11-28 Fri 16:44
   :ARCHIVE_CATEGORY: Finance
   :CREATED:  [2008-10-06 Mon 19:38]
   :END:
** CLOSED --verify fails to run now
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:51]
   - State "DONE"       from "TODO"       [2009-10-28 Wed 01:35]
   :PROPERTIES:
   :ID:       A697E1A4-83D0-49EB-9533-29EB82659565
   :CREATED:  [2009-10-27 Tue 23:20]
   :END:
** CLOSED Bug in account balance display
   - State "CLOSED"     [2009-02-24 Tue 14:02] \\
     Simon can't remember exactly was the bug was here, so I'm closing it.
   - State "WAITING"    [2009-02-20 Fri 01:59]
   :DATA:
   2008/01/01 * previous balances
    liabilities:credit cards:discover 4462            $-1094.38
    equity:opening balances

   2008/01/18 * DISCOVER FEES
    liabilities:credit cards:discover 4462:interest          $-36.59
    assets:bank:wells fargo:checking

   2008/01/18 * DISCOVER FEES
    liabilities:credit cards:discover 4462:fee          $-39
    liabilities:credit cards:discover 4462:interest    $-28.17
    assets:bank:wells fargo:checking

   2008/3/1 * discover card payment
    liabilities:credit cards:discover 4462        $1198.14
    assets:bank:wells fargo:checking
   :END:
   that triggers it..
   :SCRIPT:
   ledger -f test.ledger -s bal discover
   :END:
   :PROPERTIES:
   :Submitter: Simon Michael <simon@joyful.com>
   :Version:  2.6.1
   :ID:       55831A79-0556-4872-A81F-F082A7B2E96B
   :CREATED:  [2008-11-20 Thu 23:48]
   :END:
** CLOSED Implied rates.
   - State "CLOSED"     [2009-02-24 Tue 13:36]
   Not sure what you should do in this case:
   :DATA:
   2007-12-31 * Start of year / Opening balances.
    Account1   100 EUR @ 1.4 USD
    Account1   -200 EUR
    Account2   100 USD
   :END:

   You could calculate the cost:
   :OUTPUT:
   140 USD
   -200 EUR
   100 USD
   :END:
   So, 240 USD and -200 EUR, which implies an aggregate exchange rate of 1.2,
   which is wildly different of the 1.4 EUR/USD rate declared above.

   (Do you fill in? In my Python version, I'll prefer not to, because I think
   that in general these will be errors rather than reflect implied rates.)
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   181
   :ID:       3E56A012-FE58-49B5-8CF0-7E80CD2B2F8A
   :END:
** CLOSED ITEM_TEMP posts must be removed from xacts and accounts properly
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:51]
   - State "DONE"       from "TODO"       [2009-10-27 Tue 16:40]
   :PROPERTIES:
   :ID:       F1D055D3-DDCE-49A2-A670-A84D1FD0C299
   :CREATED:  [2009-10-27 Tue 05:13]
   :END:
** CLOSED iterations.cc, and maybe others, need to use temporaries_t
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 00:51]
   - State "DONE"       from "TODO"       [2009-10-28 Wed 01:19]
   :PROPERTIES:
   :ID:       CE2AA70E-0B44-4A50-8D36-1DC1451F5473
   :CREATED:  [2009-10-27 Tue 23:20]
   :END:
** CLOSED Latest build of next f35bc939 produces slow binary
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 01:10]
   - State "DONE"       from "TODO"       [2009-10-26 Mon 21:32]
   :PROPERTIES:
   :ID:       18B7E853-848A-4211-BF98-C0C1B845E94F
   :URL:      http://github.com/jwiegley/ledger/issues#issue/3
   :CREATED:  [2009-10-26 Mon 21:31]
   :END:
** CLOSED The Ledger REPL argument parser should honor quoting syntax
   - State "CLOSED"     from "DONE"       [2009-11-02 Mon 01:22]
   - State "DONE"       from "TODO"       [2009-10-26 Mon 17:17]
   :PROPERTIES:
   :ID:       7A3DF3DE-5425-491F-90AA-C8C162F1085A
   :CREATED:  [2009-03-03 Tue 03:02]
   :END:
** CLOSED value_t::dump should render a string as it would parse it
   - State "CLOSED"     from "DONE"       [2009-06-28 Sun 15:28]
   - State "DONE"       from "TODO"       [2009-06-28 Sun 15:28]
   For example, what if "foo\"bar"?
   :PROPERTIES:
   :ID:       BA74FF13-7F2C-487A-922F-8E6931025B61
   :CREATED:  [2009-02-27 Fri 04:45]
   :END:
** CLOSED With --args-only, don't read ~/.pricedb
   - State "CLOSED"     from "DONE"       [2009-06-28 Sun 15:24]
   - State "DONE"       from "TODO"       [2009-06-28 Sun 15:21]
   :PROPERTIES:
   :ID:       5B07AD77-4920-4654-88F4-56CA55566BB4
   :CREATED:  [2009-06-24 Wed 14:18]
   :END:
** TESTED [#A] 'ledger -f src/value.h bal capital' crashes
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 00:48]
   - State "DONE"       from "TODO"       [2009-10-26 Mon 16:41] \\
     It now reports a series of errors and exits.
   - State "TODO"       from "DEFERRED"   [2009-10-22 Thu 07:34]
   - State "DEFERRED"   from "TODO"       [2009-06-16 Tue 16:24]
   :PROPERTIES:
   :ID:       25A099C9-EE9C-42E2-A18A-202DE9B9E157
   :CREATED:  [2009-02-27 Fri 15:38]
   :END:
** TESTED [#A] --budget not including "~ Monthly" entry                                  :ATTACH:
   - State "TESTED"     from "WORKSFORME" [2009-11-02 Mon 01:10] \\
     Found this bug and fixed it.
   - State "WORKSFORME" from "WAITING"    [2009-10-27 Tue 04:38]
   - State "WAITING"    from "TODO"       [2009-10-26 Mon 16:41] \\
     I've asked the user for more information; I can't see what's wrong with just
     the test case he sent, and I cannot find the original message.
   Thanks for your response.  I've attached a sample ledger file that I
   successfully reproduced the behaviour with.  Maybe it's something to do with
   it being the first of the month today?

   Here's what I'm seeing on the command-line:
   :OUTPUT:
   sayotte@damocles:~$ ledger -p april --budget reg
   2009/04/01 Budget entry         Assets:Bank:Checking     $-25000.00   $-25000.00
   2009/04/01 Budget entry         In:Ludicrous Salary       $25000.00            0
   2009/04/01 Budget entry         Expenses:Food              $-350.00     $-350.00
   2009/04/01 Budget entry         Assets:Bank:Checking        $350.00            0
   2009/04/01 Taco Schmell         Expenses:Food                 $6.50        $6.50
                                  Assets:Bank:Checking         $-6.50            0
   2009/04/10 Lienholder Bank      Assets:Bank:Checking       $-450.00     $-450.00
   :END:
   :OUTPUT:
   sayotte@damocles:~$ ledger -p april --budget reg Food
   2009/04/01 Taco Schmell         Expenses:Food                 $6.50        $6.50
   :END:
   :OUTPUT:
   sayotte@damocles:~$ date
   Wed Apr  1 19:07:20 EDT 2009
   :END:
   :OUTPUT:
   sayotte@damocles:~$ ledger --version
   Ledger 2.6.1, the command-line accounting tool

   Copyright (c) 2003-2008, John Wiegley.  All rights reserved.

   This program is made available under the terms of the BSD Public License.
   See LICENSE file included with the distribution for details and disclaimer.

   (modules: gmp, pcre)
   :END:
   :PROPERTIES:
   :Submitter: Stephen Ayotte <stephen.ayotte@gmail.com>
   :Message:  [[x-devonthink-item://%3C837b29c80904011614x79fed2b0la56f8a44a8dc45cb@mail.gmail.com%3E][ledger-2.6.1: --budget not including ~Monthly entry]]
   :Version:  2.6.1
   :ID:       655F6DF5-A30D-4CD9-AA06-787A2DB3C5C2
   :Attachments: testledger.dat
   :CREATED:  [2009-04-01 Wed 19:40]
   :END:
** TESTED [#A] Found bugs in the report query syntax parser
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 00:51]
   - State "DONE"       from "TODO"       [2009-10-28 Wed 23:09]
   Fails to parse:
   :SCRIPT:
   ledger bal --sort total --flat -X '$' not '(Income|Liabilities)'
   :END:
   :PROPERTIES:
   :ID:       373540CC-613B-47BC-B72F-C6D347157736
   :CREATED:  [2009-10-26 Mon 17:50]
   :END:
** TESTED 'ledger -f doc/sample.dat --color reg' is showing a red zero
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 16:52]
   - State "DONE"       from "TODO"       [2009-06-16 Tue 16:27]
   :PROPERTIES:
   :ID:       727B2DF8-A2A1-4716-9C15-547F20D5F933
   :CREATED:  [2009-02-23 Mon 02:47]
   :END:
** TESTED --budget doesn't produce correct output
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 01:10]
   - State "DONE"       from "TODO"       [2009-10-27 Tue 05:51]
   I have a budget transaction like this:
   :SOURCE:
   ~ Monthly
     Expenses:Auto:Fuel           $ 120.00
     Expenses:Food:Out            $ 100.00
     Expenses:Food:Groceries      $ 350.00
     Assets
   :END:

   It doesn't, however, seem to take effect with --budget:
   :OUTPUT:
   % ledger bal --p this --flat auto:fuel food:out
                $ 67.15  Expenses:Auto:Fuel
                $ 18.30  Expenses:Food:Out
   --------------------
                $ 85.45
   % ledger bal --p this --budget --flat auto:fuel food:out
                $ 67.15  Expenses:Auto:Fuel
                $ 18.30  Expenses:Food:Out
   --------------------
                $ 85.45
   % ledger --version | head -1
   Ledger next-0-g752677e, the command-line accounting tool
   :END:
   :PROPERTIES:
   :ID:       8254755E-7B61-47C8-B48E-A2A7FD79EB80
   :URL:      http://github.com/jwiegley/ledger/issues#issue/5
   :CREATED:  [2009-10-26 Mon 21:27]
   :END:
** TESTED An amount like 0h @ $70 gives divide by zero error
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 16:23]
   - State "DONE"       from "TODO"       [2009-06-16 Tue 16:23]
   :PROPERTIES:
   :ID:       6DAB9FE3-1399-4727-9AB1-FE413FB85A03
   :CREATED:  [2009-03-11 Wed 19:24]
   :END:
** TESTED Balance report is still broken
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 15:44]
   - State "DONE"       from "TODO"       [2009-06-15 Mon 17:53]
   :SCRIPT:
   ./ledger -f test/input/drewr.dat bal assets
   :END:
   This produces an erroneous balance report if I change drewr.dat.
   :OUTPUT:
         $ -3,804.00  Assets
             $ 30.00    Checking:Business
         $ -5,200.00    Savings
   --------------------
         $ -3,804.00
   :END:
   It should be:
   :OUTPUT:
         $ -3,804.00  Assets
          $ 1,366.00    Checking
             $ 30.00      Business
         $ -5,200.00    Savings
   --------------------
         $ -3,804.00
   :END:
   :PROPERTIES:
   :ID:       5A03CFC3-1A76-4F93-A1FE-555F98438C5A
   :ARCHIVE_TIME: 2009-06-15 Mon 17:53
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-03-24 Tue 18:38]
   :END:
** TESTED Balances with non-matching exchange rates is ambiguous
   - State "TESTED"     [2009-02-24 Tue 13:09]
   - State "DONE"       [2009-02-20 Fri 01:55]
   Not sure what it should say here... it balances in EUR, but not in
   USD. Should it fail?
   :DATA:
   2007-12-31 * Start of year / Opening balances.
   Account1   1000 EUR @ 1.6 USD
   Account2   -1000 EUR @ 1.5 USD
   :END:
   :OUTPUT:
   -*- mode: compilation; default-directory: "/tmp/" -*-
   Compilation started at Sat Apr 12 12:35:43

   ledger -f /tmp/brokrate.ledger bal
   While balancing xact:
   2007/12/31 * Start of year / Opening balances.
      Account1                            1000 EUR @ 1.6 USD
      Account2                            -1000 EUR @ 1.5 USD
   Unbalanced remainder is:
           100.0 USD
   Error: "/tmp/brokrate.ledger", line 3: Xact does not balance

   Compilation exited abnormally with code 1 at Sat Apr 12 12:35:43
   :END:
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   179
   :ID:       2E3496BD-143C-4D3E-8815-A01FFD31D132
   :CREATED:  [2008-04-12 Sat]
   :END:
** TESTED budget misbehavior with account tree
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 01:40]
   - State "DONE"       from "TODO"       [2009-11-02 Mon 01:40]
   The budget command behaves slightly different than I would expect
   for parent accounts.  Here is example output:
   :OUTPUT:
   % ledger budget -p this --effective --flat food
       $ 490.46     $ 925.00    $ -434.54   53%  Expenses:Food
       $ 361.11     $ 325.00      $ 36.11  111%  Expenses:Food:Groceries
       $ 129.35     $ 100.00      $ 29.35  129%  Expenses:Food:Out
   ------------ ------------ ------------ -----
       $ 490.46     $ 925.00    $ -434.54   53%
   :END:

   The relevant journal context:
   :SOURCE:
   ~ Monthly
     Expenses:Food                $ 500.00
     Expenses:Food:Out            $ 100.00
     Expenses:Food:Groceries      $ 325.00
     Assets
   :END:

   It looks like :Food gets added to its children instead of picking up the
   slack.  If I remove the children and let the parent provide a budget for it
   and its descendants, I get nothing.

   :SOURCE:
   ~ Monthly
     Expenses:Food                $ 500.00
     Assets
   :END:
   :OUTPUT:
   % ledger budget -p this --effective --flat food
              0     $ 500.00    $ -500.00     0  Expenses:Food
   :END:

   That's on the same journal data.
   :PROPERTIES:
   :ID:       D060256A-D0BD-429F-87B9-C9F73A24C0D3
   :Message:  [[message://4aec9a0bee27d_4b733fce572cbaf4188@fe3.rs.github.com.tmail][{GitHub} drewr sent you a message]]
   :Issue:    http://github.com/jwiegley/ledger/issues#issue/7
   :CREATED:  [2009-11-01 Sun 05:51]
   :END:
** TESTED Bug in ledger equity output
   - State "TESTED"     [2009-02-24 Tue 13:09]
   - State "DONE"       [2009-02-20 Fri 13:06]
   Seeing as how I've reached the end of my financial year my thoughts turned
   to how to 'close the books'.

   I have the following as part of my account tree:
   :DATA:
   Assets:Super:ARF
   Assets:Super:CSS
   Assets:Super:CSS:Contributions
   :END:

   The ledger 'balance' report correctly shows `Contributions` to be a child of
   `Assets:Super:CSS`:
   :OUTPUT:
   $ ledger -l 'd<=[30/06/2006]' -w -s bal ^Assets:Super
         $171,819.90  Assets:Super
          $12,777.87    ARF
         $159,042.03    CSS
           $3,861.00      Contributions
   --------------------
         $171,819.90
   :END:

   However the ledger `equity` report formats `Contributions` as a new
   top-level account:
   :OUTPUT:
   $ ledger -l 'd<=[30/06/2006]' -w equity ^Assets:Super

   14/07/2006 Opening Balances
    Assets:Super:ARF                      $12,777.87
    Assets:Super:CSS                     $155,181.03
    Contributions                          $3,861.00
                                        $-171,819.90
   :END:

   Whilst its no great issue to manually edit the report (have to change the
   date anyway) its slightly annoying.
   :PROPERTIES:
   :Submitter: <rpw101ml@yahoo.com.au>
   :Version:  2.6
   :Ticket:   16
   :ID:       1CF1EEC2-74F2-4538-8508-F0B424BA5D19
   :CREATED:  [2007-12-10 Mon]
   :END:
** TESTED Cannot use uncommoditized amounts as a per-unit cost
   - State "TESTED"     from "DONE"       [2009-06-18 Thu 16:08]
   - State "DONE"       from "TODO"       [2009-06-18 Thu 16:08]
   :PROPERTIES:
   :ID:       86D2BDC4-53A4-4039-99C9-F8C0370A89FB
   :CREATED:  [2009-06-18 Thu 16:07]
   :END:
** TESTED Completing currency fails
   - State "TESTED"     [2009-02-24 Tue 13:09]
   - State "DONE"       [2009-02-20 Fri 13:08]
   Strange bug with inference of currency:
   :DATA:
   2007/12/31 * Cost basis for: RED HAT INC RHT
   Assets:Investments:RBC-Broker:Account-RSP                                    4 RHT
   Equity:Opening-Balances:Cost                                            689.87 CAD

   2008/01/03=2007/12/28 * Sell -- RHT -- RED HAT INC CA TAUX DE CHANGE    .96590
   Assets:Investments:RBC-Broker:Account-RSP                              -4.00 RHT @      21.14 CAD
   Expenses:Financial:Commissions                                          9.95 USD @     .96590 CAD
   Assets:Investments:RBC-Broker:Account-RSP                              72.06 CAD
   Expenses:Financial:Fees
   :END:

   The fees are inserted without a commodity as -9.610705:
   :OUTPUT:
   ledger -w -f bug.txt  reg
   2007/12/31  Cost basis for: RED HAT INC RHT     As:Investments:RBC-Broker:Account-RSP                4.00 RHT               4.00 RHT
                                                Equity:Opening-Balances:Cost                       689.87 CAD             689.87 CAD
                                                                                                                            4.00 RHT
   2008/01/03  Sell -- RHT -- RED HAT INC CA TAU.. As:Investments:RBC-Broker:Account-RSP               -4.00 RHT             689.87 CAD
                                                Expenses:Financial:Commissions                       9.95 USD             689.87 CAD
                                                                                                                            9.95 USD
                                                As:Investments:RBC-Broker:Account-RSP               72.06 CAD             761.93 CAD
                                                                                                                            9.95 USD
                                                Expenses:Financial:Fees                             -9.610705              -9.610705
                                                                                                                          761.93 CAD
                                                                                                                            9.95 USD
                                                Expenses:Financial:Fees                             12.50 CAD              -9.610705
                                                                                                                          774.43 CAD
                                                                                                                            9.95 USD
   :END:
   This is a bug.

   I wish I could just say:
   :DATA:
   2008/01/03=2007/12/28 * Sell -- RHT -- RED HAT INC CA TAUX DE CHANGE    .96590
   Assets:Investments:RBC-Broker:Account-RSP                              -4.00 RHT @      21.14 CAD
   Expenses:Financial:Commissions                                          9.95 USD @     .96590 CAD
   Assets:Investments:RBC-Broker:Account-RSP                              72.06 CAD
   Expenses:Financial:Fees                                                      CAD
   :END:
   ... to tell Ledger which currency to use to complete the xact.
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   55
   :ID:       E4C9A8EA-296B-443F-937A-80182B21AA20
   :CREATED:  [2008-04-07 Mon]
   :END:
** TESTED Cost parsing bug
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 15:41]
   - State "DONE"       from "TODO"       [2009-06-15 Mon 17:01]
   [[message://2aaaa8b6-4a51-4acb-8a73-ac4c98578b59@d7g2000prl.googlegroups.com][Re: Tracking fuel and milage]]
   :PROPERTIES:
   :ID:       04C5E1CA-1B39-4214-81C7-FD5AA785308F
   :ARCHIVE_TIME: 2009-06-15 Mon 17:13
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-06-03 Wed 19:11]
   :END:
** TESTED Don't print trailing spaces after amount-elided postings
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 00:51] \\
     This is being tested by several of the baseline tests.
   - State "DONE"       from "TODO"       [2009-10-28 Wed 01:40]
   :PROPERTIES:
   :ID:       68C50F8D-4407-430F-8FE1-40B96D38173A
   :CREATED:  [2009-10-27 Tue 22:42]
   :END:
** TESTED Expenses:Wedding appears twice in the attached balance command
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 01:21]
   - State "DONE"       from "TODO"       [2009-10-26 Mon 21:11]
   :SCRIPT:
   ledger bal --sort amount --flat expenses:foo
   :END:
   :PROPERTIES:
   :ID:       5F1BAF17-2A7C-4992-ACCA-B1111104E4EE
   :CREATED:  [2009-10-26 Mon 17:21]
   :END:
** TESTED Forecasting goes too far
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 01:43]
   - State "DONE"       from "TODO"       [2009-10-26 Mon 20:55] \\
     This is fixed in 3.0.
   - Note taken on [2007-12-10 Mon 19:04] \\
     Because of the way that forecasting is (currently) implemented, you will often
     see an entry that is "one beyond" the condition of your forecast. I hope to
     remedy this in the near future.
   :OUTPUT:
   tim@yggdrasil [/Users/tim]# ledger --forecast 'd<=[2006/08/27]' reg
   ^assets
   2006/09/01 Forecast entry       Assets                      $-1322.00    $13313.99
   :END:
   Why is the last entry being displayed?  Doesn't the date predicate prevent
   that from happening?
   :PROPERTIES:
   :CREATED:  [some entries which balance correctly]
   :Submitter: <tim@scarybright.org>
   :Version:  2.6
   :Ticket:   15
   :ID:       E627C594-A019-4D87-A6B4-C8E75F6D8FC0
   :END:
** TESTED Ledger is still getting confused by trailing whitespace                        :ATTACH:
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 17:04]
   - State "DONE"       from "TODO"       [2009-06-16 Tue 17:03]
   I just noticed that ledger ist confused by whitespace at the end of
   lines. Attached is a simple testcase where ledger reports:
   :OUTPUT:
   % ledger -f test.ldg bal
            -17,94€  Aktiva:Bank
            -17,94€    Girokonto
           -800,00€    Girokonto
            800,00€    Sparkonto
             17,94€  Aufwand:Einkauf:Lebensmittel
   --------------------
                  0
   :END:
   instead of:
   :OUTPUT:
   % ledger -f test.ldg bal
            -17,94€  Aktiva:Bank
           -817,94€    Girokonto
            800,00€    Sparkonto
             17,94€  Aufwand:Einkauf:Lebensmittel
   --------------------
                  0
   :END:
   This is caused by an extra space at the end of line 12.
   :PROPERTIES:
   :Submitter: Johann Klähn <kljohann@gmail.com>
   :Message:  [[message://b0bc07100903260936n26b7c404nc1a9aaa2c9aa2da0@mail.gmail.com][Ledger bug: whitespace at eol]]
   :ID:       C523E23F-CFAC-4A53-B0C6-21226640E763
   :Attachments: test.ldg
   :CREATED:  [2009-04-01 Wed 18:50]
   :END:
** TESTED Left justifying an amount with %-12{amount} does nothing
   - State "TESTED"     from "DONE"       [2009-06-28 Sun 15:24]
   - State "DONE"       from "TODO"       [2009-06-28 Sun 15:23]
   :PROPERTIES:
   :ID:       F559EC12-7645-465D-8B2D-D3BC61030493
   :CREATED:  [2009-03-03 Tue 04:12]
   :END:
** TESTED Make sure the period flag (-p) can accept "YYYY/MM"
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 01:59]
   - State "DONE"       from "TODO"       [2009-11-02 Mon 01:59]
   :PROPERTIES:
   :ID:       7F3650FD-7225-47D5-AB77-A0D5025B4941
   :Message:  [[message://741c09a4-9f52-4346-9e6f-2f4d407e5e49@s31g2000yqs.googlegroups.com][Re: All known bugs and features for 3.0 implemented]]
   :CREATED:  [2009-11-01 Sun 05:51]
   :END:
** TESTED Problem when specifying the year in a data file
   When I use this file:
   :DATA:
   Y2008

   01/30 A
        Bank    130
        Income

   02/01 B
        Bank    140
        Income

   02/20 C
        Bank    150
        Income

   03/01 D
        Bank    160
        Income
   :END:
   And I run ledger on it, the following output is produced:
   :OUTPUT:
   ledger -f journal.txt reg
   2008/01/30 A                     Bank      130          130
                               Income     -130            0
   2002/01/01 B                     Bank      140          140
                               Income     -140            0
   2008/02/20 C                     Bank      150          150
                               Income     -150            0
   2003/01/01 D                     Bank      160          160
                               Income     -160            0
   :END:
   The years are not at all what I expected. Is this a bug or am I using a
   wrong file format?
   :PROPERTIES:
   :Submitter: Christopher <christopher.illies@ki.se>
   :Version:  2.6.1
   :ID:       13965214-EFDD-43DF-BD9F-9EC72DC509AD
   :CREATED:  [2008-10-15 Wed 06:39]
   :END:
** TESTED Regression: add support back for a "terminus" date
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 18:46]
   - State "DONE"       from "TODO"       [2009-06-16 Tue 18:46]
   Here's something I would like to open up for discussion.

   Suppose I have the ledger file:
   :DATA:
   2008/01/01 * Purchase Apple shares
       Equities        1000 AAPL @ $2
       Cash

   2008/06/30 * Sell some Apple shares
       Equities        -500 AAPL @ $2.5
       Cash

   P 2008/10/01 02:18:02 AAPL $3
   P 2009/01/31 02:18:02 AAPL $4
   P 3000/01/01 02:18:02 APPL $100
   :END:
   At end of 2008, I have 500 AAPL shares.

   If I type
   :SCRIPT:
   ledger -f example01.txt --end 2008/12/31 -JV bal Equities
   :END:
   I get the output:
   :OUTPUT:
   2009-03-29 2000
   :END:
   I would argue that the output should be
   :OUTPUT:
   2008-12-31 1500
   :END:

   My argument is that if I specify an end date, then I want ledger to assume
   that the current date is the end date I specify, and perform all reports and
   calculations on that basis. After all, if you stick with the current
   implementation, it could easily mess up any historical reporting you try to
   do.
   :PROPERTIES:
   :Submitter: Mark Carter <alt.mcarter@googlemail.com>
   :Message:  [[message://62f2a66e0903290043l2e98bad4jfe20e0a313064674@mail.gmail.com][Discussion/bug about end/current dates]]
   :ID:       647D5DB9-DBBB-47C8-80CE-F3F70E3B0253
   :CREATED:  [2009-04-01 Wed 18:55]
   :END:
** TESTED Rounding bug
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 15:43]
   - State "DONE"       from "TODO"       [2009-06-15 Mon 17:13]
   [[message://20090411120649.GZ1037@lavos.net][Another rounding issue]]
   :DATA:
   D $1,000.00

   2009/01/01 Sample
   assets  134.123 FOO @ $8.88
   assets  100 BAR @ $8.88
   equity
   :END:
   :PROPERTIES:
   :ID:       B68FFB0D-A9A0-479C-A6C0-68853F229333
   :ARCHIVE_TIME: 2009-06-15 Mon 17:13
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-06-03 Wed 19:11]
   :END:
** TESTED Rounding problem
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 18:27]
   - State "DONE"       [2009-02-24 Tue 11:42]
   I seem to have a rounding problem when I use the -B option, if I have a
   ledger that looks like this:
   :DATA:
   2008/01/01      * Checking balance
        Assets:Bank:Checking                            £0.00
        Equity:Opening Balances

   2008/02/02      Salary
        Income:Employer                                         $-512.85
        Assets:Bank:Checking                            $512.85 @@ £334.00

   2008/03/02      Salary
        Income:Employer                                         $-404.82
        Assets:Bank:Checking                            $404.82 @@ £248.07
   :END:
   Then issue the command "ledger -Bf test.ledger bal" I get this out:
   :OUTPUT:
           £582.07  Assets
    £-582.06999876  Income
   --------------------
       £0.00000124
   :END:
   :PROPERTIES:
   :Submitter: Tony Edgecombe <tonyedgecombe@gmail.com>
   :Version:  2.6.1
   :ID:       5FBF2ED8-EEAA-440E-AED5-67401B107E44
   :CREATED:  [2008-10-21 Tue 19:00]
   :END:
** TESTED The -V flag is not working
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 18:28]
   - State "DONE"       [2009-02-24 Tue 11:42]
   Here's the data input
   :DATA:
   2008/04/15 * Paid expenses back from cie.
   Expenses:Cie-Reimbursements    2000 CAD @ 1.10 EUR
   Assets:Checking

   P 2008/04/20 00:00:00 CAD 1.20 EUR
   :END:

   When I run the following command this does not work:
   :OUTPUT:
   Hermes:/Users/johnw $ ledger -f /tmp/test.dat -V reg
   2008/04/15 Paid expenses back.. Ex:Cie-Reimbursements   2200.00 EUR  2200.00 EUR
                                Assets:Checking        -2200.00 EUR            0
   2008/04/07 Commodities revalued                            2000 CAD
                                                       -2200.00 EUR     2000 CAD
                                                                    -2200.00 EUR
   :END:

   It should have reported in terms of Euros only.
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   53
   :ID:       D943AE0F-44EA-47EE-BA85-AFC513E039EB
   :CREATED:  [2008-04-07 Mon]
   :END:
** TESTED The entry command is broken
   - State "TESTED"     from "DONE"       [2009-06-16 Tue 16:17]
   - State "DONE"       from "TODO"       [2009-06-16 Tue 16:15]
   :SCRIPT:
   ledger -f doc/sample.dat entry 2009/03/15 book 10
   :END:
   gives me:
   :OUTPUT:
   <no item context>
   Unbalanced remainder is:
              $10.00
   Error: Transaction does not balance
   :END:
   :PROPERTIES:
   :ID:       793F6BF0-9CDE-4741-967A-2CEA697476B4
   :CREATED:  [2009-03-24 Tue 18:31]
   :END:
** TESTED The period -p "june 2008" ranges from 6/2008-1/2009
   - State "TESTED"     from "DONE"       [2009-06-18 Thu 01:14]
   - State "DONE"       from "TODO"       [2009-06-18 Thu 01:13]
   :PROPERTIES:
   :ID:       BBFA1759-3E90-402B-93A7-FC4E7E342B08
   :CREATED:  [2009-06-17 Wed 17:07]
   :END:
** TESTED Weird timelog report bug
   - State "TESTED"     [2009-02-24 Tue 13:09]
   - State "DONE"       [2009-02-20 Fri 13:19]
   ledger 2.6.1 can report wrong numbers for midnight-spanning timelog records
   depending on dates.
   :DATA:
   i 2007/03/01 23:00:00 A
   o 2007/03/02 01:00:00
   i 2007/03/11 23:00:00 B
   o 2007/03/12 01:00:00
   :END:
   :OUTPUT:
   $ ledger -f <DATA> register
   2007/03/02       (A)       2.0h         1.0h
   2007/03/12       (B)       1.0h         3.0h
   :END:
   The B xact should be 2 hours. Changing the date will probably fix it.
   :PROPERTIES:
   :Submitter: Simon Michael <simon@joyful.com>
   :Version:  2.6.1
   :ID:       3AB70168-D4B6-48CE-8C61-8C775E5B0E1B
   :CREATED:  [2008-10-08 Wed 15:43]
   :END:
** TESTED When --flat is being used, sort against all accounts
   - State "TESTED"     from "DONE"       [2009-11-02 Mon 01:40]
   - State "DONE"       from "TODO"       [2009-10-26 Mon 18:52]
   :PROPERTIES:
   :ID:       7D084EBD-3D4C-4967-9A4B-7F014E625DF6
   :CREATED:  [2009-03-11 Wed 15:11]
   :END:
** NOTE Building Boost with g++-4.4:
   boost/tools/build/v2/user-config.jam:
     using gcc : 4.4 : g++-4.4 ;
   boost/tools/build/v2/tools/darwin.jam:
     local command = [ common.get-invocation-command darwin : g++ : g++-mp-4.4 ] ;
     flags darwin.compile OPTIONS : -gdwarf-2 ;
   :PROPERTIES:
   :ID:       0C8CDAC9-5280-4111-82DE-91C0B7206714
   :VISIBILITY: folded
   :CREATED:  [2009-10-29 Thu 23:09]
   :END:
** NOTE Found a very nasty interaction with g++-mp-4.4 and Boost
   - Note taken on [2009-10-25 Sun 04:04] \\
     I've created a [[https://trac.macports.org/ticket/22234][MacPorts ticket]] for this issue.
   - Note taken on [2009-10-25 Sun 03:45] \\
     Apparently I have to use the following configure option:
     --enable-fully-dynamic-string.  Paolo Carlini [[message://20091025055053.32533.qmail@sourceware.org][writes]]:

     The Snow Leopard case is different, apparently they decided to build the
     system compiler with --enable-fully-dynamic-string and then that shows up
     everywhere, see [[http://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D41645][41645]]. As far as we can understand so far, people willing
     to experiment with recent GCCs on Snow Leopard have to use that configure
     time switch.
   I'm actually getting this same error on Snow Leopard (Mac OS X 10.6.0).
   It's pretty easy to reproduce with Boost (1.40):
   :SOURCE:
   #include <string>
   #include <sstream>

   #include <boost/variant.hpp>

   int main()
   {
     std::ostringstream buf;
     boost::variant<bool, std::string> data;
     data = buf.str();
     data = false;
     return 0;
   }
   :END:
   :SCRIPT:
   $ g++ -I/opt/local/include -o bug bug.cc
   :END:

   What happens here is that ostringstream, which is in libstdc++.dylib,
   returns an empty string which does not match the notion of empty string
   compiled into my executable; thus when Boost tries to deconstruct the
   string it stored in order to store the boolean, it crashes trying to
   deallocate a foreign lib's empty string.

   This doesn't happen with the same Boost using the stock compiler (g++ 4.2).

   With the stock compiler, g++ 4.2.1:
   :OUTPUT:
   vulcan /tmp $ otool -L bug
   bug:
           /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current
   version 7.9.0)
           /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
   version 123.0.0)
   vulcan /tmp $ nm -o /usr/lib/libstdc++.6.dylib | grep empty_rep
   0003f200 T __ZNSbIwSt11char_traitsIwESaIwEE12_S_empty_repEv
   0003f2fd T __ZNSbIwSt11char_traitsIwESaIwEE4_Rep12_S_empty_repEv
   0006fe50 S __ZNSbIwSt11char_traitsIwESaIwEE4_Rep20_S_empty_rep_storageE
   0002fae3 T __ZNSs12_S_empty_repEv
   0002fbe7 T __ZNSs4_Rep12_S_empty_repEv
   0006fdb0 S __ZNSs4_Rep20_S_empty_rep_storageE
   vulcan /tmp $ nm bug | grep empty_rep
   0000000100001fc7 T __ZNSs12_S_empty_repEv
   0000000100001f14 T __ZNSs4_Rep12_S_empty_repEv
   000000010000dd00 D __ZNSs4_Rep20_S_empty_rep_storageE
   :END:

   With the compiler built from MacPorts, g++ 4.4.2:
   :OUTPUT:
   vulcan /tmp $ otool -L bug
   bug:
           /opt/local/lib/gcc44/libstdc++.6.dylib (compatibility version 7.0.0,
   current version 7.13.0)
           /opt/local/lib/gcc44/libgcc_s.1.dylib (compatibility version 1.0.0,
   current version 1.0.0)
           /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
   version 123.0.0)
   vulcan /tmp $ nm /opt/local/lib/gcc44/libstdc++.6.dylib | grep empty_rep
   00000000000655c0 T __ZNSbIwSt11char_traitsIwESaIwEE12_S_empty_repEv
   00000000000658c0 T __ZNSbIwSt11char_traitsIwESaIwEE4_Rep12_S_empty_repEv
   00000000000bbe40 D __ZNSbIwSt11char_traitsIwESaIwEE4_Rep20_S_empty_rep_storageE
   000000000004de20 T __ZNSs12_S_empty_repEv
   000000000004e0e0 T __ZNSs4_Rep12_S_empty_repEv
   00000000000bbdc0 D __ZNSs4_Rep20_S_empty_rep_storageE
   vulcan /tmp $ nm bug | grep empty_rep
   000000010000193b T __ZNSs4_Rep12_S_empty_repEv
   0000000100007820 D __ZNSs4_Rep20_S_empty_rep_storageE
   :END:

   It likes like the S vs. D is the main difference.  Is it how MacPorts is
   building g++?  I've logged this information into the GCC bugs database:
   [[http://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D24196][Using string instances to pass arguments to dlls fails]].

   This discrepancy only occurs when _GLIBCXX_DEBUG=1.
   :PROPERTIES:
   :ID:       E4156C53-FC70-49CD-80A1-552C4B508010
   :VISIBILITY: folded
   :CREATED:  [2009-10-25 Sun 01:44]
   :END:
** NOTE Problem using boost::regex on Snow Leopard with g++ 4.4
   The following code shows the exception:
   :SOURCE:
   #include <string>
   #include <boost/regex.hpp>

   int main(int argc, char **argv)
   {
     std::string s("(.*)bar|(.*)bah");
     boost::regex re_node(s);
     return 1;
   }
   :END:

   This happens when there is a mismatch in the use of _GLIBCXX_DEBUG.
   :PROPERTIES:
   :ID:       3C40259C-BE0C-4657-A379-80E2F2B61286
   :VISIBILITY: folded
   :CREATED:  [2009-10-25 Sun 03:38]
   :END:
* Build
** DONE [#A] [[bug:472][#472]] Regression failure in Ledger master
   - State "DONE"       from "TODO"       [2011-03-28 Mon 01:59]
   I've got a checked-out copy of ledger from github (master).  'git pull'
   shows everything is up to date. 'cat /etc/*release*' shows:
   :OUTPUT:
   DISTRIB_ID=Ubuntu
   DISTRIB_RELEASE=10.10
   DISTRIB_CODENAME=maverick
   DISTRIB_DESCRIPTION="Ubuntu 10.10"
   :END:

   I ran 'make dist-clean; configure; make; make check' and got the following:
   :OUTPUT:
   Regression failure in output from opt-lot-prices.test:
    @@ -347,8 +347,8 @@
                                             "Plans: Mithril Shield Spike" 1 {2.105G}
                                              "Plans: Mithril Shield Spike" 1 {2.30G}
                                                    "Plans: Wildthorn Mail" 1 {1.25G}
    -                                      "Recipe: Elixir of Giant Growth" 1 {1.00G}
    -                                      "Recipe: Elixir of Giant Growth" 2 {1.50G}
    +                                      "Recipe: Elixir of Giant Growth" 2 {1.00G}
    +                                      "Recipe: Elixir of Giant Growth" 1 {1.50G}
                                                                    46.42G
                                             "Plans: Mithril Shield Spike" 1 {2.105G}
                                              "Plans: Mithril Shield Spike" 1 {2.30G}
   E...
   Regression failure in output from opt-lots.test:
    @@ -384,8 +384,8 @@
                                 "Plans: Mithril Shield Spike" 1 {2.30G} [2006/03/15]
                                       "Plans: Wildthorn Mail" 1 {1.25G} [2006/03/14]
                              "Recipe: Elixir of Giant Growth" 1 {1.00G} [2006/03/15]
    -                         "Recipe: Elixir of Giant Growth" 1 {1.50G} [2006/03/15]
    -                                      "Recipe: Elixir of Giant Growth" 1 {1.50G}
    +                                      "Recipe: Elixir of Giant Growth" 1 {1.00G}
    +                         "Recipe: Elixir of Giant Growth" 1 {1.50G} [2006/03/15]
                                        "Beaststalker's Belt" 1 {65.00G} [2006/03/15]
                                                    "Beaststalker's Belt" -1 {65.00G}
                                                                    46.42G
   E........................................................................
   OK (142)  FAILED (119)
   FAIL: BaselineTests
   :END:
   :PROPERTIES:
   :Submitter: Alan Young <alansyoungiii@gmail.com>
   :ID:       B5828DDD-4022-4246-AF49-C236051F13F6
   :Message:  [[message://AANLkTi=7j=FpzODjv5PMRjod+aHb7MGHmJE4fKwYCGzJ@mail.gmail.com][Regression failure in output from ...]]
   :CREATED:  [2011-02-02 Wed 05:51]
   :END:
** DONE [#A] Add a --no-git option to acprep for orc_emac
   - State "DONE"       from "TODO"       [2009-11-10 Tue 20:05]
   :PROPERTIES:
   :ID:       833997BF-EE60-4F81-BCBC-D9F7C607472F
   :CREATED:  [2009-11-10 Tue 15:13]
   :END:
** DONE [#A] Build failure building latest Git version (archive.cc)
   - State "DONE"       from "TODO"       [2009-11-07 Sat 06:51]
   :PROPERTIES:
   :CREATED:  [2009-11-03 Tue 15:18]
   :ID:       9EF3FC3E-1699-4DFA-B7AF-27779BCAC510
   :Message:  [[message://7ff1eb7d-2fbe-4b50-9d0a-373e7d929574@j19g2000yqk.googlegroups.com][Build failure latest git]]
   :END:
** DONE [#A] make release-distcheck is failing
   - State "DONE"       [2009-03-07 Sat 14:59]
   - State "STARTED"    [2009-03-06 Fri 17:59]
   :PROPERTIES:
   :ID:       FF734E1D-5A6F-4E1E-927B-6D6D60075FAC
   :CREATED:  [2009-03-06 Fri 17:55]
   :END:
** DONE [#A] tools/proof is failing
   - State "DONE"       [2009-03-08 Sun 01:24]
   - State "STARTED"    [2009-03-06 Fri 17:59]
   :PROPERTIES:
   :ID:       5663B55E-43BA-4694-B6C7-3A75E58024FA
   :CREATED:  [2009-03-06 Fri 17:55]
   :END:
** DONE [[bug:367][#367]] Missing install-sh in ledger-2.6.3.tar.gz
   - State "DONE"       from "TODO"       [2010-07-12 Mon 23:38]
   - Note taken on [2010-06-28 Mon 23:53] \\
     He later wrote: [[message://B38200D9-590A-4999-82C7-3182E9B966C4@gmail.com][Re: Improved version of git-changelog]].
   :PROPERTIES:
   :ID:       3F1FACAE-CFBF-422B-97F9-274E38B3D448
   :Submitter: Lionel Young <lionelyoung@gmail.com>
   :Message:  [[message://op.vewpodevoxqjz7@localhost.localdomain][Missing install-sh in ledger-2.6.3.tar.gz]]
   :CREATED:  [2010-06-28 Mon 23:53]
   :END:
** DONE [[bug:430][#430]] Build is failing on Ubuntu 10.10
   - State "DONE"       from "TODO"       [2011-03-28 Mon 02:00]
   :PROPERTIES:
   :ID:       798C73BE-6AA0-4325-9545-8E9BAECF1178
   :CREATED:  [2011-02-16 Wed 12:03]
   :Message:  [[message://20110216143052.C7F1773@mail.johnwiegley.com][{Bug 430} Build is failing on Ubuntu 10.10]]
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :Date:     Wed, 16 Feb 2011 08:30:52 -0600 (CST)
   :END:
** DONE acprep gives no warning about an unknown phase
   - State "DONE"       from "STARTED"    [2010-01-21 Thu 01:27]
   :LOGBOOK:
   CLOCK: [2010-01-21 Thu 01:24]--[2010-01-21 Thu 01:27] =>  0:03
   :END:
   :PROPERTIES:
   :ID:       3FAC3387-9DCC-40AB-BE60-BA692E922F3F
   :CREATED:  [2009-12-06 Sun 06:03]
   :END:
** DONE acprep should call submodule
   - State "DONE"       from "TODO"       [2009-10-25 Sun 19:16]
   :PROPERTIES:
   :ID:       7A3A602A-3F31-4E4C-9941-F5BBF0D58ED6
   :CREATED:  [2009-10-23 Fri 06:13]
   :END:
** DONE acprep's --boost option does not accept a value
   - State "DONE"       from "TODO"       [2009-11-07 Sat 06:34]
   :PROPERTIES:
   :ID:       36778975-47E7-4D79-98FF-4B6C8F650914
   :CREATED:  [2009-11-01 Sun 06:41]
   :END:
** DONE Add a "dependencies" phase, which installs all of Ledger's deps
   - State "DONE"       [2009-03-09 Mon 17:22]
   :PROPERTIES:
   :ID:       62A2C553-30DA-48D5-9654-A6956A216D09
   :CREATED:  [2009-03-09 Mon 13:57]
   :END:
** DONE Add a BOOST_PREFIX envvar, and much more debugging info
   - State "DONE"       [2009-03-09 Mon 22:02]
   :PROPERTIES:
   :ID:       A3B72BA7-5D50-4370-822B-FA63DF01B6F5
   :CREATED:  [2009-03-09 Mon 17:56]
   :END:
** DONE Add a way for building in any directory (other than ~/Products) in acprep
   - State "DONE"       [2008-08-08 Fri]
   :PROPERTIES:
   :ID:       FFA63988-237E-4B2A-AC12-6CA362AEC7B1
   :CREATED:  [2008-07-24 Thu]
   :END:
** DONE Build Ledger with Clang
   - State "DONE"       from "TODO"       [2010-10-06 Wed 22:01]
   :PROPERTIES:
   :ID:       EEA6F9AB-C03D-4FA4-88AF-7FDAC9750598
   :CREATED:  [2010-10-06 Wed 02:25]
   :END:
** DONE Create a MacPorts Portfile for Ledger
   - State "DONE"       [2008-09-28 Sun 17:09]
   :PROPERTIES:
   :ID:       03B44F60-68CC-4A32-80AC-3C38E319750D
   :ARCHIVE_TIME: 2008-10-15 Wed 17:17
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2008-09-28 Sun 16:45]
   :END:
** DONE Create a phase for packaging up and uploading ledger-3.0a.dmg
   - State "DONE"       from "TODO"       [2009-06-16 Tue 17:08]
   :PROPERTIES:
   :ID:       206551B6-6CF2-4D48-BC5C-7469C00F395C
   :CREATED:  [2009-03-19 Thu 03:04]
   :END:
** DONE Create an MacPorts build of Ledger
   - State "DONE"       [2009-01-29 Thu 15:31]
   :PROPERTIES:
   :ID:       7F75AEF6-BBB8-4BBA-BCCA-FE328037EBC4
   :CREATED:  [2008-08-08 Fri]
   :END:
** DONE Enable "buildbot try" on the VPS
   - State "DONE"       [2008-05-03 Sat]
   :PROPERTIES:
   :ID:       6A9A8E1B-29E9-4B06-9AE3-BBB2D5BB6D9E
   :CREATED:  [2008-04-24 Thu]
   :END:
** DONE Ensure only the minimum amount of compilation is being done
   - State "DONE"       [2009-03-05 Thu 00:07]
   :PROPERTIES:
   :ID:       8E14BB51-28FF-484E-BEC1-F132A5C0F657
   :CREATED:  [2009-03-04 Wed 20:44]
   :END:
** DONE Find out how to submit a build against a specific branch on Buildbot
   - State "DONE"       [2008-07-26 Sat]
   This may simply be a matter of telling the scheduler and Git() object to
   watch other branches.
   :PROPERTIES:
   :ID:       4B291AFD-00BF-479B-A067-0B01139BA475
   :CREATED:  [2008-04-24 Thu]
   :END:
** DONE Find out why master fails to build on tdelaet's OpenBSD box
   - State "DONE"       [2008-08-17 Sun 06:33] \\
     It's because his Boost isn't up to date.  I'll have to wait until he has Boost
     1.35 working OpenBSD 4.4 before we can build anything other than v2.6.1b on
     his machines.
   ssh obsd86
   :PROPERTIES:
   :ID:       30186BD0-CD2E-4B22-AD4C-84D7F6552D4B
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE Fix the warnings that g++ 4.3.3 finds
   - State "DONE"       [2009-02-28 Sat 05:02]
   :PROPERTIES:
   :ID:       56EACF79-5A4F-4880-878B-605731F7F0FC
   :CREATED:  [2009-02-27 Fri 21:33]
   :END:
** DONE g++-4.3 core dumps when trying to use system.hh.gch
   - State "DONE"       [2009-03-16 Mon 04:56] \\
     The problem was that my pre-compiled header file was not the very first
     #include in every .cc file.
   :PROPERTIES:
   :ID:       3165A1E3-F216-4BA2-A09E-9C442D900802
   :CREATED:  [2009-03-09 Mon 20:16]
   :END:
** DONE Gather together the Ledger products directories
   - State "DONE"       [2009-03-09 Mon 05:52]
   For example, collect them all under ~/Products/ledger/<branch>/<type>
   :PROPERTIES:
   :ID:       E82A95D4-D423-4739-A024-EF01A32409DA
   :CREATED:  [2009-03-08 Sun 18:40]
   :END:
** DONE Get 'make check' working again for Ledger 2.7
   - State "DONE"       [2008-07-27 Sun]
   This means getting the unit tests running again.
   :PROPERTIES:
   :ID:       987FB7D3-B04E-44E4-9CC4-F0694F96051E
   :CREATED:  [2008-07-26 Sat]
   :END:
** DONE Get 'make distcheck' working again with Ledger 2.6.1
   - State "DONE"       [2008-07-28 Mon]
   :PROPERTIES:
   :ID:       F5850319-0C51-429B-90BE-DDA4400F7F02
   :CREATED:  [2008-04-23 Wed]
   :END:
** DONE Get 'make distcheck' working again with Ledger 2.7
   - State "DONE"       [2008-08-08 Fri]
   :PROPERTIES:
   :ID:       A6AA8D89-51B0-434B-8259-A557FB15BC47
   :CREATED:  [2008-07-27 Sun]
   :END:
** DONE Get Buildbot builds to work on my MacBook Pro
   - State "DONE"       [2008-04-26 Sat]
   make[1]: *** No rule to make target `all'.  Stop.
   :PROPERTIES:
   :ID:       1D0FD629-FD7B-4E7F-8E8F-3D73FD725F32
   :CREATED:  [2008-04-24 Thu]
   :END:
** DONE Have the version in Ledger's configure.in based off of git-describe
   - State "DONE"       [2008-05-18 Sun]
   :PROPERTIES:
   :ID:       08E58F60-5437-46BE-A81B-1839FA4921FB
   :CREATED:  [2008-05-08 Thu]
   :END:
** DONE Improve my pre-commit so it checks out everything it needs to
   - State "DONE"       [2009-02-21 Sat 16:32]
   :PROPERTIES:
   :ID:       5374E1C7-41CA-474D-A16F-54D26BD18AF3
   :CREATED:  [2009-02-21 Sat 02:09]
   :END:
** DONE Make the optimized build for tools/push use -j16
   - State "DONE"       from "TODO"       [2009-11-27 Fri 13:51]
   :PROPERTIES:
   :ID:       05DADC75-EA29-44CE-94F4-4F8D1419AFF1
   :CREATED:  [2009-11-25 Wed 15:25]
   :END:
** DONE Move system.hh.gch into the build directory
   - State "DONE"       [2009-03-09 Mon 17:22]
   :PROPERTIES:
   :ID:       81C1D1E9-3F33-4EFF-B8BD-4B4BF3520289
   :CREATED:  [2009-03-09 Mon 13:56]
   :END:
** DONE myacprep and tools/build shoud accept --opt, --prof, --gcov
   - State "DONE"       [2009-02-21 Sat 15:53]
   :PROPERTIES:
   :ID:       4CCF74DD-62AC-47F6-9E84-9D4C2EA6FB37
   :CREATED:  [2009-02-21 Sat 15:19]
   :END:
** DONE Provide acprep options for exactly locating where Boost is
   - State "DONE"       from "TODO"       [2010-01-21 Thu 02:36]
   :PROPERTIES:
   :ID:       86E13BB1-4C0B-4B74-B612-3708A3273307
   :Message:  [[message://90e4c24f-0cab-466d-8415-1b7cd008c15c@v25g2000yqk.googlegroups.com][acprep/configure boost-suffix detection finds oldest first]]
   :CREATED:  [2010-01-20 Wed 16:30]
   :END:
** DONE Quiet the Makefile by reducing the Python link lines
   - State "DONE"       [2009-02-05 Thu 21:55]
   :PROPERTIES:
   :ID:       FC243C26-63F1-4969-88C0-FEC720DE0248
   :CREATED:  [2009-02-05 Thu 03:42]
   :END:
** DONE Restore old Ledger tests, like tools/confirm.py
   - State "DONE"       [2009-02-24 Tue 22:32]
   :PROPERTIES:
   :ID:       53E1B0D6-1CD9-44C1-B066-E40F4A3D461D
   :CREATED:  [2009-02-24 Tue 11:08]
   :END:
** DONE Restore VCS history for Ledger from April to September 2004 from backups
   - State "DONE"       [2008-07-15 Tue]
   :PROPERTIES:
   :ID:       844BCBC7-7DAB-479B-A448-9062F6F5480C
   :CREATED:  [2008-05-28 Wed]
   :END:
** DONE The Buildbot is failing to build master
   - State "DONE"       [2008-08-17 Sun 06:32] \\
     Fixed now.
   :OUTPUT:
   src/session.h: In member function 'void ledger::session_t::clean_all()':
   src/session.h:171: error: 'clear_posts' was not declared in this scope
   src/session.h:172: error: 'clear_accounts' was not declared in this scope
   make[1]: *** [libledger_la-journal.lo] Error 1
   :END:
   :PROPERTIES:
   :ID:       FFE100BB-3383-4E27-ADD9-08AFF0518846
   :CREATED:  [2008-08-16 Sat]
   :END:
** DONE Upgrade to use local-time-0.9.2
   - State "DONE"       [2007-11-25 Sun 21:02]
   :PROPERTIES:
   :ARCHIVE_TIME: 2007-12-03 Mon 17:50
   :ARCHIVE_CATEGORY: Computer
   :ID:       D7354D27-EFEA-4747-8185-B2A48E2F5FF3
   :CREATED:  [2007-11-24 Sat]
   :END:
** DONE Using my PowerPC, build a universal Ledger binary for OS X Leopard
   - State "DONE"       [2008-08-08 Fri]
   :PROPERTIES:
   :ID:       DF73E41F-A867-4A29-BA88-BC9F69A139CD
   :CREATED:  [2008-08-04 Mon]
   :END:
** DONE Why does the make process keep regenerating files
   - State "DONE"       [2009-02-27 Fri 04:11]
   :OUTPUT:
   $ git --no-pager commit -F - --all --amend
   make  check-recursive
   Making check in po
   make ledger.pot-update
   if LC_ALL=C grep 'GNU ledger' ../* 2>/dev/null | grep -v 'libtool:' >/dev/null; then \
          package_gnu='GNU '; \
        else \
          package_gnu=''; \
        fi; \
        if test -n '' || test 'johnw@newartisans.com' = '@'PACKAGE_BUGREPORT'@'; then \
          msgid_bugs_address=''; \
        else \
          msgid_bugs_address='johnw@newartisans.com'; \
        fi; \
        case `/opt/local/bin/xgettext --version | sed 1q | sed -e 's,^[^0-9]*,,'` in \
          '' | 0.[0-9] | 0.[0-9].* | 0.1[0-5] | 0.1[0-5].* | 0.16 | 0.16.[0-1]*) \
            /opt/local/bin/xgettext --default-domain=ledger --directory=.. \
              --add-comments=TRANSLATORS: --keyword=_ --keyword=N_  \
              --files-from=./POTFILES.in \
              --copyright-holder='Free Software Foundation, Inc.' \
              --msgid-bugs-address="$msgid_bugs_address" \
            ;; \
          *) \
            /opt/local/bin/xgettext --default-domain=ledger --directory=.. \
              --add-comments=TRANSLATORS: --keyword=_ --keyword=N_  \
              --files-from=./POTFILES.in \
              --copyright-holder='Free Software Foundation, Inc.' \
              --package-name="${package_gnu}ledger" \
              --package-version='unknown' \
              --msgid-bugs-address="$msgid_bugs_address" \
            ;; \
        esac
   test ! -f ledger.po || { \
          if test -f ./ledger.pot; then \
            sed -f remove-potcdate.sed < ./ledger.pot > ledger.1po && \
            sed -f remove-potcdate.sed < ledger.po > ledger.2po && \
            if cmp ledger.1po ledger.2po >/dev/null 2>&1; then \
              rm -f ledger.1po ledger.2po ledger.po; \
            else \
              rm -f ledger.1po ledger.2po ./ledger.pot && \
              mv ledger.po ./ledger.pot; \
            fi; \
          else \
            mv ledger.po ./ledger.pot; \
          fi; \
        }
   test ! -f ./ledger.pot || \
          test -z "" || make
   Making check in intl
   make[2]: Nothing to be done for `check'.
   make  RegressTests BaselineTests ConfirmTests UtilTests MathTests ExprTests DataTests ReportTests PyUnitTests
   echo "/usr/bin/python ./test/RegressTests.py ./ledger ./test/regress" > RegressTests
   chmod 755 RegressTests
   echo "/usr/bin/python ./test/RegressTests.py ./ledger ./test/baseline" > BaselineTests
   chmod 755 BaselineTests
   echo "/usr/bin/python ./test/ConfirmTests.py ./ledger ./test/input" > ConfirmTests
   chmod 755 ConfirmTests
    LD UtilTests
    LD MathTests
    LD ExprTests
    LD DataTests
    LD ReportTests
   /usr/bin/python ./test/convert.py test/unit/t_utils.cc test/python/t_utils.py
   /usr/bin/python ./test/convert.py test/unit/t_times.cc test/python/t_times.py
   /usr/bin/python ./test/convert.py test/unit/t_commodity.cc test/python/t_commodity.py
   /usr/bin/python ./test/convert.py test/unit/t_amount.cc test/python/t_amount.py
   /usr/bin/python ./test/convert.py test/unit/t_balance.cc test/python/t_balance.py
   /usr/bin/python ./test/convert.py test/unit/t_expr.cc test/python/t_expr.py
   chmod 755 PyUnitTests
   make  check-TESTS
   . . . . . . .
   OK (7)
   PASS: RegressTests
   . . . . . . .
   :END:
   :PROPERTIES:
   :ID:       8CF2975B-3082-482B-9185-F265B756378D
   :CREATED:  [2009-02-26 Thu 05:53]
   :END:
** DONE Write unit tests for all of Ledger and its reporting options
   - State "DONE"       [2009-02-24 Tue 04:06]
   :PROPERTIES:
   :ID:       A8DE6DCB-917B-433F-8D07-3ACE45A05F45
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE [#C] Build Ledger master on Ubuntu so I can figure out Nafai's problem
   - State "DONE"       [2008-08-31 Sun 21:21] \\
     It's all working now, after three commits to fix things.
   - State "STARTED"    [2008-08-31 Sun 20:00] \\
     Working with Nafai on it now in #ledger.
   - State "STARTED"    [2008-08-28 Thu 23:57] \\
     I've gotten things to the point now where I can see what Nafai is seeing.  The
     next step is to fix it.
   - State "STARTED"    [2008-08-28 Thu 02:35] \\
     I'm still building the dependencies.
   :PROPERTIES:
   :ID:       EC1EABBA-A613-4E57-AB8A-687DC5036BE8
   :CREATED:  [2008-08-27 Wed]
   :END:
** DONE [#C] Comb through the warnings generated when all warnings are enabled
   - State "DONE"       [2009-02-16 Mon 22:59]
   - State "STARTED"    [2009-02-16 Mon 14:25]
   :PROPERTIES:
   :ID:       B129BF67-ACC2-4800-870C-93F9ADA151F6
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE [#C] Get the PowerBook's buildbot working again
   - State "DONE"       [2008-08-17 Sun 02:52]
   :PROPERTIES:
   :ID:       6B92EE7F-9F6A-452A-B242-347FB9206832
   :CREATED:  [2008-08-16 Sat]
   :END:
** DONE [#C] Ledger proof build is failing
   - State "DONE"       from "TODO"       [2010-05-12 Wed 03:12]
   :PROPERTIES:
   :ID:       68319BDB-95AC-4459-BB05-9F04D59EEA7D
   :CREATED:  [2010-05-10 Mon 00:02]
   :END:
** CANCELED Accept multiple phases in acprep if they can be recognized as such
   - State "CANCELED"   from "DEFERRED"   [2009-10-22 Thu 07:35]
   - State "DEFERRED"   from "TODO"       [2009-06-16 Tue 17:08]
   :PROPERTIES:
   :ID:       B8B9F5ED-32F0-4BFA-8E84-6B0F6064E88A
   :CREATED:  [2009-03-10 Tue 16:29]
   :END:
** CANCELED Create a fully static binary for OS X
   - State "CANCELED"   [2009-03-08 Sun 04:30]
   :PROPERTIES:
   :ID:       0ECCBFEB-C2F6-4F13-95C4-95D835E7030C
   :CREATED:  [2009-02-21 Sat 15:20]
   :END:
** CANCELED Create a Puppet script for setting up a Ledger build slave
   - State "CANCELED"   [2009-03-08 Sun 04:30]
   This should work for any platform, so that I can fire up a virtual
   buildslave on Solaris, Ubuntu, CentOS, OS X, etc.
   :PROPERTIES:
   :ID:       2599B64E-7888-4E56-9C46-718EFEF822BA
   :CREATED:  [2008-09-04 Thu]
   :END:
** CANCELED Devise a way to publish the Buildbot ledger builds
   - State "CANCELED"   from "TODO"       [2009-06-16 Tue 17:08]
   Michal Wallace has offered hosting space: [[message://3226fffd-f75a-4a17-8df0-34ee4d5f227f@m36g2000hse.googlegroups.com][buildbot but no builds?]]
   :PROPERTIES:
   :ID:       AFFBA1FA-6D2A-45B6-B56A-A57FEE8B93CA
   :CREATED:  [2008-10-25 Sat 00:50]
   :END:
** CANCELED Problems with CVS version under Debian
   - State "CANCELED"   [2009-02-08 Sun 16:03] \\
     This might not apply any longer.
   - State "TODO"       [2008-07-17 Thu 21:46] \\
     Until I get some info on this, I'll just have to postpone for 2.7.
   - State "TODO"       [2008-07-16 Wed 03:52] \\
     I don't have a Debian system to try this out with.  Can you give me a login to
     your, rpw, or let me know where I can find an ISO of the epost version you're
     using?
   Downloaded and (eventually) compiled the latest version from anonymous CVS.

   Had to update my 'automake' to 1.9 and add "#include <cassert>" to
   datetime.h to get it to make.

   Runs the help screen OK but SEGV's out when attempting to do any useful
   work.

   System is debian stable ('sarge'), gcc 3.3.5 fully upgraded.

   Any clues?
   :OUTPUT:
   $gdb ledger
   (gdb) run -f sample.dat print
   Starting program: /home/rpw/ledger-cvs/ledger/ledger
   -f sample.dat print

   Program received signal SIGSEGV, Segmentation fault.
   0x400a9e5a in std::ostream::sxact::sxact () from
   /usr/lib/libstdc++.so.5
   (gdb) bt
   #0  0x400a9e5a in std::ostream::sxact::sxact () from
   /usr/lib/libstdc++.so.5
   #1  0x400a9fbf in std::operator<<
   <std::char_traits<char> > () from
   /usr/lib/libstdc++.so.5
   #2  0x0805ef16 in
   ledger::annotated_commodity_t::write_annotations
   (out=@0xbfffdef0, price=@0xbfffde60,
    date=@0xbfffde40, tag=@0x815fd20) at
   datetime.h:249
   #3  0x0805f3b8 in ledger::(anonymous
   namespace)::make_qualified_name (comm=@0x815fdc8,
   price=@0xbfffe4f0,
    date=@0xbfffddf0, tag=@0xbfffddf0) at
   amount.cc:1732
   #4  0x0805f70f in
   ledger::annotated_commodity_t::find_or_create
   (comm=@0x815fdc8, price=@0xbfffe4f0,
    date=@0xbfffe410, tag=@0x815fd20) at
   amount.cc:1752
   #5  0x0805dfde in ledger::amount_t::annotate_commodity
   (this=0x815fd48, price=@0xbfffe4f0, date=@0xbfffe410,
    tag=@0xbfffde00) at datetime.h:97
   #6  0x080b9965 in ledger::parse_posting (
    line=0x8144040 "  Assets:Brokerage", ' ' <repeats
   14 times>, "50 AAPL @ $30.00", account=0xbfffddf0,
    xact=0xbfffe530) at memory:271
   #7  0x080bb2b8 in ledger::parse_xact (in=@0xbfffed40,
    line=0x8144040 "  Assets:Brokerage", ' ' <repeats
   14 times>, "50 AAPL @ $30.00", master=0x815cb90,
    parser=@0x8143bd4, beg_pos=95) at memory:284
   #8  0x080be0aa in ledger::textual_parser_t::parse
   (this=0x8143bd4, in=@0xbfffed40, config=@0xbffff930,
    journal=0x815cb58, master=0x815cb90,
   original_file=0xbffff934) at stl_list.h:671
   #9  0x080af07c in ledger::parse_journal
   (in=@0xbfffed40, config=@0xbfffddf0,
   journal=0x815cb58,
    master=0x815cb90, original_file=0xbfffddf0) at
   stl_list.h:585
   #10 0x080af1ee in ledger::parse_journal_file
   (path=@0x815c1f4, config=@0xbfffddf0,
   journal=0x815cb58,
    master=0xbfffddf0, original_file=0xbffff934) at
   parser.cc:92
   #11 0x080afa5b in ledger::parse_ledger_data
   (config=@0xbffff930, journal=0x815cb58,
   cache_parser=0x815cb68,
    xml_parser=0x0, stdin_parser=0x8143bd4) at
   parser.cc:181
   #12 0x0804c977 in parse_and_report
   (config=@0xbffff930, report=@0xbffff8d0, argc=4,
   argv=0xbffffa04,
    envp=0xbfffddf0) at memory:284
   #13 0x080535b6 in main (argc=-1073750544,
   argv=0xbfffddf0, envp=0xbfffddf0) at main.cc:452
   (gdb)
   :END:
   :PROPERTIES:
   :Submitter: rpw101ml@yahoo.com.au
   :Version:  2.5
   :Ticket:   9
   :ID:       0DD9D927-7C79-41A4-8D9A-67C00550B67D
   :CREATED:  [2007-12-10 Mon]
   :END:
** NOTE Building Ledger with gcc and Clang on different media
   Test Machine:
     Early 2009 Mac Pro
     8-core 2.26 GHz Core i7
     24G RAM
     7200RPMx4 HD

   This is a debug build (the one I do most) of a smallish (30k lines) C++
   program, which uses a 130M pre-compiled header.  Build times are from a
   configured tree, but cleaned.

   This does show a slight speed advantage with Clang (this is Clang from
   about a month ago), and it shows that disk I/O is a minor factor.

   | Filesystem | Opts | Cc    | User    | System |   CPU |   Total |
   |------------+------+-------+---------+--------+-------+---------|
   | ZFS RAID10 | -j16 | Clang | 764.22s | 85.30s | 1101% | 1:17.13 |
   | HFS+ SSD   | -j16 | Clang | 761.80s | 83.02s | 1042% | 1:21.06 |
   | HFS+ RAM   | -j16 | Clang | 763.11s | 83.91s | 1149% | 1:13.68 |
   |------------+------+-------+---------+--------+-------+---------|
   | ZFS RAID10 | -j16 | gcc45 | 865.78s | 67.88s | 1016% | 1:31.85 |
   | HFS+ SSD   | -j16 | gcc45 | 875.54s | 62.46s |  971% | 1:36.60 |
   | HFS+ RAM   | -j16 | gcc45 | 868.30s | 61.95s | 1068% | 1:27.06 |
   :PROPERTIES:
   :ID:       C1FBC631-4D30-438A-A5D8-10BCC2EEF0D0
   :VISIBILITY: folded
   :CREATED:  [2010-11-08 Mon 15:30]
   :END:
** NOTE Using Visual Studio 2008 to build Ledger for Windows
   :PROPERTIES:
   :ID:       88838D10-FBA4-433C-A77D-AB64AC8D47CA
   :VISIBILITY: folded
   :CREATED:  [2010-06-15 Tue 04:21]
   :END:
*** Boost
    The build is huge, so I'd have to pick out only the parts you actually
    need which is quite involved. You should be able to get it to work with
    the binary installers from http://www.boostpro.com/download . I build from
    source at work because I need to set some compiler flags (disable checked
    iterators) but that's not necessary for ledger's case. I'm not sure where
    the installer puts its files, I presume program files/boost or
    something. There will probably be a directory called 'lib' or 'libs' or
    something. You go to Tools -> Options -> Projects and Solutions -> VC++
    Directories and select 'Library files' in the top right corner. In that
    list you add a new directory, the one where the boost installer's library
    files are in. If you select 'Include files' in that drop down box, you can
    immediately set the path to the boost headers, too. These options can also
    be set on the project level but since they'll be different on different
    machines I prefer to put them in global settings and document them in the
    build procedure.
* Docs
** DONE [#A] [[bug:422][#422]] Correct definitions of release and beta in the README
   - State "DONE"       from "TODO"       [2010-12-09 Thu 17:25]
   :PROPERTIES:
   :ID:       931B6920-95D3-4F8E-A517-036E4B7DB0EF
   :Submitter: Michael Ploujnikov <ploujj@gmail.com>
   :Message:  [[message://29d9299c-f958-42a2-928c-2bacbf6b63e3@29g2000prb.googlegroups.com][current beta release vs master maint 2.6.1]]
   :CREATED:  [2010-11-25 Thu 15:27]
   :END:
** DONE [[bug:194][#194]] Initial example in ledger manual bogus
   - State "DONE"       from "TODO"       [2010-06-09 Wed 04:51]
   While reading the ledger manual, I got really confused by the initial
   example which seemed wrong to me.  While looking at the mailing list
   archives, I noticed that this has been pointed out more than a year ago:

   http://groups.google.com/group/ledger-cli/browse_thread/thread/ecd57e8f16eb90e3#

   Any chance to get the example fixed or removed?  It's really confusing for
   newbies.
   :PROPERTIES:
   :ID:       B91DED0E-B52A-4C99-A100-6564961DE5C4
   :Message:  [[message://20100410171011.GB24387@jirafa.cyrius.com][Initial example in ledger manual bogus]]
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :CREATED:  [2010-04-11 Sun 03:55]
   :END:
** DONE [[bug:385][#385]] Syntax error in new ledger3 doc
   - State "DONE"       from "TODO"       [2010-07-30 Fri 05:02]
   :PROPERTIES:
   :ID:       DF8EDC70-262C-4C26-8E1A-C25024378EA8
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :Message:  [[message://bug-385-1@http.newartisans.com/bugzilla/][{Bug 385} New: Syntax error in new ledger3 doc]]
   :CREATED:  [2010-07-20 Tue 23:21]
   :END:
** DONE [PATCH] Documentation patch for ledger
   - State "DONE"       from "TODO"       [2010-05-28 Fri 01:07]
   :PROPERTIES:
   :ID:       79E94C3D-F48C-4972-826E-7C0E36C5CDD7
   :Message:  [[message://4BBD4587.9050508@nicta.com.au][documentation patch for ledger]]
   :CREATED:  [2010-04-08 Thu 18:49]
   :END:
** DONE [PATCH] ledger: add a missing word to the manual
   - State "DONE"       from "TODO"       [2010-05-28 Fri 01:10]
   :PROPERTIES:
   :ID:       9FE43582-2AF8-4350-8031-923758C7204A
   :Message:  [[message://20100408202815.GA5996@jirafa.cyrius.com][{PATCH} ledger: add a missing word to the manual]]
   :CREATED:  [2010-04-08 Thu 18:50]
   :END:
** DONE [PATCH] ledger: fix a cosmetic problem in the manual
   - State "DONE"       from "TODO"       [2010-05-28 Fri 01:11]
   :PROPERTIES:
   :ID:       E1283FBD-F5FE-4EB9-A8A7-038AE6DBE9CB
   :Message:  [[message://20100410170310.GA24308@jirafa.cyrius.com][{PATCH} ledger: fix a cosmetic problem in the manual]]
   :CREATED:  [2010-04-11 Sun 03:55]
   :END:
** DONE [PATCH] Remove transaction code from initial example
   - State "DONE"       from "TODO"       [2010-05-28 Fri 01:12]
   :PROPERTIES:
   :ID:       3F0F0710-AE95-438C-B93F-ADA17A882C03
   :Message:  [[message://20100322161315.GA6884@jirafa.cyrius.com][{PATCH} Remove transaction code from initial example]]
   :CREATED:  [2010-03-26 Fri 22:22]
   :END:
** DONE [PATCH] Typo fix in ledger docs
   - State "DONE"       from "TODO"       [2010-05-28 Fri 01:13]
   :PROPERTIES:
   :ID:       8BF17914-8EE8-4E75-B29F-7D3BC73C9DBA
   :Message:  [[message://20100322090706.GA2523@jirafa.cyrius.com][{PATCH} Typo fix in ledger docs]]
   :CREATED:  [2010-03-26 Fri 22:23]
   :END:
** DONE Add license headers to every file
   - State "DONE"       [2009-01-29 Thu 15:29]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   99
   :ID:       E99806BC-8781-4469-9FEF-B77C23BB3413
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Change --help* so it runs "man ledger"
   - State "DONE"       [2009-02-21 Sat 16:32]
   :PROPERTIES:
   :ID:       69F58499-2EE7-4A76-9B1B-E9F8495D9514
   :CREATED:  [2009-02-21 Sat 15:02]
   :END:
** DONE Describe the new balance algorithm in pseudocode for sm
   - State "DONE"       [2009-02-17 Tue 17:43]
   :PROPERTIES:
   :ID:       68EA6398-E410-45A2-8EB3-7ACFEA5238CC
   :CREATED:  [2009-02-17 Tue 07:20]
   :END:
** DONE Download QIFtoLedger to the Ledger archive
   - State "DONE"       from "TODO"       [2011-02-24 Thu 14:58]
   :PROPERTIES:
   :ID:       A375A7DA-435F-436C-B3C5-B347C97DAC89
   :CREATED:  [2011-02-09 Wed 14:27]
   :Message:  [[message://a7d80b22-b6eb-42b5-9c54-dbca1475d2d9@d23g2000prj.googlegroups.com][Re: Bank of America OFX]]
   :END:
** DONE Format ledger.texi in the same manner as the SBCL manual
   - State "DONE"       [2007-12-04 Tue 18:14]
   :PROPERTIES:
   :ARCHIVE_TIME: 2007-12-11 Tue 18:33
   :ARCHIVE_CATEGORY: Computer
   :ID:       7D3DE56C-34E2-4992-87CA-B129E19B6FD1
   :CREATED:  [2007-11-28 Wed]
   :END:
** DONE Organize my ledger todo file and integrate it into the main agenda
   - State "DONE"       [2007-10-01 Mon 03:40] \\
     Done, although I still need to pull all of my old data from Trac and Merlin.
   :PROPERTIES:
   :ARCHIVE_TIME: 2007-10-03 Wed 14:01
   :ARCHIVE_CATEGORY: Computer
   :ID:       B89FA87D-CAE6-4F78-9442-E25EE572E8FD
   :CREATED:  [2007-09-27 Thu]
   :END:
** DONE Post the Ledger manual in HTML format on newartisans.com
   - State "DONE"       from "TODO"       [2009-06-16 Tue 17:10]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   187
   :ID:       C6E7C61C-13A3-4812-AA28-CD3E247D6F8C
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE Start a real manpage
   - State "DONE"       [2009-02-21 Sat 14:50]
   :PROPERTIES:
   :ID:       9ED06BD9-774E-411E-9942-F1D672EB67C8
   :CREATED:  [2009-02-21 Sat 12:49]
   :END:
** DONE Stop using Doxygen to generate code documentation
   - State "DONE"       [2009-03-06 Fri 17:52]
   :PROPERTIES:
   :ID:       A7A589D0-2799-40ED-9729-BDB6892EB279
   :CREATED:  [2009-03-06 Fri 04:21]
   :END:
** DONE There is an issue with unescaped @ signs in the Ledger docs
   - State "DONE"       [2008-03-27 Thu]
   :PROPERTIES:
   :ID:       30ED70CB-0679-4651-A1C3-1247764B250D
   :CREATED:  [2008-03-26 Wed]
   :END:
** DONE Write the balance reporting algorithm for sm
   - State "DONE"       [2009-03-11 Wed 15:53]
   :PROPERTIES:
   :ID:       96737B51-1E78-473D-BE6A-B94094C20EB6
   :CREATED:  [2009-03-11 Wed 15:34]
   :END:
** DUPLICATE Apply fix to the Ledger documentation
   - State "DUPLICATE"  [2008-09-11 Thu 03:08] \\
     This has already been fixed by A7CA0F5B-1F08-417A-9071-A223601100CA.
   I found a tiny bug in the info documentation for ledger, version
   2.6.0.90, regarding per-unit and complete xact cost.  There
   seems to be @'s missing (maybe texinfo gobbles up at least on @)

   It says:

   > The `ACCOUNT' may be surrounded by parentheses if it is a virtual
   > posts, or square brackets if it is a virtual posts
   > that must balance.  The `AMOUNT' can be followed by a per-unit
   > xact cost, by specifying ` AMOUNT', or a complete
   > xact cost with `@ AMOUNT'.  Lastly

   whereas I believe (from reading the source of textual.cc) it should
   be:

   > The `ACCOUNT' may be surrounded by parentheses if it is a virtual
   > posts, or square brackets if it is a virtual posts
   > that must balance.  The `AMOUNT' can be followed by a per-unit
   > xact cost, by specifying `@ AMOUNT', or a complete
   > xact cost with `@@ AMOUNT'.  Lastly
   :PROPERTIES:
   :Submitter: Par Kurlberg <kurlberg@math.kth.se>
   :ID:       ED900734-1655-4229-A88F-9BCB96634E00
   :CREATED:  [2008-09-02 Tue 06:26]
   :END:
* Emacs
** DONE [#A] ledger.el byte-compile error: Unknown rx form `date'
   - State "DONE"       from "TODO"       [2010-05-13 Thu 00:14]
   :PROPERTIES:
   :ID:       9D0245D2-22B7-457A-993F-0C5006E153BA
   :Message:  [[message://1273691277.24226.30.camel@black][ledger.el error]]
   :CREATED:  [2010-05-12 Wed 15:34]
   :END:
** DONE [#A] Pressing space bar on items on the reconcile window does nothing
   - State "DONE"       from "TODO"       [2009-10-31 Sat 04:16]
   message://01BBC0A5-1185-4FCF-8D8C-72E29FA86675@gmail.com
   :PROPERTIES:
   :ID:       AC756278-72D5-4CAC-82A7-334A9BB6F7EE
   :CREATED:  [2009-10-03 Sat 03:23]
   :END:
** DONE C-c C-c on a cleared entry doesn't unclear it
   - State "DONE"       from "TODO"       [2009-06-16 Tue 18:11]
   :PROPERTIES:
   :Version:  2.6.0.90
   :Ticket:   212
   :ID:       863C0EE8-C193-46EE-9BAA-3A37DE73E4DB
   :END:
** DONE In ledger-mode, color directive lines a different color
   - State "DONE"       from "TODO"       [2009-06-16 Tue 18:13]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   186
   :ID:       B34222A3-DD25-4717-B60B-865DB7F1DFD6
   :CREATED:  [2008-04-16 Wed]
   :END:
** DONE Make *, # and | into comment characters, for Org compatibility
   - State "DONE"       from "TODO"       [2009-11-25 Wed 02:36]
   :PROPERTIES:
   :ID:       B38AC5A0-31BB-4F89-8112-5999D8A99C02
   :CREATED:  [2009-11-24 Tue 22:17]
   :END:
** WORKSFORME [[bug:183][#183]] Adding memo field breaks ledger-add-entry
   - State "WORKSFORME" from "TODO"       [2010-06-01 Tue 17:08]
   I do `C-c C-a', complete the date and enter a payee. According to an older
   entry with the same payee I am expecting something like this to appear:
   #+begin_src ledger
   2010/04/08 payee
          account1                1.00
          account2
   #+end_src

   But I get only:
   :OUTPUT:
   2010/04/08 payee
   :END:

   With a ledger backup file without memo fields everything still works fine.
   :PROPERTIES:
   :ID:       878AB79B-B656-4221-941F-6C956F6A1E92
   :Message:  [[message://87eiir4wov.fsf@online.de][Memo Field]]
   :Submitter: henry atting <nsmp_02@online.de>
   :CREATED:  [2010-04-08 Thu 18:47]
   :END:
** WORKSFORME C-c TAB no longer works in ledger-mode
   :PROPERTIES:
   :ID:       AA885449-23F0-450C-BBA8-ECC8C073F14C
   :CREATED:  [2009-11-17 Tue 16:29]
   :END:
* Features
** DONE -g/-performance removed in 3.0?
   - State "DONE"       from "TODO"       [2010-05-22 Sat 15:08]
   - Note taken on [2010-03-26 Fri 22:18] \\
     [[message://20100325210312.GL25018@jirafa.cyrius.com][Re: -g/-performance removed in 3.0?]]
   :PROPERTIES:
   :ID:       AEF3A0AD-25BE-4412-ABEF-82737B9980C7
   :Message:  [[message://20100325183756.GA19406@jirafa.cyrius.com][-g/-performance removed in 3.0?]]
   :CREATED:  [2010-03-26 Fri 22:18]
   :END:
** DONE [[bug:181][#181]] Add a --group-by=EXPR option for clustered reports
   - State "DONE"       from "TODO"       [2010-05-30 Sun 03:27]
   :PROPERTIES:
   :ID:       F56F414C-56B4-439D-B5B1-AD28D0E5330A
   :CREATED:  [2010-05-23 Sun 15:59]
   :END:
** DONE [[bug:272][#272]] Add an entry type for specifying value constraints
   SCHEDULED: <2010-06-12 Sat>
   - State "DONE"       from "TODO"       [2010-06-13 Sun 00:46]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:34]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:06]
   I'd like to see a more general syntax for this based on value expressions,
   which would offer a full constraints mechanism.  For example, to constrain
   all transactions to being less than $10,000 in an account:
   :DATA:
   ? Constrain all transactions to less than $10,000
   /Expenses:Food/      a < $10,000
   :END:

   The "?" indicates a "constraints entry".  Each transaction would have two
   value expressions: one to match every applicable transaction in the file,
   and another to provide the boolean logic of the constraint.

   Then, while the file is being parsed, any violations of a constraint would
   be treated as an error, the same as when an entry fails to balance to zero.
   I suppose making these warnings could be a possibility as well.

   Here is how you'd constrain commodities in this model:
   :DATA:
   ? Guarantee commodities within accounts
   Assets:Checking    comm(a) == $1.00
   :END:

   (At the moment there is no value expr function that would allow: comm(a) ==
   "$")

   Then, of course, there could be a specific declaration option -- such as you
   have above -- for just this case, which internally would be parsed as a
   constraints entry.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   39
   :ID:       31E75D27-157E-452B-B817-7AD570AFE357
   :CREATED:  [2008-04-05 Sat]
   :END:
** DONE [[bug:275][#275]] Add the ability to have "typed" metadata
   - State "DONE"       from "TODO"       [2010-06-12 Sat 15:54]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:33]
   - State "DEFERRED"   from "TODO"       [2009-11-11 Wed 04:37]
   For example, a metadata property that contains a date, which could then be
   used to generate reports from.
   :PROPERTIES:
   :ID:       D919FE3B-3FA9-4E9D-B3F5-42A9BD33A2C4
   :CREATED:  [2009-11-11 Wed 04:28]
   :END:
** DONE [[bug:276][#276]] Allow for payee name mappings
   - State "DONE"       from "TODO"       [2010-06-12 Sat 14:02]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:33]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:05]
   After, create an "unaccounted" report for payees unknown to the matcher
   :PROPERTIES:
   :ID:       144F519E-9441-4FBA-9F6A-6757CA3F704A
   :CREATED:  [2009-10-23 Fri 06:14]
   :END:
** DONE [[bug:277][#277]] Allow forecasting from a specific date
   SCHEDULED: <2010-06-13 Sun>
   - State "DONE"       from "TODO"       [2010-06-14 Mon 03:30] \\
     This can be done with the --now option.
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:33]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:06]
   This would make it possible to see expected vs. actual cash flows, for
   example, if the date chosen is before the end of actual transactions.  Kind
   of like a modified version of budgeting.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   94
   :ID:       BBD4F6F0-1250-4216-BB0E-3E86785D5E44
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [[bug:281][#281]] Combine a random seed when hashing when using --anon
   - State "DONE"       from "DEFERRED"   [2010-06-12 Sat 05:26]
   - State "DEFERRED"   from "TODO"       [2009-10-29 Thu 01:00]
   Please keep in mind that the dictionary one pulls account names from is MUCH
   smaller than the dictionary of valid ASCII strings.  Given the SHA-1 hash of
   a string $foo, it is easy to tell if this is the hash of "Bar, Inc." or
   "Baz, Inc.".  So, while in theory it is hard to reverse, it becomes very
   easy in practice if I know anything about your company or even the language
   that the accounts will be in.  Finally, because of rainbow tables, these
   might even be easy to reverse without knowing anything about the target
   company.
   :PROPERTIES:
   :Submitter: Anthony Chivetta <anthony@chivetta.org>
   :ID:       03DA2F5B-9E0C-4E3B-B19D-531A4F77C050
   :Message:  [[message://20090703063943.GB16282@chivetta.org][Re: sample ledgers and anonymising]]
   :CREATED:  [2009-07-03 Fri 08:38]
   :END:
** DONE [[bug:283][#283]] Create new files for commodity_pool and annotated commodities
   - State "DONE"       from "DEFERRED"   [2010-06-12 Sat 05:32]
   - State "DEFERRED"   from "TODO"       [2009-06-16 Tue 18:12]
   :PROPERTIES:
   :ID:       BAE2292F-6B8B-4703-A6B6-8217390673DC
   :CREATED:  [2009-02-07 Sat 18:20]
   :END:
** DONE [[bug:285][#285]] Have an option for showing all amounts in the print report
   - State "DONE"       from "TODO"       [2010-06-12 Sat 15:55]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:32]
   - State "DEFERRED"   from "TODO"       [2009-11-25 Wed 02:34]
   :PROPERTIES:
   :ID:       7B8B33B7-925A-497E-A08A-D0B67E433FF6
   :CREATED:  [2009-11-25 Wed 00:27]
   :END:
** DONE [[bug:301][#301]] When abbreviating account names, expand to fill
   SCHEDULED: <2010-06-13 Sun>
   - State "DONE"       from "TODO"       [2010-06-14 Mon 07:20]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:30]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:05]
   For example, Assets:NRL:Checking in 15 chars should be:
     As:NRL:Checking
   The algorithm should only shorten the initial account names as much as
   needed, giving any surplus to the penultimate member.
   :PROPERTIES:
   :ID:       9135540C-C5F5-460B-AAEC-10D07FB67C21
   :CREATED:  [2009-10-24 Sat 19:19]
   :END:
** DONE [[bug:334][#334]] Support period expressions like "every 14 days"
   - State "DONE"       from "TODO"       [2010-06-14 Mon 07:29]
   :PROPERTIES:
   :ID:       E0CBC152-938E-4C58-BB7C-F8761A7B6D6B
   :CREATED:  [2010-06-13 Sun 18:02]
   :END:
** DONE [[bug:356][#356]] Budgeting and forecasting should use all periodic entries
   - State "DONE"       from "TODO"       [2010-06-21 Mon 17:17]
   :PROPERTIES:
   :ID:       77FD8EA5-DF69-4959-878E-1D9A95F3788A
   :CREATED:  [2010-06-20 Sun 18:09]
   :END:
** DONE [[bug:363][#363]] Make "only" a report query modifier, to match --only
   - State "DONE"       from "TODO"       [2010-06-24 Thu 00:48]
   :PROPERTIES:
   :ID:       36EE7D08-65F1-4619-94F6-22DEA64F92C1
   :CREATED:  [2010-06-22 Tue 20:58]
   :END:
** DONE [[bug:364][#364]] Make "for" a special report query modifier, for period strings
   - State "DONE"       from "TODO"       [2010-06-22 Tue 21:58]
   #+begin_src sh
   ledger reg cash for this month
   #+end_src
   :PROPERTIES:
   :ID:       F5487801-6D9E-45F5-AA36-10B59F7A4AD6
   :CREATED:  [2010-06-22 Tue 20:58]
   :END:
** DONE A few changes for the textual parser [4/4]
   - State "DONE"       [2009-02-15 Sun 23:22]
   - [X] Ignore any line like /^\s*;/ as a comment -even in the middle of a
         posting
   - [X] Treat -00.00 the same as hB300.00 : I found myself making this mistake
         frequently.
   - [X] Print the out offending posting and the 'out of balance' amount
         in the 'unbalanced posting' error message.
   - [X] It would be nice if the 'xact' command could be modified to assume
         the amount is the same as last time if you dont supply it.  It also
         doesn't seem to reproduce multiple-split postings either -- it
         seems you only get the first split line.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   121
   :ID:       8C5FD48A-F498-4B97-9C6E-DD8B5A50B773
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE A mask by itself should generate a helpful error message
   - State "DONE"       [2009-02-26 Thu 04:10]
   Especially since people from 2.6 will want to use "/foo/" intead of "account
   =~ /foo".
   :PROPERTIES:
   :ID:       F21E8B63-C6C9-4B09-90B2-2441FBD1F517
   :CREATED:  [2008-08-26 Tue]
   :END:
** DONE Add a "fixedrate COMMODITY AMOUNT" directive                                     :ATTACH:
   - State "DONE"       from "TODO"       [2009-11-25 Wed 04:41]
   - Note taken on [2009-11-24 Tue 22:32] \\
     Russell also needs this for billing miles to the IRC based on rates-per-mile
     determined for particular time periods.
   - Note taken on [2009-11-24 Tue 22:07] \\
     Javier is facing some of these issues: [[message://5d55d2dd-2222-484f-9fa4-295fda763ac6@d21g2000yqn.googlegroups.com][Re: Multicurrency and reg problem]].
   Every use of COMMODITY within the range of transactions has a fixed cost, as
   if the user had typed COMMODITY {= AMOUNT}.
   :PROPERTIES:
   :ID:       33DA4CB9-3C76-47F5-AA06-682192A37E48
   :Attachments: IRC-fixed-rates-2009-11-24.txt
   :CREATED:  [2009-11-24 Tue 01:16]
   :END:
** DONE Add a "scramble" command
   - State "DONE"       [2009-01-29 Thu 15:29]
   The purpose of this command is to anonymize the user's data so that they can
   submit a bug report without revealing any sensitive information about
   themselves.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   162
   :ID:       5B6D773A-E90F-4F36-8C97-79613427CA01
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Add a --date option, for setting the date of each posting
   - State "DONE"       from "TODO"       [2009-11-11 Wed 21:30]
   :PROPERTIES:
   :ID:       3CDC68C4-FB2A-44AA-824A-E3F5261647DF
   :CREATED:  [2009-11-11 Wed 05:15]
   :END:
** DONE Add a --no-color option for Ledger
   - State "DONE"       from "TODO"       [2009-06-26 Fri 17:51]
   :PROPERTIES:
   :ID:       E924C732-C3F9-40C7-8E69-8F20566EB920
   :CREATED:  [2009-06-17 Wed 16:45]
   :END:
** DONE Add a mechanism that allows VAT to be calculated
   - State "DONE"       from "TODO"       [2009-11-11 Wed 04:37]
   This means adding mathematical functions like floor, round, ceiling, etc.
   But also it means have a value expression variable that refer to the
   incoming amount which an automated expression will be calculated against.
   :PROPERTIES:
   :ID:       BD29154A-6BB5-487E-9201-A306B7F9FD53
   :CREATED:  [2009-11-11 Wed 02:58]
   :END:
** DONE Add a trim() value expression function
   - State "DONE"       from "TODO"       [2009-11-25 Wed 02:42]
   It trims all leading and trailing spaces
   :PROPERTIES:
   :ID:       AAA8F6E9-32A3-4CA7-9055-D4184B03AE2D
   :CREATED:  [2009-11-24 Tue 01:30]
   :END:
** DONE Add a valexpr variable for the "whicheth posting in account"
   - State "DONE"       from "TODO"       [2010-05-22 Sat 17:55] \\
     It's called account_id.
   This way I can test if the 1000th posting in an account matches up with my
   bank's reckoning.
   :PROPERTIES:
   :ID:       2B6DD3C2-267C-4280-BE0E-AFBBFA0ADBA6
   :CREATED:  [2010-05-17 Mon 00:00]
   :END:
** DONE Add an --actual option to override --effective if in .ledgerc
   - State "DONE"       from "TODO"       [2009-10-27 Tue 19:15] \\
     It's called --actual-dates
   :PROPERTIES:
   :ID:       84C7C18B-8B06-4248-9C4F-A8E377FACA49
   :CREATED:  [2008-10-03 Fri]
   :END:
** DONE Add an md5 valexpr function
   - State "DONE"       from "TODO"       [2009-10-25 Sun 22:01]
   Russell can generate a report using this instead of storing a string.
   :PROPERTIES:
   :ID:       18ADEF7A-6C43-4427-BC79-79F1E2905B85
   :CREATED:  [2009-10-23 Fri 06:10]
   :END:
** DONE Add any() and all() as report query terms
   - State "DONE"       from "TODO"       [2010-05-08 Sat 02:07]
   For example, an alternative to "-r food" would be:
   #+begin_src sh
   ledger reg 'any(food) and not food'
   #+end_src
   :PROPERTIES:
   :ID:       EA6C8D78-73B9-4BC3-8BF5-1C07F720D37B
   :CREATED:  [2010-05-03 Mon 07:42]
   :END:
** DONE Add conversion valexpr methods, like to_date(STR)
   - State "DONE"       from "TODO"       [2009-11-11 Wed 21:30]
   :PROPERTIES:
   :ID:       496A6351-BE11-47DE-A1C3-5DE1257B14F7
   :CREATED:  [2009-11-11 Wed 05:15]
   :END:
** DONE Add more color to the register report
   - State "DONE"       [2009-02-24 Tue 04:00]
   :PROPERTIES:
   :ID:       BD2F22FC-CB2C-45A8-8C07-3366A96B6034
   :CREATED:  [2008-08-23 Sat]
   :END:
** DONE Add support for "xact notes"
   - State "DONE"       [2009-02-16 Mon 05:22]
   :PROPERTIES:
   :ID:       334E9E08-0943-42DB-BB7A-A4D147508706
   :CREATED:  [2008-08-05 Tue]
   :END:
** DONE Add support for comment {} blocks
   - State "DONE"       from "TODO"       [2011-02-12 Sat 18:18]
   :PROPERTIES:
   :ID:       DDE339C6-13EE-4D3F-9A6A-3E1D2C6CB1C6
   :CREATED:  [2011-02-09 Wed 09:26]
   :END:
** DONE Add UTF-8 support for input files, commands and reports
   - State "DONE"       [2009-01-29 Thu 15:30]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   140
   :ID:       BDBB79F0-9FC4-4B91-B922-D128E18982BA
   :END:
** DONE Allow // regex in the query parser
   - State "DONE"       from "TODO"       [2009-10-29 Thu 00:25]
   :PROPERTIES:
   :ID:       112D575E-51DB-4792-9280-3B559747BB00
   :CREATED:  [2009-10-28 Wed 17:28]
   :END:
** DONE Allow balance reports to have multiple totals columns
   - State "DONE"       [2009-03-03 Tue 03:18]
   For example, to show commodity quantities vs. market values; or to show
   date of latest cleared entry and cleared total vs. date of last queried
   entry and the query total.
   :PROPERTIES:
   :Submitter: John Wiegley <johnw@newartisans.com>
   :Milestone: 3.0
   :Ticket:   1
   :ID:       D737F702-9848-F001-5AC1-9924A9C3E5BA
   :CREATED:  [2009-02-28 Sat 20:38]
   :END:
** DONE Allow column width to be specified
   - State "DONE"       [2009-02-24 Tue 04:01]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   161
   :ID:       1F0FD61B-1734-4A30-9EB5-D7AC4A6C7D7B
   :END:
** DONE Allow for data file assertions
   - State "DONE"       [2009-02-16 Mon 05:23]
   A use for these would be after reconciling the bank balance, you want to
   assert that the cleared balance on that day is a given amount and if it ever
   changes there should be an error.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   165
   :ID:       434EA2BD-BB4D-4F97-BB2A-BB983797F1AE
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Allow for fixed commodities, whose market value does not change
   - State "DONE"       [2009-03-02 Mon 17:06]
   Actually, this can be done with lot pricing, if I add a feature where a
   posting of a certain form causes it to fixate:

   2009/01/01 Payee
       Expenses:Gas                 20 Gallon {$10}
       Liabilities:MasterCard            $200
   :PROPERTIES:
   :ID:       FB85DEF4-7D65-45B5-898B-20B511FEE022
   :CREATED:  [2009-02-10 Tue 04:10]
   :END:
** DONE Allow notes and metadata on timeclock entries
   - State "DONE"       from "TODO"       [2009-11-11 Wed 01:54]
   :PROPERTIES:
   :ID:       F225EA85-49B6-4E0C-B861-38DD3E784048
   :CREATED:  [2009-11-09 Mon 01:44]
   :END:
** DONE Allow the include directive to accept wildcards
   - State "DONE"       from "TODO"       [2010-03-17 Wed 02:40]
   :PROPERTIES:
   :ID:       F5B86CC8-599C-4851-AD6A-8CD5324AD49C
   :CREATED:  [2010-02-04 Thu 17:22]
   :END:
** DONE Allow xact value expressions to access account totals
   - State "DONE"       [2009-03-03 Tue 16:29]
   I'd like to create entries that use a formula to compute the values, which
   doesn't seem to be supported (but I hope I'm wrong).

   I imagine something like:
   :DATA:
   11/5 mortgage payment
   Assets:Checking                           $-2000
   Expenses:Mortgage Interest        0.05*(Liabilities:Mortgage)
   Expenses:Tax                                 $500
   Liabilities:Mortgage
   :END:

   So that I could automatically keep track of how much the principle still is
   on my mortgage.  Of course, I could write a script to generate this payment,
   but I'd rather not bother.  Is there a syntax for formulas like this? The
   closest I could see was the tithing example, but I'd like this to be a real
   account and a real (non- virtual) transaction.  On the other hand, perhaps
   it wouldn't hurt to allow the Liabilities:Mortgage account to be virtual,
   since I never directly access it...
   :PROPERTIES:
   :Submitter: David Roundy <droundy@darcs.net>
   :Version:  2.6.1
   :ID:       B5CB8346-581D-4EBC-A980-B399CDD24961
   :CREATED:  [2008-11-01 Sat 11:43]
   :END:
** DONE Change automated expressions to use report query syntax
   - State "DONE"       from "TODO"       [2009-11-10 Tue 02:44]
   :PROPERTIES:
   :ID:       BBEF5801-56F2-44E0-BE3F-3B144F05328F
   :CREATED:  [2009-11-09 Mon 19:49]
   :END:
** DONE Come up with a consistent syntax for scoped directives
   - State "DONE"       from "TODO"       [2009-11-15 Sun 06:10]
   - master account
   - bucket account
   - common metadata
   :PROPERTIES:
   :ID:       687F2794-AECA-4E0B-BDED-E71425D1F4C6
   :CREATED:  [2009-11-09 Mon 19:19]
   :END:
** DONE Consider Martin's @openbal directive
   - State "DONE"       [2008-07-28 Mon]
   [[message://20080421153138.26F681144C3@banane.furius.ca]["AutoOpenBalance" from Martin Blais <blais@furius.ca>]]
   :PROPERTIES:
   :ID:       70E793CC-81E7-4E87-A3D7-4E18CD649C58
   :CREATED:  [2008-06-30 Mon]
   :END:
** DONE Convert *all* valexpr functions to use interactive_t
   - State "DONE"       from "TODO"       [2009-10-31 Sat 03:33]
   :PROPERTIES:
   :ID:       DF11A428-9958-44EB-99A8-34C48AB8365C
   :CREATED:  [2009-02-21 Sat 17:36]
   :END:
** DONE Create a --meta=FOO switch as a shorthand for --prepend-format
   - State "DONE"       from "TODO"       [2010-03-17 Wed 02:20]
   --prepend-format='%-<LONGEST>(tag("ER")) '
   :PROPERTIES:
   :ID:       237C562D-0F3D-44E9-A55F-4C91DE7F1E57
   :CREATED:  [2010-02-04 Thu 17:51]
   :END:
** DONE Create a command to output a commodity map at DATE as a DOT file
   - State "DONE"       from "TODO"       [2010-06-04 Fri 06:15]
   :PROPERTIES:
   :ID:       9EB7DD1D-D87D-4A37-8ED6-A836C4B231BD
   :CREATED:  [2010-06-03 Thu 18:09]
   :END:
** DONE Create Expr, Query, Period, Draft, Format objects
   - State "DONE"       from "TODO"       [2009-11-10 Tue 02:48]
   - State "TODO"       from "DONE"       [2009-11-09 Mon 14:08] \\
     I still need to expose this classes to Python.
   - State "DONE"       from "TODO"       [2009-11-09 Mon 14:08]
   One to represent every expression type.  All the expression types should
   have a preview() method.
   :PROPERTIES:
   :ID:       D3395691-2BD5-4ADF-A528-3DBB96FC3F98
   :CREATED:  [2009-11-05 Thu 08:27]
   :END:
** DONE Default to reading ~/.ledger if no -f is used
   - State "DONE"       from "TODO"       [2009-10-28 Wed 02:09]
   :PROPERTIES:
   :ID:       A76909EF-6C29-4424-8E0C-F99A60D5A3D4
   :CREATED:  [2009-10-27 Tue 22:38]
   :END:
** DONE Devise correct semantics for --pivot reports
   - State "DONE"       from "TODO"       [2010-03-17 Wed 00:56]
   If --pivot=. is used, then how can postings with multiple metadata fields
   appear in multiple accounts?
   :PROPERTIES:
   :ID:       CD39E6B1-DDD6-497E-A08B-0284F2CB935C
   :CREATED:  [2010-02-08 Mon 17:10]
   :END:
** DONE Formalize tagging
   - State "DONE"       [2008-08-05 Tue]
   Search with "account / tags", similar to "account -- payee".
   Tagging is any note with :tag: in it.
   Posts now need notes.
   :PROPERTIES:
   :ID:       7D8F14BE-4E84-4B40-8C3E-D563B291D4CA
   :CREATED:  [2008-07-31 Thu]
   :END:
** DONE getquote script for UK users                                                     :ATTACH:
   This is a little python file for downloading quotes for UK shares and unit
   trusts. An unusual wrinkle is that UK shares must have ".L" in them - but
   Ledger doesn't support this kind of format.

   By way of example, if you have Glaxosmithklein shares, its symbol is
   "GSK.L".  In Ledger, you must set up its symbol as GSK_L. Do not set it up
   as merely GSK or GSK.L -- because errors will occur.  _getquote-uk.py_
   (which you must symlink to getquote somewhere in your path) translates the
   underscores into dots. So if Ledger tries to download a quote, it will
   execute the command
   :SCRIPT:
   getquote GSK_L
   :END:
   which (if you have symlinked it to my python file) will get the correct
   price for your share.

   OEICs and Unit Trusts are also supported.  If you own Fidelity Special
   Situations, for example, its symbol is GB0003875100GBP -- a bit of a
   mouthful, but it is correct when used in Ledger.

   I attached a revised version. For some reason, Ledger want to get a quote
   for £, which causes problems. I therefore give a quote of £1.00 in such
   circumstances.
   :PROPERTIES:
   :Submitter: Mark Carter <alt.mcarter@googlemail.com>
   :Version:  2.6.1
   :URL:      message://62f2a66e0811070641v7fe3a574mc9ea5a9eb3dfa1cf@mail.gmail.com
   :ID:       E400651B-FB69-4815-AE15-726E8B0675C3
   :Attachments: getquote-uk.py
   :CREATED:  [2008-12-08 Mon 23:59]
   :END:
** DONE Have an option --forecast-years
   - State "DONE"       from "TODO"       [2009-10-31 Sat 03:06]
   :PROPERTIES:
   :ID:       C6B21504-DF86-43AC-AEFE-2F3D843DDB0B
   :CREATED:  [2009-10-28 Wed 17:28]
   :END:
** DONE Have an option so that weeks begin on Monday
   - State "DONE"       [2009-02-21 Sat 01:37]
   :PROPERTIES:
   :Submitter: Simon Michael <simon@joyful.com>
   :Version:  2.6.1
   :ID:       9FF37C33-EBEF-4EC0-91F7-0E8681416D60
   :CREATED:  [2008-12-08 Mon 23:59]
   :END:
** DONE Implement a --raw flag for print, to show what the user entered
   - State "DONE"       [2009-02-21 Sat 19:40]
   - State "TODO"       [2009-02-21 Sat 01:38]
   - State "CANCELED"   [2009-02-21 Sat 01:37]
   :PROPERTIES:
   :Version:  3.0
   :ID:       9F074119-FF1C-4568-9297-54A8C31258D2
   :CREATED:  [2008-09-17 Wed]
   :END:
** DONE In daily budget report, there's no budgeting entry for "today"
   - State "DONE"       [2009-03-08 Sun 04:21]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   65
   :ID:       5D1B0408-90D0-4019-AE0F-A914329C73CB
   :CREATED:  [2009-04-11 Sat]
   :END:
** DONE In the "pricesdb" report, output commodity conversions
   - State "DONE"       from "TODO"       [2009-10-31 Sat 03:22]
   ... and "N" commands.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   110
   :ID:       1BE0C80D-AC4D-4372-B830-14193554EF6B
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE In the expression parser, 40% should mean 0.40
   - State "DONE"       from "TODO"       [2009-05-14 Thu 04:06]
   :PROPERTIES:
   :ID:       CEC3AE64-64C8-4339-B4DB-86A4FBDBBD98
   :ARCHIVE_TIME: 2009-05-15 Fri 18:00
   :ARCHIVE_CATEGORY: Ledger
   :CREATED:  [2009-05-14 Thu 02:06]
   :END:
** DONE Make "expr" a synonym for the "parse" command
   - State "DONE"       from "TODO"       [2010-06-05 Sat 03:36]
   :PROPERTIES:
   :ID:       3CAB2690-9AD6-4C14-AC97-A7E8A2250416
   :CREATED:  [2010-06-04 Fri 06:36]
   :END:
** DONE Make -D a synonym for --daily, instead of --deviation
   - State "DONE"       from "TODO"       [2009-10-28 Wed 01:20]
   :PROPERTIES:
   :ID:       6DCB7E25-5D3B-47A6-9651-9B7F3EF71FB2
   :CREATED:  [2009-10-27 Tue 22:48]
   :END:
** DONE Make a helper macro to validate valexpr func args
   - State "DONE"       [2009-02-24 Tue 04:04]
   USAGE("ss:i");   <-- function expects two strings and an optional integer
   :PROPERTIES:
   :ID:       D6049000-77E0-40EA-A15B-74490D0FFF3D
   :CREATED:  [2009-02-07 Sat 15:40]
   :END:
** DONE Make sure it's possible to sort by the entry code
   - State "DONE"       [2009-02-24 Tue 04:04]
   :PROPERTIES:
   :Submitter: Christopher <christopher.illies@ki.se>
   :Version:  2.6.1
   :ID:       FE972418-2D3B-41B5-B028-D2F6C477415E
   :CREATED:  [2008-10-13 Mon 10:28]
   :END:
** DONE Make the balance report separator bar a format code
   - State "DONE"       [2009-02-27 Fri 16:31]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   124
   :ID:       373A0146-BE4B-4C7E-9DA2-38D1EB275216
   :END:
** DONE Need a flag for sorting the amounts in a -M report in ledger
   - State "DONE"       [2009-02-16 Mon 14:26] \\
     The user can sort by display_amount.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   69
   :ID:       D97CB3FC-C80F-428C-B2D6-D2B204E3D4D9
   :END:
** DONE Optimize parsing of posting amounts
   - State "DONE"       [2009-02-16 Mon 05:24]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   98
   :ID:       5EBDDE91-BF8A-4925-B53D-2533361583A5
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Promote tagging to a first-class concept
   - State "DONE"       [2009-02-16 Mon 05:24]
   - Tagging is indicated by the presence of ":tag:" in an xact note or a
     posting note.
   - Xact note postings apply also to all of their child xacts.
   - Searching by tag is support by using "/ tag..." on the command-line, after
     the fashion of "-- payee..".
   - When searching by tag, there should be a way to show a posting's tags
     in the register and balance outputs.
   :PROPERTIES:
   :Ticket:   208
   :ID:       E7595DA3-4634-4275-A793-701A6D9438A4
   :CREATED:  [2008-08-01 Fri]
   :END:
** DONE Provide single-letter value expression shortcuts
   - State "DONE"       from "TODO"       [2009-11-14 Sat 03:13]
   This is for compatibility with 2.x.
   - m :: now, today
   - a :: amount
   - i :: price
   - b :: cost
   - d :: date
   - X :: cleared
   - Y :: pending
   - R :: real
   - L :: actual
   - n :: index
   - N :: count
   - l :: depth
   - O :: total
   - I :: total_price
   - B :: total_cost
   - t :: display_amount
   - T :: display_total
   - U :: abs
   - S :: quantity
   - A :: avg, mean, average
   - P :: market_value [general]
   - v :: market_value(amount)
   - V :: market_value(total)
   - g :: gain
   - G :: total_gain
   - min
   - max
   :PROPERTIES:
   :ID:       80339708-5B3E-4413-A770-89E4E9912C04
   :CREATED:  [2009-11-02 Mon 01:10]
   :END:
** DONE Remove dependency on all globals:
   - State "DONE"       [2009-02-16 Mon 05:24]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   101
   :ID:       0C030979-3BF9-404D-9B39-5BDEAD77A749
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Remove global commodities map
   - State "DONE"       [2009-02-16 Mon 05:24]
   Create a commodity_pool, which is linked to a journal (and which every
   amount has a pointer to).
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   96
   :ID:       E41E5A1F-BD14-419D-BF0D-6CCF990A59B1
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Revise the concept of commodities
   - State "DONE"       [2009-02-16 Mon 05:25]
   At the moment, commodities, conversions, exchanges and prices all relate to
   the same underlying ideas, but they're unfortunately spread out throughout
   the docs and the reporting struture.  It's time to unify all of this.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   180
   :ID:       29E1CF5D-FEA9-4A23-90F0-4E14C374D908
   :CREATED:  [2008-04-12 Sat]
   :END:
** DONE Rewrite the concept of error contexts
   - State "DONE"       [2009-02-16 Mon 05:25]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   95
   :ID:       6FE3032D-5862-4213-B40F-80D5BDFB68E2
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Sort register reports by date by default
   - State "DONE"       from "TODO"       [2009-10-28 Wed 01:20]
   :PROPERTIES:
   :ID:       926078B5-07B9-4258-B769-8C3FD4BC0C81
   :CREATED:  [2009-10-27 Tue 22:44]
   :END:
** DONE Support "a; b" in value expressions
   - State "DONE"       [2009-03-03 Tue 16:03]
   :PROPERTIES:
   :ID:       6AEE70BA-673E-446F-9131-A3C29195A499
   :CREATED:  [2009-02-23 Mon 05:07]
   :END:
** DONE Support transactional queries in reports
   For example: List all expense postings in transaction which do not include a
   sales tax.
   :PROPERTIES:
   :ID:       18BDD076-83C0-46C5-8FC3-BC801C65C331
   :CREATED:  [2010-04-09 Fri 01:01]
   :END:
** DONE The --strict option should also prevent new commodities
   - State "DONE"       from "TODO"       [2009-10-31 Sat 03:08]
   :PROPERTIES:
   :ID:       3254504D-FA9F-4E60-B56D-414C6EF03BFE
   :CREATED:  [2009-03-07 Sat 00:31]
   :END:
** DONE The date parser needs to be rewritten
   - State "DONE"       from "TODO"       [2009-11-18 Wed 04:27]
   It needs to be a real parser, to handle these strings:
   :SOURCE:
   from july
   from 2009
   from 2009 july
   from july 2009
   from last july
   :END:
   :PROPERTIES:
   :ID:       28A80FB5-2475-45CD-B4AD-7BBA0038F9E6
   :CREATED:  [2009-11-06 Fri 01:42]
   :END:
** DONE The entry command drops price specifications
   - State "DONE"       from "TODO"       [2009-10-31 Sat 02:54]
   If you enter a pricing command like this in Emacs:
   :DATA:
   C -c C-a 2008/02/19 chevron 'GAL 11.118 @ $ 2.879'
   :END:
   The resulting entry omits the '@ ...' part.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   192
   :ID:       03C6208E-E48F-45BB-BFBF-2C38B129458A
   :CREATED:  [2008-05-03 Sat]
   :END:
** DONE The query parser should produce ptr_op_t trees directly
   - State "DONE"       from "TODO"       [2009-10-28 Wed 17:46]
   :PROPERTIES:
   :ID:       9165C59D-8933-4115-8684-5851A1D059C6
   :CREATED:  [2009-10-28 Wed 17:29]
   :END:
** DONE Use a "token context" in the query parser
   - State "DONE"       from "TODO"       [2009-10-28 Wed 17:46]
   :PROPERTIES:
   :ID:       A77821CD-DB8D-46A1-B873-4257F2796A5B
   :CREATED:  [2009-10-28 Wed 17:28]
   :END:
** DONE Valexpr function: magnitude
   - State "DONE"       from "TODO"       [2009-10-24 Sat 17:49]
   The largest positive value of a balance.
   :PROPERTIES:
   :ID:       C53A9D20-ADB6-4B7C-BEA6-0074242044F9
   :CREATED:  [2009-10-23 Fri 06:14]
   :END:
** DONE Valexpr strings cannot have chars like \n
   - State "DONE"       from "TODO"       [2009-10-31 Sat 02:59]
   - State "TODO"       from "DEFERRED"   [2009-10-22 Thu 07:34]
   - State "DEFERRED"   from "TODO"       [2009-06-28 Sun 17:37]
   :PROPERTIES:
   :ID:       23680D4C-0361-46DA-AC8F-C98CFF79F47B
   :CREATED:  [2009-02-27 Fri 13:19]
   :END:
** DONE Value expressions for getting at the lot date
   - State "DONE"       from "TODO"       [2009-10-31 Sat 03:10]
   For example: lotdate, lotdateof(x)
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   148
   :ID:       A1230B8C-EF48-40BB-A200-18E7E94620BE
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [#C] [[bug:175][#175]] Make an assert directive for Ledger
   - State "DONE"       from "TODO"       [2010-06-13 Sun 05:05]
   #+begin_src ledger :results outputb
   assert DATE AMOUNT ACCOUNT
   #+end_src
   is equivalent to
   #+begin_src ledger :results outputb
   DATE Reconciled statement
    [ACCOUNT]    = AMOUNT
   #+end_src
   :PROPERTIES:
   :ID:       52C041BD-5EF0-46E9-B046-A23CBF01632A
   :CREATED:  [2010-03-05 Fri 21:59]
   :END:
** DONE [#C] [[bug:176][#176]] Make "until today", "from yesterday" work for -p
   - State "DONE"       from "TODO"       [2010-06-14 Mon 08:04]
   :PROPERTIES:
   :ID:       438B58C4-59F6-462D-A9FA-CF4839BF064C
   :Message:  [[message://20100216095003.GA2870@rhodium.pps.jussieu.fr][from and until today, etc.]]
   :Submitter: Gabriel Kerneis <kerneis@pps.jussieu.fr>
   :CREATED:  [2010-02-16 Tue 23:31]
   :END:
** DONE [#C] [[bug:178][#178]] Have a way to set the date range to "this week" easily
   - State "DONE"       from "TODO"       [2010-06-14 Mon 08:14]
   :PROPERTIES:
   :ID:       3ED8AC82-37A1-4513-AB20-8FFC66A2BD00
   :Message:  [[message://8017aec0-63c1-4d55-bced-5e87e50e7a8d@o28g2000yqh.googlegroups.com][Is there a way to set the date range to "this week" easily?]]
   :Submitter: markscottwright <markscottwright@gmail.com>
   :CREATED:  [2010-01-09 Sat 21:08]
   :END:
** DONE [#C] [[bug:180][#180]] Allow for period expressions "4 months ago" and "last 5 weeks"
   - State "DONE"       from "TODO"       [2010-06-14 Mon 07:55]
   - State "TODO"       from "STARTED"    [2009-12-07 Mon 04:24]
   :PROPERTIES:
   :ID:       38B2FCC3-49E3-422D-8F90-03EF4A64382E
   :CREATED:  [2009-11-18 Wed 05:51]
   :END:
** DONE [#C] [[bug:223][#223]] Consider deprecating the --cache option
   - State "DONE"       from "TODO"       [2010-06-14 Mon 08:15] \\
     It is now officially deprecated.
   :PROPERTIES:
   :ID:       D8623268-D229-49A3-83A7-6C77010FC4A1
   :CREATED:  [2010-06-02 Wed 03:47]
   :END:
** DONE [#C] [[bug:293][#293]] Option --bold-if
   - State "DONE"       from "TODO"       [2010-06-22 Tue 03:23]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:31]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:06]
   Which will bold the whole transaction line if it matches the given predicate
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   154
   :ID:       3D04C70F-422D-4CEC-BC4A-B177C76D834A
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [#C] Add a --depth=X opton, which is equivalent to -l 'depth<=X'
   - State "DONE"       [2009-02-25 Wed 04:01]
   :PROPERTIES:
   :ID:       6E62D47D-2F63-4939-8D76-8078BAAB35A8
   :CREATED:  [2009-02-24 Tue 12:01]
   :END:
** DONE [#C] Add a multi-column budget balance report
   - State "DONE"       from "TODO"       [2009-10-27 Tue 07:47]
   Incidentally, it would be great to see something like:
   :OUTPUT:
   % ledger bal --p this --budget auto:fuel food:out
   $ 67.15  $ 120.00   $ -52.85  56%  Expenses:Auto:Fuel
   $ 18.30  $ 100.00   $ -81.70  18%  Expenses:Food:Out
   $ 85.45  $ 220.00  $ -134.55  39%  Total
   :END:
   :PROPERTIES:
   :ID:       8254755E-7B61-47C8-B48E-A2A7FD79EB80
   :URL:      http://github.com/jwiegley/ledger/issues#issue/5
   :CREATED:  [2009-10-26 Mon 21:29]
   :END:
** DONE [#C] Add support for comments (notes) on entire xacts
   - State "DONE"       [2009-02-15 Sun 23:19]
   These get scanned for tags or regexp match when scanning xacts using e//.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   63
   :ID:       DCB44369-82CE-44CB-AD05-42B25BA6A492
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [#C] Add the concept of spatially delimited "pages"
   - State "DONE"       [2009-02-26 Thu 05:05]
   Another way to associate a custag tag/field to entries is by virtue of their
   organisation in the file. We could tag a sequence of consecutive entries in
   a block, like this:
   :DATA:
   @page_begin Vacations

   ...

   @page_end
   :END:

   This gives us yet another dimension of tagging of transactions:

   - The account in which a transaction belongs
   - The page in which a transaction was declared.
   - The "notes" at the end of postings
   - The description of the transaction
   - The file in which a transaction was defined.

   These are all fields that can be used for selecting a subset of
   transactions. Some of these fields may allow us to simplify our accounts
   hierarchy to some extent.
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   176
   :ID:       BCE275E5-37EA-4231-8F05-55ED96B5BB3F
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [#C] Change self_total to amount, and family_total to total
   - State "DONE"       from "TODO"       [2009-10-27 Tue 19:04]
   :PROPERTIES:
   :ID:       AEDAEAE2-5A2D-4908-B733-B0FC80C5FC58
   :CREATED:  [2009-03-05 Thu 04:56]
   :END:
** DONE [#C] Change value_t to use a union instead of a char array
   - State "DONE"       [2009-02-15 Sun 23:19]
   This is needed on systems like Sparc64, where *((long *) data) = value will
   cause a SIGBUS due to a misaligned pointer access.
   :PROPERTIES:
   :Submitter: Thomas Delaet <thomas@delaet.org>
   :Version:  2.6
   :Ticket:   196
   :ID:       CAAC7BA1-882E-4BC1-A0BD-F65546EABDBF
   :CREATED:  [2008-05-07 Wed]
   :END:
** DONE [#C] Create a "cleared" report for balances
   - State "DONE"       from "TODO"       [2009-10-27 Tue 08:05]
   The idea for this report would be to show very nicely when the last date an
   account was balanced to was.  For example (from blais):
   :OUTPUT:
   .
   |----------------------------------------------------------------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------+---------------------------------------------------------------------------|
   |                                                                            | -- Current                                                                    |                                                                            |                                                                           |
   |                                                                            |                                                                               | -- HSBC                                                                    |                                                                           |
   |                                                                            |                                                                               |                                                                            | -- Checking                                      2007-12-31 -> 2007-12-31 |
   |                                                                            |                                                                               |                                                                            | -- Savings                                       2007-12-31 -> 2008-03-28 |
   |                                                                            |                                                                               | `-- Secured                                       2007-12-31 -> 2008-03-28 |                                                                           |
   |                                                                            | `-- RBC                                                                       |                                                                            |                                                                           |
   |                                                                            |                                                                               | -- Checking                                      2007-12-31 -> 2008-04-02  |                                                                           |
   |                                                                            |                                                                               | -- Checking-US                                   2007-12-31 -> 2008-03-03  |                                                                           |
   |                                                                            | `-- Savings                                       2007-12-31 -> 2008-04-02    |                                                                            |                                                                           |
   | `-- Investments                                                            |                                                                               |                                                                            |                                                                           |
   |                                                                            | -- HSBC-Broker                                       2007-12-31 -> 2008-04-13 |                                                                            |                                                                           |
   |                                                                            | -- OANDA                                             2007-12-31 -> 2007-12-31 |                                                                            |                                                                           |
   | `-- RBC-Broker                                                             |                                                                               |                                                                            |                                                                           |
   |                                                                            | -- Account-CA                                    2008-01-01 -> 2008-04-01     |                                                                            |                                                                           |
   |                                                                            | -- Account-RSP                                   2007-12-31 -> 2008-01-31     |                                                                            |                                                                           |
   | `-- Account-US                                    2008-01-01 -> 2008-04-01 |                                                                               |                                                                            |                                                                           |
   `-- Liabilities
      |-- Credit-Card
      |   |-- HSBC-MasterCard                                   2007-12-31 -> 2008-04-04
      |   `-- RBC-VISA                                          2007-12-31 -> 2008-04-02
      `-- RBC
          |-- Credit-Line                                       2007-12-31 -> 2007-12-31
          `-- Mortgage
              |-- Credit-Line                                   2007-12-31 -> 2007-12-31
              `-- Loan                                          2007-12-31 -> 2007-12-31
   :END:
   To implement this I'll need the following value expressions items:
   - latest_cleared
   - latest
   - earliest
   All the kinds of things collected for the stats report, actually.  Maybe I
   should implement that report as a simple format string?
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   182
   :ID:       4D175527-AE30-4030-B1B7-DD6A92B6F067
   :CREATED:  [2008-04-14 Mon]
   :END:
** DONE [#C] Enhanced comments
   - State "DONE"       [2009-02-10 Tue 02:07]
   - Note taken on [2008-07-21 Mon 18:53] \\
     I agree that we need something like this.  Also, whatever format is chosen, we
     should look at adding a flexible properties/tags/annotation mechanism for
     xacts and postings.
   12:47 < Demosthenes> i think we need a comment or further descriptive field that is preserved with the record
   12:47 < Nafai> That would probably be useful
   12:48 < Nafai> I can imagine, for example, in the future if I start scanning all of my receipts and such.  I'd like to be able to associate an xact with a given scan file
   12:48 < Nafai> I would do that via a comment, I suppose
   12:48 < Nafai> I'd bring it up on the mailing list and see what johnw thinks
   12:48 < Demosthenes> i was thinking expense report notes ;]
   13:02 < Demosthenes> if there were to be a comment, how would we make it look?
   13:03 < Demosthenes> my immediate suggestion would be to keep it freeform and use the ;, just that the parser would preserve the comments in the same text block as the ledger xact bounded by whitespace
   13:43 < Nafai> Yeah, that sounds reasonable
   14:16 < Demosthenes> then as an extension,  /^; ([A-Z][a-z]+): (.*)$/ could match key : value pairs for tags ;]
   14:17 < Nafai> Nice
   14:24 < Demosthenes> good news is, i can go ahead and write comments that way, and we'll see if its added later ;]
   15:22 < johnw> let me show you what I'm thinking of, in the spirit of Python
   15:23 < johnw> http://rafb.net/p/jyagP679.html
   15:25 < johnw> so, ; inside an xact will be a note, ; outside is a comment

   Example from johnw:
   :DATA:
   2008/07/21 For my friend Demosthenes
   ; This is an xact note, although it looks just like a comment.
   Expenses:Food ....
   :END:
   :PROPERTIES:
   :Submitter: Demosthenes
   :Version:  2.6
   :Ticket:   204
   :ID:       AC4FCEC6-7F38-4229-88AD-B0032C49AE93
   :CREATED:  [2008-07-21 Mon]
   :END:
** DONE [#C] Make --cost a synonym for --basis
   - State "DONE"       [2009-02-17 Tue 05:30]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   160
   :ID:       2CAD6455-2695-4BAC-BD79-FB61E0D8E092
   :END:
** DONE [#C] Make --last and --first be synonyms for --tail and --head
   - State "DONE"       [2009-02-16 Mon 16:05]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   159
   :ID:       CD7B03D4-E0B2-4E7F-81B2-D98816B68B84
   :END:
** DONE [#C] Option --args-only
   - State "DONE"       [2009-02-16 Mon 16:57]
   Have `--args-only`, which causes Ledger to ignore the environment or any
   initialization files.  Use this in the test scripts.  It will require making
   a standard price database.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   153
   :ID:       AB622F55-C2EF-43B9-B943-CABDBAF144F5
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [#C] Request for unique payee list
   - State "DONE"       [2009-02-16 Mon 22:58]
   [[message://87k68rutji.fsf@kea-dev-lnx-lt.intruvert.com][e-mail]]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   157
   :ID:       A75FE2B8-86B0-42B9-AB7F-C37C8FF576EC
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE [#C] Support a "prefix column" for all reports
   - State "DONE"       from "TODO"       [2009-11-11 Wed 01:55]
   For example, so that the register report could show the filename that each
   posting is from.  This would require both a configuratino option for the
   column's contents (if present), and the size it should be (default to 10?).
   :PROPERTIES:
   :ID:       38B3A6DB-5110-40B5-9B93-31BBCAB02180
   :CREATED:  [2009-11-09 Mon 13:55]
   :END:
** CANCELED Add a within(DATE, PERIOD) valexpr function
   - State "CANCELED"   from "TODO"       [2010-03-17 Wed 00:56]
   :PROPERTIES:
   :ID:       112D9AD9-B6A7-4AB1-ACA9-0D25E974AC68
   :CREATED:  [2010-01-29 Fri 02:56]
   :END:
** CANCELED Add item sequence list to journal_t
   - State "CANCELED"   [2009-02-16 Mon 05:22]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   145
   :ID:       2BA660CC-E09A-4358-944F-4527BF11F19C
   :END:
** CANCELED Add the ability to map OFX numbers to specific accounts
   - State "CANCELED"   [2009-02-16 Mon 05:22]
   By allowing a directive like this:
   :DATA:
   @mapaccount 0004637467862632    Assets:Current:RBC:Checking
   :END:

   It could facilitate the parsing of OFX data into Ledger date.
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :Version:  2.6
   :Ticket:   52
   :ID:       4FE37F8F-99F4-4548-88F3-D64CF7A76856
   :CREATED:  [2008-04-07 Mon]
   :END:
** CANCELED Allow Payee | Description for an xact payee
   - State "CANCELED"   [2009-02-16 Mon 05:23]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   185
   :ID:       383C04EE-94AF-4D01-BDEF-E644A12E97BF
   :CREATED:  [2008-04-20 Sun]
   :END:
** CANCELED Create an Org-mode table format report: "org"
   - State "CANCELED"   from "TODO"       [2010-05-22 Sat 17:55] \\
     The 'csv' report can now be used for this.
   :PROPERTIES:
   :ID:       CAF4C20A-1AA3-4E75-A39C-9ABB3BFA5EBB
   :CREATED:  [2010-04-30 Fri 07:29]
   :END:
** CANCELED Get rid of --print-format, and have print use hdr-format
   - State "CANCELED"   [2009-02-21 Sat 01:38]
   ... and post-format, which output uses.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   114
   :ID:       9D95A1BB-AC3C-41C5-9AE3-C6324F13458A
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Make ^ be a power operator
   - State "CANCELED"   [2009-02-24 Tue 04:04]
   So that 0.234 * 10^7 notation is possible.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   156
   :ID:       CE06A271-419D-4F27-87C6-74412BE546E1
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Make commodity_t::qualified_symbol a virtual function
   - State "CANCELED"   [2009-02-24 Tue 04:04]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   158
   :ID:       B20E725A-B218-4A13-B08B-D74659B35F32
   :END:
** CANCELED New reporting options: --descend and --descend-if
   - State "CANCELED"   [2009-02-16 Mon 05:24]
   message://m2slpojqjc.fsf@newartisans.com
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   168
   :ID:       06F4D252-4049-42D5-BBD4-F52130ED3F82
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Normalize automated postings
   - State "CANCELED"   [2009-02-16 Mon 05:24]
   So that there is no functional difference between the binary and textual
   data formats; this is needed for the GUI so that if xacts are added or
   changed, the auto_xacts are re-applied to that xact
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   116
   :ID:       F6E6FDE5-15FA-4AFB-B451-493F0C77F37C
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Option --transform VALEXPR
   - State "CANCELED"   [2009-02-24 Tue 04:05]
   Which is a handler that applies valexpr to each transaction and outputs a
   temporary transaction with that amount -- or is this just the same as -t?
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   152
   :ID:       C112D47E-7814-47D1-AE8C-B777AEFB7C56
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Output error messages in a way that compilation-mode can parse
   - State "CANCELED"   [2009-02-16 Mon 05:24]
   message://20080421160053.C6CE61144C3@banane.furius.ca
   :PROPERTIES:
   :ID:       EB8AAF67-40A1-479F-BF96-7CB17D9492C1
   :CREATED:  [2008-08-14 Thu]
   :END:
** CANCELED Parallelize resource cleanup (such as memory deallocation)
   - State "CANCELED"   from "STARTED"    [2010-05-08 Sat 03:12]
   :LOGBOOK:
   CLOCK: [2010-05-08 Sat 02:11]--[2010-05-08 Sat 03:11] =>  1:00
   :END:
   :PROPERTIES:
   :ID:       8D370CF3-347A-4BD7-B906-5256B90D7B48
   :URL:      [[http://arstechnica.com/software/news/2010/04/new-memory-management-method-give-multicore-boost-to-apps.ars?utm_source%3Drss&utm_medium%3Drss&utm_campaign%3Drss][New memory management method give multicore boost to apps]]
   :CREATED:  [2010-04-06 Tue 23:38]
   :END:
** CANCELED read_xml and write_xml methods for values
   - State "CANCELED"   [2009-02-08 Sun 16:06]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   151
   :ID:       415F72A7-A744-41EE-A849-D9E80237E00C
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED Support --read-format and --write-format
   - State "CANCELED"   [2009-02-16 Mon 05:25]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   120
   :ID:       2BDB9BCA-6C3F-4766-9AFC-F363237C9049
   :END:
** CANCELED Think about making streamable and xml_streamable interfaces
   - State "CANCELED"   [2009-02-08 Sun 16:07]
   :PROPERTIES:
   :ID:       E777B7FF-F109-4199-B5AA-89CC9DA92A9E
   :CREATED:  [2009-01-29 Thu 18:31]
   :END:
** CANCELED Tie-in with beancounter and quantlib
   - State "CANCELED"   [2009-02-27 Fri 16:31]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   118
   :ID:       7A8607F3-87C8-4A85-A4EF-BA090BB81EDE
   :END:
** CANCELED Value expression descriptions
   - State "CANCELED"   [2009-02-24 Tue 04:05]
   When parsing a value expression, allowing keeping a description tag, so that
   when an exception is fired the user can be told where the value expression
   came from.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   123
   :ID:       81340878-2C17-485B-BBA7-62A271925401
   :CREATED:  [2008-04-11 Fri]
   :END:
** CANCELED [#C] Change the binary cache reader to use Boost.Interprocess
   - State "CANCELED"   [2009-02-15 Sun 23:19]
   ...to read it in as a memory mapped file
   :PROPERTIES:
   :ID:       A978C1E9-86EA-4074-B8E8-2A3DF1A12ED2
   :CREATED:  [2008-08-05 Tue]
   :END:
** CANCELED [#C] Consider Martin's @openbal directive
   "AutoOpenBalance" from Martin Blais <blais@furius.ca>
   :PROPERTIES:
   :ID:       60AC4948-4B40-46D4-A346-26C394C8F1F9
   :CREATED:  [2008-08-14 Thu]
   :END:
** CANCELED [#C] Consider using mixed_amount_t instead of balance_t
   - State "CANCELED"   [2009-02-10 Tue 02:07]
   :PROPERTIES:
   :ID:       34214DA1-8FFF-4AF5-8A68-7DD79EDE261B
   :CREATED:  [2008-10-18 Sat 02:06]
   :END:
** CANCELED [#C] Every destructor which contains TRACE_DTOR should specify throw()
   - State "CANCELED"   [2009-02-10 Tue 02:07]
   :PROPERTIES:
   :ID:       44497B2D-292F-4C82-8D4F-B928FE6143EC
   :CREATED:  [2008-07-25 Fri]
   :END:
** CANCELED [#C] ledger date 2009/07/01 takes forever to return an error message
   - State "CANCELED"   from "TODO"       [2009-11-10 Tue 14:21] \\
     This is somewhat necessary, as I need to parse the main data file before
     normalizing command options -- which must be done before looking up the
     command!
   :PROPERTIES:
   :ID:       C444D9F0-55AF-4D70-8C65-609761672953
   :CREATED:  [2009-11-06 Fri 02:44]
   :END:
** WONTFIX [[bug:218][#218]] Make {{AMOUNT}} universal give the total cost/amount
   - State "WONTFIX"    from "STARTED"    [2010-06-02 Wed 01:13] \\
     I have discovered that I cannot implement this.  The reason is that 7.0 EUR in
     the example above here is a property of the commodity, not of the posting.
     Thus, you have 5 unit of GBP bought at 1.4 EUR, not a 5-unit-group bought at
     7.0 EUR.  What happens if you sell just 2 of them?  The math gets very
     complicated, and I would have to track how many of the "lot" still existed.
     With commodity properties, such tracking is unnecessary.
   :LOGBOOK:
   CLOCK: [2010-06-02 Wed 00:44]--[2010-06-02 Wed 01:13] =>  0:29
   :END:
   :PROPERTIES:
   :ID:       F76CD79B-1362-4ABF-917F-937502CBCB72
   :CREATED:  [2010-05-31 Mon 10:35]
   :END:
** WONTFIX [[bug:282][#282]] Create an operator for value + post
   - State "WONTFIX"    from "CANCELED"   [2010-06-12 Sat 05:28]
   - State "CANCELED"   from "DEFERRED"   [2010-06-12 Sat 05:26]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:05]
   :PROPERTIES:
   :ID:       28CE49A7-919B-4C93-9754-966DCC435DBA
   :CREATED:  [2009-10-23 Fri 06:14]
   :END:
** WONTFIX [[bug:287][#287]] In the equity report, if the "collapse" option is used ...
   - State "WONTFIX"    from "TODO"       [2010-06-14 Mon 08:18]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:32]
   - State "DEFERRED"   [2009-02-24 Tue 04:04]
   ... output only one entry.  Otherwise, output an entry for every top-level
   account.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   111
   :ID:       29D7E913-1A5C-4ED2-8AB8-53D895021615
   :CREATED:  [2008-04-11 Fri]
   :END:
** WONTFIX [[bug:295][#295]] Restore the XML parser (code is in xml local branch)
   - State "WONTFIX"    from "DEFERRED"   [2010-06-12 Sat 05:31]
   - State "DEFERRED"   from "TODO"       [2009-10-27 Tue 19:15]
   :PROPERTIES:
   :ID:       5332850A-B67B-4CF2-B553-BFA23EA9DB6F
   :CREATED:  [2009-10-25 Sun 22:47]
   :END:
** WORKSFORME [[bug:267][#267]] Restore the --price option
   SCHEDULED: <2010-06-13 Sun>
   - State "WORKSFORME" from "TODO"       [2010-06-14 Mon 04:27]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:35]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:06]
   Ryan Kolak had a few questions a while back about the way Ledger calculates
   some of its figures.  There was particularly one figure that was very hard
   to derive, so I've added a new --price option to make that available.  I
   also thought that now is a good time to review the various value reports,
   and what each of them means.  For the purposes of this example, I'm using
   the following input file:
   #+begin_src ledger
   1/18/2006 Inventory Purchas
        Inventory                       3 "1065" @ $15.00
        Liabilities:Credit Card

   1/22/2006 Sale #1200010
        Inventory                       -1 "1065" {$15.00} @ $25.00
        Income:Sales
   #+end_src

   First is the normal ledger "bal inventory":

   :OUTPUT:
              2 "1065"  Inventory
   --------------------
              2 "1065"
   :END:

   This, of course, shows how much you inventory you have on hand.  If I want
   to see it in terms of lots, I use --lots:
   :OUTPUT:
     2 "1065" {$15.00}  Inventory
   --------------------
     2 "1065" {$15.00}
   :END:

   Next is the -B, or cost basis report.  This sums up all transactions by
   *the cost to you for each*.  For the above case it reports:
   :OUTPUT:
                $20.00  Inventory
   --------------------
                $20.00
   :END:

   This reports $20 because you spent $45 to buy the inventory, then sold one
   item for $25.  $45 - $25 = $20.  This report can quickly tell you if you've
   made a profit on an item, by checking whether it has gone negative (meaning
   you've drawn more money from the account than you put into it).

   Next is the market value report (-V):
   :OUTPUT:
                $50.00  Inventory
   --------------------
                $50.00
   :END:

   Here it's $50 because you have two items left which are now valued at $25
   each (the most recently seen value for the item).  This is only meaningful
   if you believe the item is still worth $25 each.

   Now we come to the mysterious gain/loss report (-G):
   :OUTPUT:
                $30.00  Inventory
   --------------------
                $30.00
   :END:

   What does this mean?  Well, the current market value for the two items you
   hold is $50 ($25 * 2) -- but your net cost basis for these items is $20
   (since you gained some of your money back by selling one of them).  Thus,
   your overall net gain at this moment is $30, assuming you can sell the
   remaining two for the same price.  Another way of looking at it is that $75
   (total market value for 3 if all sold) - $45 (your cost for 3) = $30.  A
   confusing aspect of this report is that it subtracts a historical value
   (-B) from a present value (-V).

   Lastly we have a new report: --price, or -I for short.  There are also two
   new corresponding value expression variables, 'i' and 'I', for getting at
   the price and total price of a value.  You can remember -I by thinking of
   as the Inventory price.  The -I report for the above entries tells us:
   :OUTPUT:
                $30.00  Inventory
   --------------------
                $30.00
   :END:

   Ah, the same $30 again... but now it's coming from a different source.
   This report sums up the price you paid for each item in your current
   inventory, giving you $15 * 2.  This report, unlike the other value
   reports, can never go negative -- unless you try to sell inventory that
   doesn't exist.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   172
   :ID:       F6120E58-8985-4D76-908B-93A319E6D1D1
   :CREATED:  [2008-04-11 Fri]
   :END:
** WORKSFORME [[bug:268][#268]] @@ -- allow negative costs
   SCHEDULED: <2010-06-12 Sat>
   - State "WORKSFORME" from "TODO"       [2010-06-12 Sat 18:12]
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:35]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:05]
   I am quite keen on the @@ syntax, as I like to deal with commodities on a
   net basis. However, there is a bit of an inconsistency between @@ and @.

   Suppose I have the ledger file:
   :DATA:
   2008/01/01 * Purchase Apple shares
       Equities        1000 AAPL @ $2
       Cash

   2008/06/30 * Sell some Apple shares
       Equities        -500 AAPL @ $2.5
       Cash
   :END:
   If I type:
   :SCRIPT:
   ledger -f example01.txt -jB reg Equities
   :END:
   I get the output:
   :OUTPUT:
   2008-01-01 2000
   2008-06-30 -1250
   :END:

   The above is correct. $2000 goes in as equities as an asset, and £1250 is
   marked as a negative, thereby reducing the equity balance.

   Now. Suppose I decide I would rather use the @@ command. I would have a
   ledger file:
   :DATA:
   2008/01/01 * Purchase Apple shares
   Equities    1000 AAPL @@ $2000
   Cash

   2008/06/30 * Sell some Apple shares
   Equities    -500 AAPL @@ $1250
   Cash
   :END:
   If I type:
   :SCRIPT:
   ledger -f example01.txt -jB reg Equities
   :END:
   I now get the output:
   :OUTPUT:
   2008-01-01 2000
   2008-06-30 1250
   :END:

   The above is incorrect, because the +1250 has changed to -1250. It implies
   the purchase of shares, rather than a sale. I can't just change the $1250 to
   -$1250 in the ledger file, either, because it complains:
   :OUTPUT:
   Error: A posting's cost may not be negative
   :END:
   :PROPERTIES:
   :Submitter: Mark Carter <alt.mcarter@googlemail.com>
   :Message:  [[message://62f2a66e0903280703g1826cc25u19cca48606e4e40@mail.gmail.com][RFE: @@ - allow negative costs]]
   :ID:       4F81E261-E6C6-401B-B6CA-0B356072D770
   :CREATED:  [2009-04-01 Wed 18:52]
   :END:
** WORKSFORME Excluding some transactions if a file is included
   :PROPERTIES:
   :ID:       AA1D4807-4477-4035-8156-74BFAA929E02
   :Message:  [[message://20100402180202.GA10823@jirafa.cyrius.com][Excluding some transactions if a file is included]]
   :CREATED:  [2010-04-04 Sun 15:18]
   :END:
** DUPLICATE [[bug:229][#229]] Have a primary directive
   - State "DUPLICATE"  from "TODO"       [2010-06-04 Fri 06:16] \\
     Duplicate of #217.
   primary CAD for account Expenses [and children]
   primary CAD for commodity $
   :PROPERTIES:
   :ID:       76751CDA-EE47-4D3F-BABE-24260E59A44E
   :CREATED:  [2010-06-04 Fri 02:24]
   :END:
** DUPLICATE [[bug:289][#289]] Integrate with libgcrypt so ledger files can be encrypted
   - State "DUPLICATE"  from "DEFERRED"   [2010-06-08 Tue 21:57] \\
     Duplicate of #278.
   - State "DEFERRED"   from "TODO"       [2010-05-08 Sat 02:07]
   :PROPERTIES:
   :ID:       7CB80AA0-5D86-421A-B3DD-232FCA7696AB
   :CREATED:  [2010-04-30 Fri 07:33]
   :END:
** DUPLICATE [[bug:296][#296]] Support alert warnings in Ledger
   - State "DUPLICATE"  from "TODO"       [2010-06-12 Sat 14:05] \\
     Duplicate of 272.
   - State "TODO"       from "DEFERRED"   [2010-06-12 Sat 05:30]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:05]
   Like if expenses during a given month are too high.  This could be
   implemented using automated transactions with a "warn" function as the
   amount of a bogus account.
   :PROPERTIES:
   :ID:       28BD75AE-219C-4DF5-9D19-E7774BFC8DED
   :CREATED:  [2009-10-23 Fri 06:12]
   :END:
** DUPLICATE Preserve XML comments
   - State "DUPLICATE"  [2009-01-29 Thu 15:38] \\
     Duplicated by D27098A4-647A-4EEA-B0B8-3088E069214D.
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   142
   :ID:       D964682A-2B95-482F-B7FE-BAEE3E2E2AA8
   :CREATED:  [2008-04-11 Fri]
   :END:
** DUPLICATE ~/.ledgerrc not being consulted
   - State "DUPLICATE"  from "TODO"       [2009-10-27 Tue 21:58] \\
     This is being caused by [[id:71FE0FAB-622D-403C-A944-C7541948AFFF]].
   :OUTPUT:
   % git log -1
   commit <a href="/jwiegley/ledger/commit/f35bc939c96c3a3bf09c5881d638b5ba60449c03">f35bc93</a>
   Author: John Wiegley <johnw@newartisans.com>
   Date:   Sun Oct 11 14:07:55 2009 -0400

       Added a note about "acprep update" to README
   % more ~/.ledgerrc
   --date-format %Y/%m/%d
   % ./ledger reg -p this grocer | head -1
   09-Oct-02 Kroger               Expenses:Food:Groceries      $ 38.63      $ 38.63
   % ./ledger reg --date-format %Y/%m/%d -p this grocer | head -1
   2009/10/02 Kroger               Expenses:Food:Groceries      $ 38.63      $ 38.63
   :END:
   :PROPERTIES:
   :ID:       863A769C-E97C-4CA6-B89F-B72C47F07543
   :URL:      http://github.com/jwiegley/ledger/issues#issue/4
   :CREATED:  [2009-10-26 Mon 21:29]
   :END:
* Python
** DONE account_total(X) should be account(X).amount
   - State "DONE"       from "TODO"       [2009-11-10 Tue 02:45]
   :PROPERTIES:
   :ID:       AB130FE5-33EC-4243-8F89-35C1A0848382
   :CREATED:  [2009-11-05 Thu 06:09]
   :END:
** DONE Add expr_t(string) and expr_t::operator() for ease of use from Python
   - State "DONE"       from "TODO"       [2009-11-09 Mon 14:08]
   :PROPERTIES:
   :ID:       55B576FF-4448-4569-8E5B-56C63D9703D8
   :CREATED:  [2009-11-03 Tue 18:54]
   :END:
** DONE Add implicit conversion of duration_t to PyDelta
   - State "DONE"       from "TODO"       [2009-11-10 Tue 20:34]
   [[file:py_times.cc::jww%202007%2005%2004%20Convert%20time%20duration%20objects%20to%20PyDelta][py_times.cc]]
   :PROPERTIES:
   :ID:       B5D1ABA9-1580-4719-A1B5-CBE8EA89147D
   :CREATED:  [2009-11-03 Tue 14:00]
   :END:
** DONE Add implicit conversion of value_t::sequence_t to tuple
   - State "DONE"       from "TODO"       [2009-11-11 Wed 04:48]
   [[file:py_value.cc::jww%202009%2011%2002%20Need%20to%20support%20conversion%20eof%20value_t%20sequence_t][py_value.cc]]
   :PROPERTIES:
   :ID:       9D00371D-44BC-44DB-B8FB-14AD2125876F
   :CREATED:  [2009-11-03 Tue 14:01]
   :END:
** DONE Create some standard Python modules for Ledger: http
   - State "DONE"       [2009-02-24 Tue 20:01]
   This would install from python/ledger/http.py, and would get activated if
   someone used the http command.
   :PROPERTIES:
   :ID:       D4CFF147-B825-43E2-B85C-28501936EEAE
   :CREATED:  [2009-02-24 Tue 11:08]
   :END:
** DONE Deal with PyUnicode objects
   - State "DONE"       from "TODO"       [2009-11-10 Tue 14:15]
   :PROPERTIES:
   :ID:       B7403D92-8C73-414F-A0EC-145D1F7101D4
   :CREATED:  [2009-11-07 Sat 06:35]
   :END:
** DONE Delete unused python classes: op, token, parser
   - State "DONE"       from "TODO"       [2009-11-05 Thu 04:21]
   :PROPERTIES:
   :ID:       C5834D2D-562C-4037-84B5-30D58337434B
   :CREATED:  [2009-11-03 Tue 18:54]
   :END:
** DONE Expose journal_t::read to Python
   - State "DONE"       from "TODO"       [2009-11-07 Sat 06:50]
   :PROPERTIES:
   :ID:       9B059767-253E-451C-B65A-FD27FE27944D
   :CREATED:  [2009-11-05 Thu 06:09]
   :END:
** DONE For Python's sake, all Journals should share a commodity_pool
   - State "DONE"       from "TODO"       [2009-11-21 Sat 05:29]
   :PROPERTIES:
   :ID:       B3D2495F-F542-4F96-9A11-065194D63AAD
   :CREATED:  [2009-11-19 Thu 17:36]
   :END:
** DONE Have Ledger fire up the Python interpreter only "as needed"
   - State "DONE"       [2009-01-24 Sat 05:24]
   :PROPERTIES:
   :ID:       A98BDA0B-8B08-433F-B292-AFCAFB675DE9
   :ARCHIVE_TIME: 2009-02-01 Sun 15:50
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2009-01-23 Fri 03:39]
   :END:
** DONE I can simplify the Python integration even further with scopes
   - State "DONE"       [2009-02-09 Mon 00:04]
   Rather than exposing post_t, I can just do __getattr__ lookups in the
   current scope_t, the same way that value expressions would.
   :PROPERTIES:
   :ID:       DF2D6FE9-8598-4747-8B35-88075C6D7EAA
   :CREATED:  [2009-02-08 Sun 15:09]
   :END:
** DONE Ledger should always hand Unicode strings back to Python
   - State "DONE"       from "TODO"       [2009-11-10 Tue 20:14]
   :PROPERTIES:
   :ID:       802AE33C-8AA3-4799-9277-79621D11E290
   :CREATED:  [2009-11-10 Tue 14:41]
   :END:
** DONE Ledger: Add INFO statement regarding Python starting, etc.
   - State "DONE"       [2009-01-23 Fri 15:40]
   :PROPERTIES:
   :ID:       2BAE44BE-2EA4-4A51-B6A0-1DE6E7DFAA27
   :ARCHIVE_TIME: 2009-02-01 Sun 15:50
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2009-01-23 Fri 03:41]
   :END:
** DONE Make sure journal and xact support the Python iteration protocol
   - State "DONE"       from "TODO"       [2009-11-05 Thu 04:21]
   http://wiki.python.org/moin/boost.python/iterator
   :PROPERTIES:
   :ID:       36026E30-95C9-4616-B39A-C1D30F807D12
   :CREATED:  [2009-11-03 Tue 07:59]
   :END:
** DONE Make the Python interface simpler
   - State "DONE"       from "TODO"       [2009-11-05 Thu 04:22]
   For example, this should be possible:
   :SOURCE:
   from ledger import *

   for txn in Journal("~/.ledger"):
     print txn.payee
     for post in txn:
       print post.account        # str() calls fullname()
   :END:
   :PROPERTIES:
   :ID:       68226663-9FF5-428A-AC39-DD70750F11B0
   :CREATED:  [2009-11-03 Tue 08:23]
   :END:
** DONE Move python/*.cc files into src/, so python/ can contain .py files
   - State "DONE"       [2009-02-24 Tue 16:13]
   :PROPERTIES:
   :ID:       DB0E282A-F1D4-4009-BBE0-B2D97EACA9B5
   :CREATED:  [2009-02-24 Tue 15:04]
   :END:
** DONE Restore py_amount, and the Python unit tests
   - State "DONE"       [2009-02-27 Fri 16:31]
   :PROPERTIES:
   :ID:       4F5490B3-7FE8-4CE7-B86C-71BCF3AE9918
   :CREATED:  [2009-02-21 Sat 12:35]
   :END:
** DONE The "ledger hello" command fails with "unknown function import_"
   - State "DONE"       from "TODO"       [2009-11-10 Tue 13:47] \\
     I've removed the "hello" command, and fixed the underlying problem.
   - State "TODO"       from "STARTED"    [2009-11-10 Tue 02:49]
   :PROPERTIES:
   :ID:       5FF900A4-8F86-406C-91F5-9314F74A9C6E
   :CREATED:  [2009-11-07 Sat 09:05]
   :END:
** DONE When passing SCOPE args, always downcast
   - State "DONE"       from "TODO"       [2009-11-05 Thu 17:17]
   This way I don't need to expose scope_t at all!
   :PROPERTIES:
   :ID:       2D867E72-2030-4451-9FEE-A77D77680847
   :CREATED:  [2009-11-05 Thu 08:29]
   :END:
** CANCELED Create a Python wrapper for op_t objects
   - State "CANCELED"   from "DEFERRED"   [2009-11-05 Thu 04:23]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 22:04]
   If it's evaluated in a value context, like str, int or __repr__, then
   calculate and determine the value.  Otherwise, don't calculate so it remains
   callable.
   :PROPERTIES:
   :ID:       3040E933-2068-4C78-954F-F78A7BAFB2D6
   :CREATED:  [2009-02-24 Tue 22:15]
   :END:
** CANCELED Fix boost::optional translation class for Dmitriy
   - State "CANCELED"   from "DEFERRED"   [2009-11-10 Tue 20:34]
   - State "DEFERRED"   from "TODO"       [2009-11-10 Tue 20:16]
   - State "TODO"       from "DEFERRED"   [2009-11-05 Thu 04:23]
   - State "DEFERRED"   from "TODO"       [2009-10-27 Tue 19:11]
   - State "TODO"       from "DEFERRED"   [2009-10-22 Thu 07:34]
   - State "DEFERRED"   from "TODO"       [2009-06-16 Tue 16:27]
   [[message://2fd72fb20901281006u181318bke33c44a25098dfd8@mail.gmail.com][Re: boost::optional and boost::python]]
   :PROPERTIES:
   :ID:       DD3AABF8-A52D-4E1E-A931-DA6131F31F7A
   :CREATED:  [2009-02-02 Mon 03:13]
   :END:
** CANCELED Rewrite py_scope.cc
   - State "CANCELED"   from "TODO"       [2009-11-05 Thu 17:17]
   :PROPERTIES:
   :ID:       02F01290-311E-4A6C-9049-3EA78BA7CA1E
   :CREATED:  [2009-11-03 Tue 18:54]
   :END:
** WONTFIX Problems compiling with python support on debian squeeze
   - State "WONTFIX"    from "DONE"       [2010-01-22 Fri 20:06] \\
     This is apparently a packaging issue on Debian.
   - State "DONE"       from "TODO"       [2010-01-22 Fri 18:51]
   - Note taken on [2010-01-22 Fri 18:49] \\
     [[message://20100122004144.GA17106@atom][Re: problems compiling with python support on debian squeeze - solved]]
   - State "TODO"       from "WONTFIX"    [2010-01-22 Fri 18:49]
   - State "WONTFIX"    from "TODO"       [2010-01-21 Thu 04:28]
   :PROPERTIES:
   :ID:       0167EEB2-6D64-4387-8F1D-F464C699A047
   :Message:  [[message://20100104044948.GA14665@atom][problems compiling with python support on debian squeeze]]
   :CREATED:  [2010-01-09 Sat 21:07]
   :END:
** WORKSFORME [#A] [[bug:184][#184]] For those interested in the Python support                      :blocker:
   - State "WORKSFORME" from "TODO"       [2010-06-08 Tue 17:26] \\
     This can happen if the Python that Ledger is linked to is not the same as the
     Python that your libboost_python is linked to.

     This is not a problem in Ledger, but your build environment.  Send me e-mail
     directly and perhaps I can help you get it straightened out.
   Do you have any clue on the following error message?
   :OUTPUT:
   $ ./ledger python ./python/demo.py
   Welcome to the Ledger.Python demo!
   Traceback (most recent call last):
    File "./python/demo.py", line 99, in <module>
      comms.exchange(eur, ledger.Amount('$0.77')) # Trade 1 EUR for
   $0.77
   AttributeError: 'module' object has no attribute 'Amount'
   :END:
   :PROPERTIES:
   :ID:       3CA93725-E9BF-4FCF-8F21-50EA394C9FDA
   :Message:  [[message://390f36c2-1bde-485b-9d95-bb15b04b4408@u9g2000yqb.googlegroups.com][Re: For those interesting in the Python support]]
   :Submitter: thierry <thierry.daucourt@free.fr>
   :CREATED:  [2010-03-26 Fri 22:24]
   :END:
* Build
** DONE [#A] [[bug:346][#346]] Release Ledger 2.6.3
   - State "DONE"       from "TODO"       [2010-06-19 Sat 06:53]
   :PROPERTIES:
   :ID:       5C68774D-05F7-49A6-990B-EAA889F73B20
   :Submitter: Brent Pinkney <brp@4dst.com>
   :Message:  [[message://201006161241.33330.brp@4dst.com][Ledger 2.6.1 - patches for gcc 4.4.3]]
   :CREATED:  [2010-06-16 Wed 18:17]
   :END:
** DONE [[bug:215][#215]] Compile fails for version 3.0
   - State "DONE"       from "TODO"       [2010-06-02 Wed 18:45] \\
     This was a problem with universal binaries, so I've turned them off by default
     in acprep and add a --universal option.
   :PROPERTIES:
   :ID:       5AB0A35C-1875-46CF-98D2-C0BC5DDD2962
   :Submitter: Thomas Bikeev <thomas.bikeev@me.com>
   :Message:  [[message://2262D050-DAEA-4CC2-8295-3A5471FF8E36@me.com][Re: Compile fails on 3.0]]
   :CREATED:  [2010-05-30 Sun 03:33]
   :END:
** DONE [[bug:321][#321]] vim syntax doesn't support tag/pop
   - State "DONE"       from "TODO"       [2010-06-11 Fri 17:03]
   :PROPERTIES:
   :ID:       A77837CF-8CE2-4B70-A7ED-323E63F067E4
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :Message:  [[message://bug-321-1@http.newartisans.com/bugzilla/][{Bug 321} New: vim syntax doesn't support tag/pop]]
   :CREATED:  [2010-06-10 Thu 22:37]
   :END:
** DONE [[bug:324][#324]] Get the CentOS build working for orc_emac
   SCHEDULED: <2010-06-13 Sun>
   - State "DONE"       from "TODO"       [2010-06-14 Mon 03:25]
   - Note taken on [2010-06-12 Sat 04:55] \\
     It's almost done building now.
   :PROPERTIES:
   :ID:       1A96B0D0-C427-4193-A204-F4C217BD6A44
   :CREATED:  [2010-06-10 Thu 16:01]
   :END:
** DONE [[bug:328][#328]] Build Ledger with Visual Studio
   - State "DONE"       from "TODO"       [2010-06-15 Tue 05:24]
   1. Some compiler warnings. There are a number of contructs where VS is more
      fussy about than gcc. I have disabled these specific warnings, which I
      think is fine, especially for the ones where there is no direct Unix
      equivalent.
      - Warning: force int to bool, performance penalty. In many places in the
        code, ints and bools are directly compared or used in single
        expressions which apparently can (or could in the past) cause a
        performance degradation as it would require a few more instructions to
        do the comparison with an int. I think it's safe to ignore this
        warning; I've disabled it in the project files.
      - Unused variables. Mostly in catch() blocks, the 'err' variable is
        hardly ever used. Can ignore this too, I think.
      - Mixing of struct and class. In many places, forward declarations
        happen as class while the actual declaration is as struct. Only
        difference is the default visibility; if I change everything to be
        'class' I get errors on accessing private members. I'm not sure if the
        standard prescribes what should happen in this case, I've just changed
        everything to 'struct' and now it compiles fine. This is mostly a
        stylistic issue, I'll leave that to you to decide.
      - str_xxx functions. Those are deprecated in VS because they're
        potentially unsafe; replacements with a _s suffix are provided. Since
        those are not portable I suggest we ignore these warnings; I've
        disabled them in the project properties.
      - Cast from uint_least32_t for SHA1::Result. In 2 or 3 places (in
        utils.cc, filters.cc, utils.h) I had to add a cast to uint* like this:
        #+begin_src c++
        sha.Result((unsigned int*)message_digest);
        #+end_src
        Is this ok? I'm not quite sure why uint_least32_t[] was used here in
        the first place?
   2. Missing preprocessor defines. The code uses PACKAGE_VERSION and VERSION
      precompiler constants. Can you explain where they come from?  (I mean I
      guess they come from the build chain, but where are their values taken
      from?) For now I've manually set them to 'next' in the project
      configuration but I guess they should automatically use the correct one.
   3. Another minor stylistic issue is the mixing of tabs and spaces. The code
      is quite hard to read in some places because the spaces seem to assume
      an indent of 2, but the tab width is set to 4 (by default) on VS. I
      don't know anyone who ever changes it either. So this is really minor
      but it would be nice if all tabs could be replaced with 2 spaces, or
      tabs would be used consistently.
   4. Now we get to the real problems. There are a few places where real
      Unix constructs are used that have no equivalent in Wnidows.
      - In visit_man_page, fork() is used. It looks like this is only for
        showing the man page though. I suggest an #ifdef where the Windows
        version opens a browser with the documentation, considering there is
        no such thing as man on Windows.
      - stream.cc uses pipes and forks for the 'pager' functionality.  Could
        you explain what this does? Is this required on Windows? I've
        commented it out for now.
      - main.cc sets a handler for the SIGPIPE signal which doesn't exist on
        Windows. I've put that in a #ifdef _WIN32 section, seems the
        reasonable thing to do.
   5. Python integration. The py_ files don't seem to have a way to be
      disabled through the preprocessor; I guess the Unix build chain compiles
      them or not based on the ./configure options. I have left them out of
      the project for now. It's been a long time since I embedded Python
      somewhere, I'd have to look into this a bit deeper.
   6. amount.cc uses mpfr_asprintf . I got an error from the linker that the
      implementation of this was not found. I can't find it in my mpfr sources
      either. I've replaced it with gmp_asprintf and now it compiles and links
      fine. I'm not familiar with all of these libraries, is this the same
      function with a different name? Did I screw something up in configuring
      mpfr?
   7. Lastly, I haven't run the tests yet. The program itself compiles and
      runs fine (ledger --help, that is - haven't tried any real
      functionality) but the next step would be for me to test if all
      functionality works as expected. I see a bunch of python and c++ code in
      the test directory; do I need python to run any tests at all or can I
      skip those and focus on the cpp tests first?
   :PROPERTIES:
   :ID:       69F46250-CB1D-40C2-AC4A-39AB4E366310
   :Submitter: Roel Vanhout <roel.vanhout@gmail.com>
   :Message:  [[message://AANLkTilNxUsD8glzKcEWW4fQ56uGF5GlPOmMWA1oPM3_@mail.gmail.com][Building Ledger with VS (was: Re: Help: How do I start?)]]
   :CREATED:  [2010-06-11 Fri 17:23]
   :END:
** DONE [[bug:331][#331]] [MacPorts] #25213: ledger-devel Portfile
   - State "DONE"       from "TODO"       [2010-06-15 Tue 08:25]
   :PROPERTIES:
   :ID:       59444116-2810-4073-BE96-52DA023CC540
   :Submitter: MacPorts <noreply@macports.org>
   :Message:  [[message://063.0b8b1c6b9c8651a8e3a62880f1596b01@macports.org][Re: {MacPorts} #25213: ledger-devel Portfile]]
   :CREATED:  [2010-06-11 Fri 22:26]
   :END:
** DONE [[bug:419][#419]] Resolve Clang warnings in the Ledger build
   - State "DONE"       from "TODO"       [2011-02-04 Fri 07:26]
   :PROPERTIES:
   :ID:       44F046A0-CA2B-4856-BA00-4B4A5CB8979F
   :CREATED:  [2010-11-10 Wed 11:19]
   :END:
** DONE Keep logging on for NDEBUG builds
   - State "DONE"       from "TODO"       [2010-06-05 Sat 03:38]
   :PROPERTIES:
   :ID:       7D51AB9B-71FB-476F-AFE4-7F4C1C543A41
   :CREATED:  [2010-06-04 Fri 06:36]
   :END:
** DONE [#C] Ledger's proof build is failing
   - State "DONE"       from "STARTED"    [2010-06-02 Wed 00:31]
   :LOGBOOK:
   CLOCK: [2010-06-01 Tue 20:43]--[2010-06-02 Wed 00:31] =>  3:48
   :END:
   :PROPERTIES:
   :ID:       11318EF9-6D74-4F7C-B833-E2FD0E53465B
   :CREATED:  [2010-05-28 Fri 16:06]
   :END:
** WONTFIX [[bug:237][#237]] Avoid having to rm -fr ledger-proof
   - State "WONTFIX"    from "DEFERRED"   [2010-06-12 Sat 15:03]
   - State "DEFERRED"   from "TODO"       [2009-06-16 Tue 17:08]
   :OUTPUT:
   acprep: INFO: === Wiping build directory /home/nafai/Products/ledger-proof/default ===
   acprep: ERROR: Caught exception
   Traceback (most recent call last):
   File "./acprep", line 141, in run
    exit_code = self.main(*main_args)
   File "./acprep", line 297, in main
    PrepareBuild.__dict__['phase_' + cmd](self, *args)
   File "./acprep", line 1239, in phase_proof
    self.configure_flavor('default')
   File "./acprep", line 1176, in configure_flavor
    shutil.rmtree(self.build_directory())
   File "/usr/lib/python2.5/shutil.py", line 175, in rmtree
    rmtree(fullname, ignore_errors, onerror)
   File "/usr/lib/python2.5/shutil.py", line 180, in rmtree
    onerror(os.remove, fullname, sys.exc_info())
   File "/usr/lib/python2.5/shutil.py", line 178, in rmtree
    os.remove(fullname)
   OSError: [Errno 13] Permission denied: '/home/nafai/Products/ledger-proof/default/ledger-3.0/config.sub'
   :END:
   :PROPERTIES:
   :ID:       12D4AB31-964F-4206-8AA0-2CA9C509DA30
   :CREATED:  [2009-03-11 Wed 20:54]
   :END:
** WONTFIX [[bug:239][#239]] Ledger 2.6 is not building on Debian 5 latest
   - State "WONTFIX"    from "DEFERRED"   [2010-06-12 Sat 05:28]
   - State "DEFERRED"   from "TODO"       [2009-10-25 Sun 19:16]
   :PROPERTIES:
   :ID:       427F8D8D-39CB-47ED-8438-BF07BBBE6672
   :CREATED:  [2009-04-24 Fri 17:13]
   :END:
** WORKSFORME [#A] [[bug:162][#162]] sm is seeing a segfault with the register command               :blocker:
   - State "WORKSFORME" from "TODO"       [2010-06-17 Thu 20:49]
   - State "TODO"       from "WORKSFORME" [2010-06-16 Wed 18:47]
   - State "WORKSFORME" from "TODO"       [2010-06-06 Sun 03:22] \\
     This now works fine for me.
   - Note taken on [2009-12-06 Sun 06:05] \\
     It happens on Leopard for me in a virtual machine.
   - Note taken on [2009-11-25 Wed 04:40] \\
     This is happening because boost::regex is constructing a bad object.
   :PROPERTIES:
   :ID:       46196FD4-B82B-4633-A728-94D0FFB65F69
   :Message:  [[message://hef2ir$tuh$1@ger.gmane.org][register segfault with recent build]]
   :Submitter: Simon Michael <simon@joyful.com>
   :CREATED:  [2009-11-24 Tue 22:13]
   :END:
** DUPLICATE [#A] [[bug:473][#473]] RegressTests failing on Ubuntu 10.10
   - State "DUPLICATE"  from "TODO"       [2011-02-12 Sat 16:08] \\
     Duplicate of #472.
   :PROPERTIES:
   :ID:       69A61481-598F-4380-A52C-5F26911F0A6A
   :Message:  [[message://AANLkTimp16-_yY7qvsW7DhwgFTF4q6umZ5BAiqakRTwF@mail.gmail.com][RegressTests failing on Ubuntu 10.10]]
   :CREATED:  [2011-01-31 Mon 19:53]
   :END:
** NOTE If autoreconf fails, try installing the autopoint library
   :PROPERTIES:
   :ID:       30455F9F-D192-493A-AA81-2BC0E238C18E
   :Message:  [[message://20110202143502.GL8293@x201][Re: Compile failure]]
   :CREATED:  [2011-02-02 Wed 15:46]
   :END:
* Tests
** DONE [[bug:219][#219]] Add a Makefile rule ensuring all options are tested and documented
   - State "DONE"       from "TODO"       [2010-06-18 Fri 19:47]
   - State "TODO"       from "STARTED"    [2010-06-16 Wed 03:54]
   - State "TODO"       from "STARTED"    [2010-06-02 Wed 17:12]
   :PROPERTIES:
   :ID:       F44DCE38-1191-4759-8DC7-194B8A5BF8E0
   :CREATED:  [2010-05-31 Mon 01:14]
   :END:
** DONE [[bug:317][#317]] Ledger is still failing the higher-numbered generation seed tests
   - State "DONE"       from "DEFERRED"   [2010-06-12 Sat 05:29]
   - State "DEFERRED"   from "TODO"       [2009-10-29 Thu 01:00]
   :PROPERTIES:
   :ID:       B9C429C8-A894-48FE-9C8D-8068E2467D75
   :CREATED:  [2009-03-03 Tue 15:47]
   :END:
** DONE [[bug:325][#325]] Migrate from CppUnit to the Boost Test FrameWork
   - State "DONE"       from "TODO"       [2011-02-04 Fri 03:41]
   - State "TODO"       from "DEFERRED"   [2011-02-04 Fri 03:41]
   - State "DEFERRED"   from "TODO"       [2010-06-19 Sat 13:38]
   - State "TODO"       from "DEFERRED"   [2010-06-15 Tue 17:00]
   - State "DEFERRED"   from "TODO"       [2010-06-14 Mon 08:17]
   :PROPERTIES:
   :ID:       44B30EE4-6C72-4DDE-8BDA-1E6DE683B796
   :URL:      [[http://www.boost.org/doc/libs/1_43_0/libs/test/doc/html/tutorials/hello-the-testing-world.html][Introduction to using the Unit Test Framework]]
   :CREATED:  [2010-06-11 Fri 17:10]
   :END:
** DONE [[bug:357][#357]] The parallelized RegressTests no longer notices errors
   - State "DONE"       from "TODO"       [2010-06-22 Tue 03:23]
   :PROPERTIES:
   :ID:       943839DB-32DF-4807-9589-BA4173FA193A
   :CREATED:  [2010-06-20 Sun 18:36]
   :END:
** DONE Abstract RegressTests.py (was: opt-lots should use input/wow.dat)
   - State "DONE"       [2009-03-03 Tue 03:18]
   This means that RegressTests.py needs to be sensitive to whether -f was
   explicitly specified, and should substitute $test for the input directory.

   I can also abstract the reading of <<<, >>> sections in RegressTests, into
   a RegressTest object that knows how to read out multiple subsections.
   :PROPERTIES:
   :ID:       AEEB769E-9D44-428A-A028-D88E79D76B8D
   :CREATED:  [2009-02-28 Sat 06:17]
   :END:
** DONE BOOST_FOREACH is causing many invalid branch coverage failures
   - State "DONE"       from "TODO"       [2010-06-16 Wed 03:52]
   :PROPERTIES:
   :ID:       24D76FE5-1E7B-4889-B447-2C02EFB1D019
   :CREATED:  [2010-06-15 Tue 17:12]
   :END:
** DONE Can't build tests with -j3
   - State "DONE"       [2009-03-08 Sun 18:46]
   :OUTPUT:
   g++ -DHAVE_CONFIG_H -I. -I..  -I../test -I../src -I../lib -I../lib/utfcpp/source -isystem /usr/local/stow/cppunit/include  -isystem /usr/local/include -isystem /usr/local/include/boost-1_38 -isystem /usr/include/python2.5 -isystem /opt/local/include  -pipe -c -o ReportTests-ReportTests.o `test -f 'test/ReportTests.cc' || echo '../'`test/ReportTests.cc
   /opt/local/bin/python ../test/convert.py ../test/unit/t_utils.cc test/python/t_utils.py
   /opt/local/bin/python ../test/convert.py ../test/unit/t_times.cc test/python/t_times.py
   Traceback (most recent call last):
   File "../test/convert.py", line 45, in <module>
    os.makedirs(dirname)
   File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/os.py", line 172, in makedirs
    mkdir(name, mode)
   OSError: [Errno 17] File exists: '/private/tmp/ledger/ledger-3.0/_build/test/python'
   make[5]: *** [test/python/t_utils.py] Error 1
   make[5]: *** Waiting for unfinished jobs....
   make[4]: *** [check-am] Error 2
   make[3]: *** [check-recursive] Error 1
   make[2]: *** [check] Error 2
   make[1]: *** [distcheck] Error 2
   make: *** [release-distcheck] Error 2
   %%% FAILED to build release-distcheck %%%
   :END:
   :PROPERTIES:
   :ID:       7E6E57B8-A011-4F47-904C-71AD5D03EADF
   :CREATED:  [2009-03-08 Sun 18:43]
   :END:
** DONE Change tests to use comment {} blocks
   - State "DONE"       from "TODO"       [2011-02-12 Sat 18:18]
   The intention is that test files are directly readable by Ledger, just like
   Clang tests are.
   :PROPERTIES:
   :ID:       7BD17484-F524-4FE6-A144-00AF31015047
   :CREATED:  [2011-02-09 Wed 09:26]
   :END:
** DONE Clear out all #if 0 and jww commented sections
   - State "DONE"       from "TODO"       [2009-10-31 Sat 04:33]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   97
   :ID:       7C87DEC8-1FB6-47FC-ADAC-01980020924B
   :CREATED:  [2008-04-11 Fri]
   :END:
** DONE Enable lot spec generation in generate.cc
   - State "DONE"       [2009-02-27 Fri 16:22]
   :PROPERTIES:
   :ID:       C23B7780-378A-412D-AEB1-235B9788F78D
   :CREATED:  [2009-02-27 Fri 04:22]
   :END:
** DONE Ledger performance breakdown
   - State "DONE"       [2009-03-06 Fri 04:11]
   50% parsing
      7% balancing transactions
      7% parsing posting amounts
     36% applying automated transactions
   50% reporting
     38% calculating (due to balance copying in +=)
   :PROPERTIES:
   :ID:       FD55C52B-46D3-4EAE-ABE5-571B7426B842
   :CREATED:  [2009-03-04 Wed 04:43]
   :END:
** DONE Merge in the --unrealized* baseline tests MisterN wrote
   - State "DONE"       from "TODO"       [2009-11-25 Wed 04:51]
   :PROPERTIES:
   :ID:       AB515F51-E71D-4331-94DE-DC53141A5C2E
   :CREATED:  [2009-11-24 Tue 22:11]
   :END:
** DONE opt-prices-format.test is failing due to timezone differences
   - State "DONE"       from "TODO"       [2009-10-22 Thu 07:09]
   :PROPERTIES:
   :ID:       70828011-2F1E-4823-8D7D-422720A0F8E8
   :Message:  [[message://b0bc07100906260800m28db8cb1xd1199dd1e05675ea@mail.gmail.com][Test failure (opt-prices-format test) with git HEAD]]
   :CREATED:  [2009-07-02 Thu 18:09]
   :END:
** DONE Run Ledger through the profiler, against mondo.dat (to beat 11s)
   - State "DONE"       from "TODO"       [2009-11-25 Wed 04:51]
   :PROPERTIES:
   :ID:       B03634E5-C2D7-4DCE-8BBF-A787996BF7BE
   :CREATED:  [2009-02-25 Wed 04:15]
   :END:
** DONE The regression test 13965214.test is time sensitive
   - State "DONE"       [2009-03-02 Mon 04:41]
   :PROPERTIES:
   :ID:       8ED593A1-B953-4629-B0BD-411B82FF283F
   :CREATED:  [2009-03-01 Sun 05:36]
   :END:
** DONE The regression tests are failing with the latest changes
   - State "DONE"       [2009-03-06 Fri 02:37]
   :PROPERTIES:
   :ID:       E01A104A-2D45-4C0A-AF3C-93AF12324C53
   :CREATED:  [2009-03-05 Thu 05:12]
   :END:
** DONE The tokenizer unit test can just iterate the token stream
   - State "DONE"       from "TODO"       [2009-10-28 Wed 17:46]
   :PROPERTIES:
   :ID:       ABCB7791-E098-4C32-A2F6-129E61CC4B10
   :CREATED:  [2009-10-28 Wed 17:29]
   :END:
** DONE tools/proof is failing
   - State "DONE"       [2009-03-08 Sun 04:31]
   :PROPERTIES:
   :ID:       72621A77-F08E-4DED-A2C6-F0B1F337CD9A
   :CREATED:  [2009-03-01 Sun 16:22]
   :END:
** DONE tools/regtest is producing errors
   - State "DONE"       [2009-02-26 Thu 04:10]
   :PROPERTIES:
   :ID:       C7C5BDBF-59E9-4D75-924E-0167B077F35F
   :CREATED:  [2009-02-24 Tue 22:32]
   :END:
** DONE UtilTests is currently getting a bus error, with the new acprep
   - State "DONE"       [2009-03-09 Mon 22:02]
   :PROPERTIES:
   :ID:       C89561FB-C59F-43EE-AD70-AFC01EF93F2A
   :CREATED:  [2009-03-09 Mon 05:26]
   :END:
** DONE When a test fails, output the command to run
   - State "DONE"       from "TODO"       [2011-02-12 Sat 18:18]
   The same way that Clang does.
   :PROPERTIES:
   :ID:       766AEB60-4A6D-4191-AA40-93C41447CC4F
   :CREATED:  [2011-02-09 Wed 09:27]
   :END:
** DONE Write a utility to measure commenting level of functions
   - State "DONE"       from "TODO"       [2010-06-16 Wed 03:52]
   :PROPERTIES:
   :ID:       9A0E5877-6D16-4328-8265-427A3F7B76B2
   :CREATED:  [2010-06-15 Tue 17:11]
   :END:
** DONE Write an "xact generator", to create random xacts for testing
   - State "DONE"       [2009-02-27 Fri 04:11]
   :PROPERTIES:
   :ID:       031DAD5C-8C92-40C1-837F-ABE6F29D4046
   :CREATED:  [2009-02-24 Tue 21:46]
   :END:
** DONE Write an org-mode function to turn a bug TODO into a regression test
   - State "DONE"       from "TODO"       [2009-10-25 Sun 21:58]
   :PROPERTIES:
   :ID:       6A4F436B-E69C-45B2-ABBA-7E550EDBCFCD
   :CREATED:  [2009-02-27 Fri 04:41]
   :END:
** DONE [#C] The opt-forecast-while test is time sensitive, and is failing
   - State "DONE"       from "TODO"       [2009-10-27 Tue 19:11]
   :PROPERTIES:
   :ID:       7B8D466B-6F38-41E6-B2B1-964B8378C929
   :CREATED:  [2009-03-01 Sun 05:36]
   :END:
** CANCELED Serialize error output from the test harness
   - State "CANCELED"   from "TODO"       [2011-02-12 Sat 18:18]
   This makes it possible to see test output without it being overlapped.
   :PROPERTIES:
   :ID:       3E4EA1F5-D949-43BD-A045-B4CD1EEA3384
   :CREATED:  [2011-02-09 Wed 09:27]
   :END:
** TESTED Major areas of implementation remaining [117/117]
   - State "TESTED"     from "DONE"       [2009-06-28 Sun 15:14]
   - State "DONE"       from "TODO"       [2009-06-28 Sun 15:14]
   - State "TODO"       from "TESTED"     [2009-06-27 Sat 01:44]
   - State "TESTED"     from "DONE"       [2009-06-26 Fri 17:49] \\
     These are all being tested (except for those marked).
   - State "DONE"       from "TODO"       [2009-06-26 Fri 17:49]
   - [X] abbrev_len_
   - [X] account_
   - [X] account_width_
   - [X] actual
   - [X] add_budget
   - [X] amount_
   - [X] amount_data
   - [X] amount_width_
   - [X] anon
   - [X] args_only
   - [X] average
   - [X] balance_format_
   - [X] base
   - [X] basis
   - [X] basis, cost
   - [X] begin_
   - [X] budget
   - [X] by_payee
   - [X] cleared
   - [X] code_as_account
   - [X] code_as_payee
   - [X] collapse
   - [X] collapse_if_zero
   - [X] color
   - [X] color
   - [X] columns_
   - [X] comm-as-account
   - [X] comm-as-payee
   - [X] comm_as_account, commodity_as_account
   - [X] comm_as_payee, commodity_as_payee
   - [X] csv_format_
   - [X] current
   - [X] daily
   - [X] date_format_
   - [X] date_width_
   - [X] debug_
   - [X] depth_
   - [X] deviation
   - [X] display_
   - [X] display_amount_
   - [X] display_total_
   - [X] dow
   - [X] download [NOT TO BE TESTED]
   - [X] effective
   - [X] empty
   - [X] end_
   - [X] equity
   - [X] exact
   - [X] exchange
   - [X] file_
   - [X] flat
   - [X] forecast_while_, forecast_ [TIME DEPENDENT]
   - [X] format_
   - [X] gain
   - [X] head_, first_
   - [X] init_file_
   - [X] input_date_format_
   - [X] invert
   - [X] limit_
   - [X] lot_dates
   - [X] lot_prices
   - [X] lot_tags
   - [X] lots
   - [X] lots_actual
   - [X] market
   - [X] monthly
   - [X] no-total
   - [X] only_
   - [X] output_
   - [X] pager_
   - [X] payee_as_account
   - [X] payee_width_
   - [X] pending
   - [X] percent
   - [X] period_
   - [X] plot_amount_format_
   - [X] plot_total_format_
   - [X] price
   - [X] price_db_ [NOT TO BE TESTED]
   - [X] price_exp_, leeway_ [NOT TO BE TESTED]
   - [X] prices_format_
   - [X] pricesdb_format_
   - [X] print_format_
   - [X] quantity
   - [X] quarterly
   - [X] raw
   - [X] real
   - [X] register_format_
   - [X] related
   - [X] related_all
   - [X] revalued
   - [X] revalued_only
   - [X] script_
   - [X] seed_
   - [X] set_account_
   - [X] set_payee_
   - [X] sort_
   - [X] sort_all_
   - [X] sort_xacts_
   - [X] start_of_week_
   - [X] strict
   - [X] subtotal
   - [X] tail_, last_
   - [X] total_
   - [X] total_data
   - [X] total_width_
   - [X] trace_
   - [X] truncate_
   - [X] unbudgeted
   - [X] uncleared
   - [X] unround
   - [X] verbose
   - [X] verify
   - [X] version
   - [X] weekly
   - [X] wide
   - [X] yearly
   :PROPERTIES:
   :ID:       C6C58983-0EB1-49EC-AB04-AB00DE67D61D
   :CREATED:  [2009-02-06 Fri 15:23]
   :END:
* Website
** DONE Add a link to the Fink package for Ledger on the Ledger page
   - State "DONE"       [2007-10-28 Sun 22:33]
   [2007-10-27 Sat] [[message://m2ve8rnc8c.fsf@dnab423967.stanford.edu][fink package for ledger]]
   :PROPERTIES:
   :ARCHIVE_TIME: 2007-11-04 Sun 23:42
   :ARCHIVE_CATEGORY: Computer
   :ID:       BEAF3CBA-298C-4711-95EC-E437915D2D3E
   :END:
** DONE Check out Mark Carter's Ledger page
   - State "DONE"       [2008-12-09 Tue 20:39]
   http://mcarter.myzen.co.uk/ledger/ledger.htm
   :PROPERTIES:
   :ID:       D6BE0562-9DE3-42CC-ADE5-3909B8140A63
   :ARCHIVE_TIME: 2008-12-17 Wed 14:08
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2008-12-09 Tue 02:39]
   :END:
** DONE Convert 10 Trac bugs to the Ledger TODO file
   - State "DONE"       [2008-09-17 Wed 08:31]
   - State "DONE"       [2008-09-10 Wed 22:00]
   - State "DONE"       [2008-09-08 Mon 05:46]
   - State "DONE"       [2008-08-29 Fri 04:27]
   :PROPERTIES:
   :ID:       4372A987-E157-4F44-A22F-F5A2E85A974B
   :ARCHIVE_TIME: 2008-10-15 Wed 17:18
   :ARCHIVE_CATEGORY: Computer
   :CREATED:  [2008-08-26 Tue]
   :END:
** DONE Find out why Thomas can't fetch my git repo over HTTP
   - State "DONE"       [2008-04-26 Sat]
   - State "TODO"       [2008-04-26 Sat 00:16]
   error: pick-rref: refs/heads/master not found No such ref
     refs/heads/master at http://newartisans.com/git/ledger.git
     It turns out this is a bug in git itself, which someone in #git said they
     are going to work on.
   :PROPERTIES:
   :ID:       5B36755A-03D7-47FF-BE7F-4AFFC570C5FB
   :CREATED:  [2008-04-25 Fri]
   :END:
** DONE Fix the link on my Ledger project page to sourceforge.net
   - State "DONE"       [2007-11-07 Wed 03:56]
   :PROPERTIES:
   :ARCHIVE_TIME: 2007-11-14 Wed 17:14
   :ARCHIVE_CATEGORY: Ledger-2
   :ID:       753361B3-7BE0-45CE-A8E5-B8A277F259C9
   :CREATED:  [2007-11-06 Tue]
   :END:
** DONE Make a note of the published Ledger manual on the webpage
   - State "DONE"       from "TODO"       [2009-06-16 Tue 18:30]
   one big page: http://joyful.com/repos/ledger/doc/ledger.html
   many pages: http://joyful.com/repos/ledger/doc/ledger/
   pdf: http://joyful.com/repos/ledger/doc/ledger.pdf
   :PROPERTIES:
   :Submitter: Simon Michael <simon@joyful.com>
   :Version:  2.6.1
   :ID:       B5748AF6-A3D8-4F49-B0B0-7C8E463883AB
   :CREATED:  [2008-10-25 Sat 23:59]
   :END:
** DONE Mention Martin's beancount project from the Ledger home page
   - State "DONE"       from "TODO"       [2009-06-16 Tue 18:30]
   "Beancount on PyPi" from Martin Blais <blais@furius.ca>
   :PROPERTIES:
   :Submitter: Martin Blais <blais@furius.ca>
   :ID:       81540394-3662-4CBA-8747-3F6CEAEE61D5
   :CREATED:  [2008-08-14 Thu]
   :END:
** DONE Post to the Ledger forums about Ledger's new direction
   - State "DONE"       [2008-08-04 Mon]
   :PROPERTIES:
   :ID:       A11857E2-776B-4A0D-8BE1-D6D75843FBA2
   :CREATED:  [2008-04-24 Thu]
   :END:
** DONE The Ledger project page is not formatted correctly
   - State "DONE"       [2008-06-26 Thu]
   It appears that the MultiMarkdown codes are being ignored.
   :PROPERTIES:
   :ID:       5C4EA977-7231-42E4-BAB5-77F9963D846F
   :CREATED:  [2008-05-29 Thu]
   :END:
** DONE [#C] Create a Wiki page titled "Who's using Ledger?"
   - State "DONE"       from "TODO"       [2009-10-26 Mon 22:19]
   :PROPERTIES:
   :Version:  2.6
   :Ticket:   93
   :ID:       F50ADD18-F246-4FDC-85A2-65C435ADE1A4
   :CREATED:  [2008-04-11 Fri]
   :END:
* Misc
** NOTE Speed comparison of strptime/strftime to Boost time_facet
   |                   |  Debug | Optimized |
   |-------------------+--------+-----------|
   | strptime/strftime |  9.356 |     3.355 |
   | Boost time_facet  | 10.367 |     3.765 |
   :PROPERTIES:
   :ID:       BFA80E12-0390-47A5-8B4C-5604DAB44E08
   :VISIBILITY: folded
   :CREATED:  [2009-10-25 Sun 19:02]
   :END:
* Docs
** DONE [[bug:209][#209]] Escape @ characters in the manual
   - State "DONE"       from "TODO"       [2010-06-02 Wed 01:15]
   :PROPERTIES:
   :ID:       2C789E95-C5D1-41B4-9F14-3165A8A8FAD9
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :Message:  [[message://bug-209-1@http.newartisans.com/bugzilla/][{Bug 209} New: escape @ characters in manual]]
   :CREATED:  [2010-05-31 Mon 14:40]
   :END:
** DONE [[bug:453][#453]] Documentation patches for 3.0
   - State "DONE"       from "TODO"       [2010-12-30 Thu 02:44]
   :PROPERTIES:
   :ID:       49655F42-5CE7-4CC5-86E8-BAE7775EFA1E
   :Submitter: Matthew Palmer <mpalmer@hezmatt.org>
   :Message:  [[message://20101211001916.GG4308@hezmatt.org][Documentation patches for 3.0]]
   :CREATED:  [2010-12-12 Sun 17:12]
   :END:
** DONE Remove --commodity-as-account from the man page and manual
   - State "DONE"       from "TODO"       [2010-02-05 Fri 00:03]
   :PROPERTIES:
   :ID:       849EB210-BEEB-4FDE-A90C-688400D55ECE
   :CREATED:  [2009-12-29 Tue 16:07]
   :END:
** DONE [#C] [[bug:202][#202]] doc/NEWS and xml
   - State "DONE"       from "TODO"       [2010-06-15 Tue 08:42] \\
     This comment is no longer in the NEWS file.
   doc/NEWS claims that the xml command was removed but it's still there (at
   least "ledger -f foo.dat xml" works; maybe you meant a different xml
   command?).
   :PROPERTIES:
   :ID:       130C2697-1601-488A-B0D7-2422CF50CB86
   :Message:  [[message://20100322161529.GA7030@jirafa.cyrius.com][doc/NEWS and xml]]
   :Submitter: Martin Michlmayr <tbm@cyrius.com>
   :CREATED:  [2010-03-26 Fri 22:22]
   :END:
** DONE [#C] [[bug:208][#208]] Special characters in manual don't show up in PDF
   - State "DONE"       from "TODO"       [2010-06-14 Mon 08:16] \\
     With modern versions of Texinfo, this should now work.  I was able to see
     accented characters in the PDF generated here.
   :PROPERTIES:
   :ID:       971BE95D-7538-4076-901E-E5C35BD87438
   :CREATED:  [2010-05-31 Mon 14:39]
   :END:
** WORKSFORME [[bug:221][#221]] Value expressions don't work as documented
   - State "WORKSFORME" from "TODO"       [2010-06-01 Tue 17:12]
   - Note taken on [2010-06-01 Tue 17:11] \\
     In 3.0 you would use this:
   - Note taken on [2010-06-01 Tue 17:11] \\
     BTW, here's what I'm actually trying to do: ledger bal shows me a total
     of expenses I made in EUR, GBP and USD.  I'd then like to use ledger reg
     to search for all postings of only _one_ of these currencies (e.g. what
     did I spend in USD).  Is this possible already, possibly with {..}?
   #+begin_src sh
     ledger reg -l 'commodity = "USD"'
   #+end_src
   It seems the value expressions don't (or no longer) work as documented.
   For example, section "Complex expressions" suggests that you can use
   p/REGEXP/.  So I tried this:
   :OUTPUT:
   $ ledger -f 2 reg expenses p/foo/
   While parsing value expression:
     (account =~ /expenses/ | account =~ /p/foo//)
                                            ^^^
   Error: Missing ')'
   :END:

   I then realized that I probably need an -d option, but this
   also doesn't work:
   :OUTPUT:
   $ ledger -f 2 reg expenses -d p/foo/
   While parsing value expression:
     (p/foo/)&(amount|(!post&total))
            ^
   Error: ) operator not followed by argument
   :END:

   In fact, not even the example from the manual works:
   :OUTPUT:
   $ ledger -f 2 -d "/^Liabilities/?T<0:UT>100" balance
   While evaluating value expression:
     (/^Liabilities/ ? (T < 0) : (UT > 100) & (amount | (!(post) & total)))
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   Error: Cannot determine truth of a regexp (did you mean 'account =~
   /^Liabilities/'?)
   :END:
   :PROPERTIES:
   :ID:       D8729755-A094-4CE9-B03C-8B3016AC6590
   :Submitter: bugzilla-daemon@mail.johnwiegley.com
   :CREATED:  [2010-06-01 Tue 15:15]
   :END:
** NOTE Plotting time-series histograms with R and ggplot2
   #+begin_src R :results output
   install.packages("ggplot2")
   library(ggplot2)
   mydata <- read.table("/tmp/data.txt", header=TRUE)
   qplot(date, amount, data = mydata, geom="histogram")
   #+end_src
   :PROPERTIES:
   :ID:       CA4ED683-21CD-4BED-9820-C9F1077B78AE
   :VISIBILITY: folded
   :CREATED:  [2010-03-11 Thu 03:19]
   :END:
